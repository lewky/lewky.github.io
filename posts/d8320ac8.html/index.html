<!doctype html><html><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="noodp"><meta http-equiv=x-ua-compatible content="IE=edge, chrome=1"><title>Log4j2异常 - IllegalStateException: No factory method found for class - Yulin Lewis' Blog</title><meta name=keywords content="雨临Lewis,Java,hugo,hexo,博客"><meta name=Description content="不想当写手的码农不是好咸鱼_(xз」∠)_"><meta property="og:title" content="Log4j2异常 - IllegalStateException: No factory method found for class"><meta property="og:description" content="问题与分析
在使用Log4j2时，虽然可以正确读取配置文件并生成log文件，但偶然发现控制台打印了异常信息如下：


 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13


2018-12-31 17:28:14,282 Log4j2-TF-19-ConfiguratonFileWatcher-6 ERROR Unable to invoke factory method in class org.apache.logging.log4j.core.appender.RollingFileAppender for element RollingFile: java.lang.IllegalStateException: No factory method found for class org.apache.logging.log4j.core.appender.RollingFileAppender java.lang.IllegalStateException: No factory method found for class org.apache.logging.log4j.core.appender.RollingFileAppender
        at org.apache.logging.log4j.core.config.plugins.util.PluginBuilder.findFactoryMethod(PluginBuilder.java:235)
        at org.apache.logging.log4j.core.config.plugins.util.PluginBuilder.build(PluginBuilder.java:135)
        at org.apache.logging.log4j.core.config.AbstractConfiguration.createPluginObject(AbstractConfiguration.java:959)
        at org.apache.logging.log4j.core.config.AbstractConfiguration.createConfiguration(AbstractConfiguration.java:899)
        at org.apache.logging.log4j.core.config.AbstractConfiguration.createConfiguration(AbstractConfiguration.java:891)
        at org.apache.logging.log4j.core.config.AbstractConfiguration.doConfigure(AbstractConfiguration.java:514)
        at org.apache.logging.log4j.core.config.AbstractConfiguration.initialize(AbstractConfiguration.java:238)
        at org.apache.logging.log4j.core.config.AbstractConfiguration.start(AbstractConfiguration.java:250)
        at org.apache.logging.log4j.core.LoggerContext.setConfiguration(LoggerContext.java:547)
        at org.apache.logging.log4j.core.LoggerContext.onChange(LoggerContext.java:670)
        at org.apache.logging.log4j.core.config.ConfiguratonFileWatcher$ReconfigurationRunnable.run(ConfiguratonFileWatcher.java:68)
        at java.lang.Thread.run(Thread.java:748)"><meta property="og:type" content="article"><meta property="og:url" content="https://lewky.cn/posts/d8320ac8.html/"><meta property="og:image" content="https://lewky.cn/logo.png"><meta property="article:published_time" content="2019-01-02T22:05:54+08:00"><meta property="article:modified_time" content="2019-01-02T22:05:54+08:00"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://lewky.cn/logo.png"><meta name=twitter:title content="Log4j2异常 - IllegalStateException: No factory method found for class"><meta name=twitter:description content="问题与分析
在使用Log4j2时，虽然可以正确读取配置文件并生成log文件，但偶然发现控制台打印了异常信息如下：


 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13


2018-12-31 17:28:14,282 Log4j2-TF-19-ConfiguratonFileWatcher-6 ERROR Unable to invoke factory method in class org.apache.logging.log4j.core.appender.RollingFileAppender for element RollingFile: java.lang.IllegalStateException: No factory method found for class org.apache.logging.log4j.core.appender.RollingFileAppender java.lang.IllegalStateException: No factory method found for class org.apache.logging.log4j.core.appender.RollingFileAppender
        at org.apache.logging.log4j.core.config.plugins.util.PluginBuilder.findFactoryMethod(PluginBuilder.java:235)
        at org.apache.logging.log4j.core.config.plugins.util.PluginBuilder.build(PluginBuilder.java:135)
        at org.apache.logging.log4j.core.config.AbstractConfiguration.createPluginObject(AbstractConfiguration.java:959)
        at org.apache.logging.log4j.core.config.AbstractConfiguration.createConfiguration(AbstractConfiguration.java:899)
        at org.apache.logging.log4j.core.config.AbstractConfiguration.createConfiguration(AbstractConfiguration.java:891)
        at org.apache.logging.log4j.core.config.AbstractConfiguration.doConfigure(AbstractConfiguration.java:514)
        at org.apache.logging.log4j.core.config.AbstractConfiguration.initialize(AbstractConfiguration.java:238)
        at org.apache.logging.log4j.core.config.AbstractConfiguration.start(AbstractConfiguration.java:250)
        at org.apache.logging.log4j.core.LoggerContext.setConfiguration(LoggerContext.java:547)
        at org.apache.logging.log4j.core.LoggerContext.onChange(LoggerContext.java:670)
        at org.apache.logging.log4j.core.config.ConfiguratonFileWatcher$ReconfigurationRunnable.run(ConfiguratonFileWatcher.java:68)
        at java.lang.Thread.run(Thread.java:748)"><meta name=application-name content="雨临Lewis的博客"><meta name=apple-mobile-web-app-title content="雨临Lewis的博客"><meta name=theme-color content="#ffffff"><meta name=msapplication-TileColor content="#da532c"><link rel="shortcut icon" type=image/x-icon href=/favicon.ico><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><link rel=manifest href=/site.webmanifest><link rel=canonical href=https://lewky.cn/posts/d8320ac8.html/><link rel=prev href=https://lewky.cn/posts/a5cad454.html/><link rel=next href=https://lewky.cn/posts/8dc44b45.html/><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/normalize.css@8.0.1/normalize.min.css><link rel=stylesheet href=/css/style.min.css><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.13.0/css/all.min.css><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/animate.css@3.7.2/animate.min.css><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"Log4j2异常 - IllegalStateException: No factory method found for class","inLanguage":"","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/lewky.cn\/posts\/d8320ac8.html\/"},"genre":"posts","keywords":"Log4j2","wordcount":1520,"url":"https:\/\/lewky.cn\/posts\/d8320ac8.html\/","datePublished":"2019-01-02T22:05:54+08:00","dateModified":"2019-01-02T22:05:54+08:00","license":"This work is licensed under a Creative Commons Attribution-NonCommercial 4.0 International License.","publisher":{"@type":"Organization","name":"雨临Lewis","logo":"https:\/\/lewky.cn\/images\/avatar.jpg"},"author":{"@type":"Person","name":"雨临Lewis"},"description":""}</script></head><body header-desktop=fixed header-mobile=auto><script type=text/javascript>(window.localStorage&&localStorage.getItem('theme')?localStorage.getItem('theme')==='dark':('auto'==='auto'?window.matchMedia('(prefers-color-scheme: dark)').matches:'auto'==='dark'))&&document.body.setAttribute('theme','dark');</script><div id=mask></div><div class=wrapper><header class=desktop id=header-desktop><div class=header-wrapper><a href=https://github.com/lewky class=github-corner target=_blank title="Follow me on GitHub" aria-label="Follow me on GitHub"><svg width="3.5rem" height="3.5rem" viewBox="0 0 250 250" style="fill:#70b7fd;color:#fff;position:absolute;top:0;border:0;left:0;transform:scale(-1,1)" aria-hidden="true"><path d="M0 0 115 115h15l12 27L250 250V0z"/><path d="M128.3 109C113.8 99.7 119 89.6 119 89.6 122 82.7 120.5 78.6 120.5 78.6 119.2 72 123.4 76.3 123.4 76.3 127.3 80.9 125.5 87.3 125.5 87.3 122.9 97.6 130.6 101.9 134.4 103.2" fill="currentcolor" style="transform-origin:130px 106px" class="octo-arm"/><path d="M115 115C114.9 115.1 118.7 116.5 119.8 115.4L133.7 101.6C136.9 99.2 139.9 98.4 142.2 98.6 133.8 88 127.5 74.4 143.8 58 148.5 53.4 154 51.2 159.7 51 160.3 49.4 163.2 43.6 171.4 40.1 171.4 40.1 176.1 42.5 178.8 56.2 183.1 58.6 187.2 61.8 190.9 65.4 194.5 69 197.7 73.2 200.1 77.6 213.8 80.2 216.3 84.9 216.3 84.9 212.7 93.1 206.9 96 205.4 96.6 205.1 102.4 203 107.8 198.3 112.5 181.9 128.9 168.3 122.5 157.7 114.1 157.9 116.9 156.7 120.9 152.7 124.9L141 136.5C139.8 137.7 141.6 141.9 141.8 141.8z" fill="currentcolor" class="octo-body"/></svg></a><div class=header-title><a href=/ title="Yulin Lewis' Blog"><span class=header-title-pre><i class="fas fa-fw fa-atom"></i></span>雨临Lewis</a></div><div class=menu><div class=menu-inner><a class=menu-item href=/posts/><i class="fas fa-fw fa-archive"></i>归档 </a><a class=menu-item href=/tags/><i class="fas fa-fw fa-tag"></i>标签 </a><a class=menu-item href=/categories/><i class="fas fa-fw fa-th"></i>分类 </a><a class=menu-item href=/hot/><i class="fas fa-fw fa-fire"></i>热度 </a><a class=menu-item href=/friends/><i class="fas fa-fw fa-fan fa-spin"></i>友链 </a><a class=menu-item href=/search/><i class="fas fa-fw fa-search"></i>搜索 </a><a href=javascript:void(0); class="menu-item language" title=更多><i class="fa fa-fw fa-angle-double-down"></i>更多
<select class=menu-more id=language-select-desktop onchange="location=this.value;">
<option class=placeholder>------</option><option value=/bbs/><i class="fas fa-fw fa-fan fa-spin"></i> BBS </option><option value=https://javanote.doc.lewky.cn/><i class="fas fa-fw fa-fan fa-spin"></i>JavaNote </option><option value=/about/><i class="fas fa-fw fa-at"></i>关于 </option><option value=/posts/e62c38c4.html/><i class="fas fa-fw fa-cog"></i>建站日志</option></select>
</a><span class="menu-item delimiter"></span><a href=javascript:void(0); class="menu-item theme-switch" title=切换主题><i class="fas fa-adjust fa-fw"></i></a></div></div></div></header><header class=mobile id=header-mobile><div class=header-container><div class=header-wrapper><div class=header-title><a href=/ title="Yulin Lewis' Blog"><span class=header-title-pre><i class="fas fa-fw fa-atom"></i></span>雨临Lewis</a></div><div class=menu-toggle id=menu-toggle-mobile><span></span><span></span><span></span></div></div><div class=menu id=menu-mobile><a class=menu-item href=/posts/><i class="fas fa-fw fa-archive"></i>归档</a><a class=menu-item href=/tags/><i class="fas fa-fw fa-tag"></i>标签</a><a class=menu-item href=/categories/><i class="fas fa-fw fa-th"></i>分类</a><a class=menu-item href=/hot/><i class="fas fa-fw fa-fire"></i>热度</a><a class=menu-item href=/friends/><i class="fas fa-fw fa-fan fa-spin"></i>友链</a><a class=menu-item href=/search/><i class="fas fa-fw fa-search"></i>搜索</a><a href=javascript:void(0); class="menu-item theme-switch" title=切换主题>
<i class="fas fa-adjust fa-fw"></i></a><a href=javascript:void(0); class="menu-item language" title=更多><i class="fa fa-angle-double-down"></i>更多
<select class=menu-more id=language-select-desktop onchange="location=this.value;">
<option class=placeholder>------</option><option value=/bbs/><i class="fas fa-fw fa-fan fa-spin"></i> BBS </option><option value=https://javanote.doc.lewky.cn/><i class="fas fa-fw fa-fan fa-spin"></i>JavaNote </option><option value=/about/><i class="fas fa-fw fa-at"></i>关于 </option><option value=/posts/e62c38c4.html/><i class="fas fa-fw fa-cog"></i>建站日志</option></select></a></div></div></header><div class="search-dropdown desktop"><div id=search-dropdown-desktop></div></div><div class="search-dropdown mobile"><div id=search-dropdown-mobile></div></div><main class=main><div class=container><div class=toc id=toc-auto><h2 class=toc-title>目录</h2><div class=toc-content id=toc-content-auto></div></div><article class="page single"><h1 class="single-title animated flipInX">Log4j2异常 - IllegalStateException: No factory method found for class</h1><div class=post-meta><div class=post-meta-line><span class=post-author><a href=/ title=Author rel=author class=author><i class="fas fa-user-circle fa-fw"></i>雨临Lewis</a></span>&nbsp;<span class=post-category>收录于 <a href=/categories/%E6%97%A5%E5%BF%97%E6%A1%86%E6%9E%B6/><i class="far fa-folder fa-fw"></i>日志框架</a></span></div><div class=post-meta-line><i class="far fa-calendar-alt fa-fw"></i>&nbsp;<time datetime=2019-01-02>2019-01-02</time>&nbsp;<i class="fas fa-pencil-alt fa-fw"></i>&nbsp;约 1520 字
<i class="far fa-clock fa-fw"></i>&nbsp;预计阅读 4 分钟&nbsp;<span id=/posts/d8320ac8.html/ class=leancloud_visitors data-flag-title="Log4j2异常 - IllegalStateException: No factory method found for class">
<i class="far fa-eye fa-fw"></i>&nbsp;<span class=leancloud-visitors-count></span>&nbsp;次阅读
</span>&nbsp;
<a href=#comments id=post-meta-vcount title=查看评论><i class="fas fa-comment fa-fw"></i>&nbsp;<span id=/posts/d8320ac8.html/ class=waline-comment-count></span>&nbsp;条评论</a></div></div><div class="details toc" id=toc-static kept><div class="details-summary toc-title"><span>目录</span>
<span><i class="details-icon fas fa-angle-right"></i></span></div><div class="details-content toc-content" id=toc-content-static><nav id=TableOfContents><ol><li><a href=#问题与分析>问题与分析</a></li><li><a href=#解决方法>解决方法</a><ol><li><a href=#方案一>方案一</a></li><li><a href=#方案二>方案二</a></li><li><a href=#方案三>方案三</a></li></ol></li><li><a href=#参考链接>参考链接</a></li></ol></nav></div></div><div class=content id=content><h2 id=问题与分析>问题与分析</h2><p>在使用Log4j2时，虽然可以正确读取配置文件并生成log文件，但偶然发现控制台打印了异常信息如下：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-java data-lang=java><span class=n>2018</span><span class=o>-</span><span class=n>12</span><span class=o>-</span><span class=n>31</span> <span class=n>17</span><span class=o>:</span><span class=n>28</span><span class=o>:</span><span class=n>14</span><span class=o>,</span><span class=n>282</span> <span class=n>Log4j2</span><span class=o>-</span><span class=n>TF</span><span class=o>-</span><span class=n>19</span><span class=o>-</span><span class=n>ConfiguratonFileWatcher</span><span class=o>-</span><span class=n>6</span> <span class=n>ERROR</span> <span class=n>Unable</span> <span class=n>to</span> <span class=n>invoke</span> <span class=n>factory</span> <span class=n>method</span> <span class=n>in</span> <span class=kd>class</span> <span class=nc>org</span><span class=o>.</span><span class=na>apache</span><span class=o>.</span><span class=na>logging</span><span class=o>.</span><span class=na>log4j</span><span class=o>.</span><span class=na>core</span><span class=o>.</span><span class=na>appender</span><span class=o>.</span><span class=na>RollingFileAppender</span> <span class=k>for</span> <span class=n>element</span> <span class=n>RollingFile</span><span class=o>:</span> <span class=n>java</span><span class=o>.</span><span class=na>lang</span><span class=o>.</span><span class=na>IllegalStateException</span><span class=o>:</span> <span class=n>No</span> <span class=n>factory</span> <span class=n>method</span> <span class=n>found</span> <span class=k>for</span> <span class=kd>class</span> <span class=nc>org</span><span class=o>.</span><span class=na>apache</span><span class=o>.</span><span class=na>logging</span><span class=o>.</span><span class=na>log4j</span><span class=o>.</span><span class=na>core</span><span class=o>.</span><span class=na>appender</span><span class=o>.</span><span class=na>RollingFileAppender</span> <span class=n>java</span><span class=o>.</span><span class=na>lang</span><span class=o>.</span><span class=na>IllegalStateException</span><span class=o>:</span> <span class=n>No</span> <span class=n>factory</span> <span class=n>method</span> <span class=n>found</span> <span class=k>for</span> <span class=kd>class</span> <span class=nc>org</span><span class=o>.</span><span class=na>apache</span><span class=o>.</span><span class=na>logging</span><span class=o>.</span><span class=na>log4j</span><span class=o>.</span><span class=na>core</span><span class=o>.</span><span class=na>appender</span><span class=o>.</span><span class=na>RollingFileAppender</span>
        <span class=n>at</span> <span class=n>org</span><span class=o>.</span><span class=na>apache</span><span class=o>.</span><span class=na>logging</span><span class=o>.</span><span class=na>log4j</span><span class=o>.</span><span class=na>core</span><span class=o>.</span><span class=na>config</span><span class=o>.</span><span class=na>plugins</span><span class=o>.</span><span class=na>util</span><span class=o>.</span><span class=na>PluginBuilder</span><span class=o>.</span><span class=na>findFactoryMethod</span><span class=o>(</span><span class=n>PluginBuilder</span><span class=o>.</span><span class=na>java</span><span class=o>:</span><span class=n>235</span><span class=o>)</span>
        <span class=n>at</span> <span class=n>org</span><span class=o>.</span><span class=na>apache</span><span class=o>.</span><span class=na>logging</span><span class=o>.</span><span class=na>log4j</span><span class=o>.</span><span class=na>core</span><span class=o>.</span><span class=na>config</span><span class=o>.</span><span class=na>plugins</span><span class=o>.</span><span class=na>util</span><span class=o>.</span><span class=na>PluginBuilder</span><span class=o>.</span><span class=na>build</span><span class=o>(</span><span class=n>PluginBuilder</span><span class=o>.</span><span class=na>java</span><span class=o>:</span><span class=n>135</span><span class=o>)</span>
        <span class=n>at</span> <span class=n>org</span><span class=o>.</span><span class=na>apache</span><span class=o>.</span><span class=na>logging</span><span class=o>.</span><span class=na>log4j</span><span class=o>.</span><span class=na>core</span><span class=o>.</span><span class=na>config</span><span class=o>.</span><span class=na>AbstractConfiguration</span><span class=o>.</span><span class=na>createPluginObject</span><span class=o>(</span><span class=n>AbstractConfiguration</span><span class=o>.</span><span class=na>java</span><span class=o>:</span><span class=n>959</span><span class=o>)</span>
        <span class=n>at</span> <span class=n>org</span><span class=o>.</span><span class=na>apache</span><span class=o>.</span><span class=na>logging</span><span class=o>.</span><span class=na>log4j</span><span class=o>.</span><span class=na>core</span><span class=o>.</span><span class=na>config</span><span class=o>.</span><span class=na>AbstractConfiguration</span><span class=o>.</span><span class=na>createConfiguration</span><span class=o>(</span><span class=n>AbstractConfiguration</span><span class=o>.</span><span class=na>java</span><span class=o>:</span><span class=n>899</span><span class=o>)</span>
        <span class=n>at</span> <span class=n>org</span><span class=o>.</span><span class=na>apache</span><span class=o>.</span><span class=na>logging</span><span class=o>.</span><span class=na>log4j</span><span class=o>.</span><span class=na>core</span><span class=o>.</span><span class=na>config</span><span class=o>.</span><span class=na>AbstractConfiguration</span><span class=o>.</span><span class=na>createConfiguration</span><span class=o>(</span><span class=n>AbstractConfiguration</span><span class=o>.</span><span class=na>java</span><span class=o>:</span><span class=n>891</span><span class=o>)</span>
        <span class=n>at</span> <span class=n>org</span><span class=o>.</span><span class=na>apache</span><span class=o>.</span><span class=na>logging</span><span class=o>.</span><span class=na>log4j</span><span class=o>.</span><span class=na>core</span><span class=o>.</span><span class=na>config</span><span class=o>.</span><span class=na>AbstractConfiguration</span><span class=o>.</span><span class=na>doConfigure</span><span class=o>(</span><span class=n>AbstractConfiguration</span><span class=o>.</span><span class=na>java</span><span class=o>:</span><span class=n>514</span><span class=o>)</span>
        <span class=n>at</span> <span class=n>org</span><span class=o>.</span><span class=na>apache</span><span class=o>.</span><span class=na>logging</span><span class=o>.</span><span class=na>log4j</span><span class=o>.</span><span class=na>core</span><span class=o>.</span><span class=na>config</span><span class=o>.</span><span class=na>AbstractConfiguration</span><span class=o>.</span><span class=na>initialize</span><span class=o>(</span><span class=n>AbstractConfiguration</span><span class=o>.</span><span class=na>java</span><span class=o>:</span><span class=n>238</span><span class=o>)</span>
        <span class=n>at</span> <span class=n>org</span><span class=o>.</span><span class=na>apache</span><span class=o>.</span><span class=na>logging</span><span class=o>.</span><span class=na>log4j</span><span class=o>.</span><span class=na>core</span><span class=o>.</span><span class=na>config</span><span class=o>.</span><span class=na>AbstractConfiguration</span><span class=o>.</span><span class=na>start</span><span class=o>(</span><span class=n>AbstractConfiguration</span><span class=o>.</span><span class=na>java</span><span class=o>:</span><span class=n>250</span><span class=o>)</span>
        <span class=n>at</span> <span class=n>org</span><span class=o>.</span><span class=na>apache</span><span class=o>.</span><span class=na>logging</span><span class=o>.</span><span class=na>log4j</span><span class=o>.</span><span class=na>core</span><span class=o>.</span><span class=na>LoggerContext</span><span class=o>.</span><span class=na>setConfiguration</span><span class=o>(</span><span class=n>LoggerContext</span><span class=o>.</span><span class=na>java</span><span class=o>:</span><span class=n>547</span><span class=o>)</span>
        <span class=n>at</span> <span class=n>org</span><span class=o>.</span><span class=na>apache</span><span class=o>.</span><span class=na>logging</span><span class=o>.</span><span class=na>log4j</span><span class=o>.</span><span class=na>core</span><span class=o>.</span><span class=na>LoggerContext</span><span class=o>.</span><span class=na>onChange</span><span class=o>(</span><span class=n>LoggerContext</span><span class=o>.</span><span class=na>java</span><span class=o>:</span><span class=n>670</span><span class=o>)</span>
        <span class=n>at</span> <span class=n>org</span><span class=o>.</span><span class=na>apache</span><span class=o>.</span><span class=na>logging</span><span class=o>.</span><span class=na>log4j</span><span class=o>.</span><span class=na>core</span><span class=o>.</span><span class=na>config</span><span class=o>.</span><span class=na>ConfiguratonFileWatcher$ReconfigurationRunnable</span><span class=o>.</span><span class=na>run</span><span class=o>(</span><span class=n>ConfiguratonFileWatcher</span><span class=o>.</span><span class=na>java</span><span class=o>:</span><span class=n>68</span><span class=o>)</span>
        <span class=n>at</span> <span class=n>java</span><span class=o>.</span><span class=na>lang</span><span class=o>.</span><span class=na>Thread</span><span class=o>.</span><span class=na>run</span><span class=o>(</span><span class=n>Thread</span><span class=o>.</span><span class=na>java</span><span class=o>:</span><span class=n>748</span><span class=o>)</span>
</code></pre></td></tr></table></div></div><p>将控制台的所有信息都复制出来，仔细查找，又发现了相关的异常信息：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-java data-lang=java><span class=n>2018</span><span class=o>-</span><span class=n>12</span><span class=o>-</span><span class=n>31</span> <span class=n>17</span><span class=o>:</span><span class=n>28</span><span class=o>:</span><span class=n>14</span><span class=o>,</span><span class=n>241</span> <span class=n>Log4j2</span><span class=o>-</span><span class=n>TF</span><span class=o>-</span><span class=n>19</span><span class=o>-</span><span class=n>ConfiguratonFileWatcher</span><span class=o>-</span><span class=n>6</span> <span class=n>ERROR</span> <span class=n>Unable</span> <span class=n>to</span> <span class=n>create</span> <span class=n>file</span> <span class=n>logs</span><span class=o>/</span><span class=n>$</span><span class=o>{</span><span class=n>ctx</span><span class=o>:</span><span class=n>domainId</span><span class=o>}/</span><span class=n>CNTCore</span><span class=o>.</span><span class=na>log</span> <span class=n>java</span><span class=o>.</span><span class=na>io</span><span class=o>.</span><span class=na>IOException</span><span class=o>:</span> <span class=n>The</span> <span class=n>filename</span><span class=o>,</span> <span class=n>directory</span> <span class=n>name</span><span class=o>,</span> <span class=n>or</span> <span class=n>volume</span> <span class=n>label</span> <span class=n>syntax</span> <span class=n>is</span> <span class=n>incorrect</span>
        <span class=n>at</span> <span class=n>java</span><span class=o>.</span><span class=na>io</span><span class=o>.</span><span class=na>WinNTFileSystem</span><span class=o>.</span><span class=na>canonicalize0</span><span class=o>(</span><span class=n>Native</span> <span class=n>Method</span><span class=o>)</span>
        <span class=n>at</span> <span class=n>java</span><span class=o>.</span><span class=na>io</span><span class=o>.</span><span class=na>WinNTFileSystem</span><span class=o>.</span><span class=na>canonicalize</span><span class=o>(</span><span class=n>WinNTFileSystem</span><span class=o>.</span><span class=na>java</span><span class=o>:</span><span class=n>428</span><span class=o>)</span>
        <span class=n>at</span> <span class=n>java</span><span class=o>.</span><span class=na>io</span><span class=o>.</span><span class=na>File</span><span class=o>.</span><span class=na>getCanonicalPath</span><span class=o>(</span><span class=n>File</span><span class=o>.</span><span class=na>java</span><span class=o>:</span><span class=n>618</span><span class=o>)</span>
	<span class=n>at</span> <span class=o>....</span>


<span class=n>2018</span><span class=o>-</span><span class=n>12</span><span class=o>-</span><span class=n>31</span> <span class=n>17</span><span class=o>:</span><span class=n>28</span><span class=o>:</span><span class=n>14</span><span class=o>,</span><span class=n>280</span> <span class=n>Log4j2</span><span class=o>-</span><span class=n>TF</span><span class=o>-</span><span class=n>19</span><span class=o>-</span><span class=n>ConfiguratonFileWatcher</span><span class=o>-</span><span class=n>6</span> <span class=n>ERROR</span> <span class=n>Could</span> <span class=n>not</span> <span class=n>create</span> <span class=n>plugin</span> <span class=n>of</span> <span class=n>type</span> <span class=kd>class</span> <span class=nc>org</span><span class=o>.</span><span class=na>apache</span><span class=o>.</span><span class=na>logging</span><span class=o>.</span><span class=na>log4j</span><span class=o>.</span><span class=na>core</span><span class=o>.</span><span class=na>appender</span><span class=o>.</span><span class=na>RollingFileAppender</span> <span class=k>for</span> <span class=n>element</span> <span class=n>RollingFile</span><span class=o>:</span> <span class=n>java</span><span class=o>.</span><span class=na>lang</span><span class=o>.</span><span class=na>IllegalStateException</span><span class=o>:</span> <span class=n>ManagerFactory</span> <span class=o>[...]</span> <span class=n>unable</span> <span class=n>to</span> <span class=n>create</span> <span class=n>manager</span> <span class=k>for</span> <span class=o>[</span><span class=n>logs</span><span class=o>/</span><span class=n>$</span><span class=o>{</span><span class=n>ctx</span><span class=o>:</span><span class=n>domainId</span><span class=o>}/</span><span class=n>CNTCore</span><span class=o>.</span><span class=na>log</span><span class=o>]</span> <span class=n>with</span> <span class=n>data</span> <span class=o>[...]</span> <span class=n>java</span><span class=o>.</span><span class=na>lang</span><span class=o>.</span><span class=na>IllegalStateException</span><span class=o>:</span> <span class=n>ManagerFactory</span> <span class=o>[...]</span> <span class=n>unable</span> <span class=n>to</span> <span class=n>create</span> <span class=n>manager</span> <span class=k>for</span> <span class=o>[</span><span class=n>logs</span><span class=o>/</span><span class=n>$</span><span class=o>{</span><span class=n>ctx</span><span class=o>:</span><span class=n>domainId</span><span class=o>}/</span><span class=n>CNTCore</span><span class=o>.</span><span class=na>log</span><span class=o>]</span> <span class=n>with</span> <span class=n>data</span> <span class=o>[...]</span>
        <span class=n>at</span> <span class=n>org</span><span class=o>.</span><span class=na>apache</span><span class=o>.</span><span class=na>logging</span><span class=o>.</span><span class=na>log4j</span><span class=o>.</span><span class=na>core</span><span class=o>.</span><span class=na>appender</span><span class=o>.</span><span class=na>AbstractManager</span><span class=o>.</span><span class=na>getManager</span><span class=o>(</span><span class=n>AbstractManager</span><span class=o>.</span><span class=na>java</span><span class=o>:</span><span class=n>115</span><span class=o>)</span>
        <span class=n>at</span> <span class=n>org</span><span class=o>.</span><span class=na>apache</span><span class=o>.</span><span class=na>logging</span><span class=o>.</span><span class=na>log4j</span><span class=o>.</span><span class=na>core</span><span class=o>.</span><span class=na>appender</span><span class=o>.</span><span class=na>OutputStreamManager</span><span class=o>.</span><span class=na>getManager</span><span class=o>(</span><span class=n>OutputStreamManager</span><span class=o>.</span><span class=na>java</span><span class=o>:</span><span class=n>114</span><span class=o>)</span>
        <span class=n>at</span> <span class=n>org</span><span class=o>.</span><span class=na>apache</span><span class=o>.</span><span class=na>logging</span><span class=o>.</span><span class=na>log4j</span><span class=o>.</span><span class=na>core</span><span class=o>.</span><span class=na>appender</span><span class=o>.</span><span class=na>rolling</span><span class=o>.</span><span class=na>RollingFileManager</span><span class=o>.</span><span class=na>getFileManager</span><span class=o>(</span><span class=n>RollingFileManager</span><span class=o>.</span><span class=na>java</span><span class=o>:</span><span class=n>188</span><span class=o>)</span>
        <span class=n>at</span> <span class=o>....</span>
</code></pre></td></tr></table></div></div><p>看起来是因为配置文件里的RollingFile使用到了<code>${ctx:domainId}</code>导致了这个问题。百度了下，发现了log4j2的jira issue：<a href=https://issues.apache.org/jira/browse/LOG4J2-1967 target=_blank rel="noopener noreffer">Unable to invoke factory method in class class org.apache.logging.log4j.core.appender.RollingFileAppender for element RollingFile</a></p><p>该问题和我遇到的一样，而在jira里有comment如下：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-fallback data-lang=fallback>Question: Does system property logfile have a value?
</code></pre></td></tr></table></div></div><p>结合项目的配置文件log4j2.xml:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-xml data-lang=xml><span class=nt>&lt;RollingFile</span> <span class=na>name=</span><span class=s>&#34;logfile&#34;</span> <span class=na>immediateFlush=</span><span class=s>&#34;true&#34;</span> <span class=na>fileName=</span><span class=s>&#34;logs/${ctx:domainId}/CNTCore.log&#34;</span>
    <span class=na>filePattern=</span><span class=s>&#34;logs/${ctx:domainId}/CNTCore.log.%d{yyyy-MM-dd-a}.gz&#34;</span> <span class=na>append=</span><span class=s>&#34;true&#34;</span><span class=nt>&gt;</span>
    <span class=nt>&lt;PatternLayout&gt;</span>
        <span class=nt>&lt;pattern&gt;</span>%d %t %p %X{TracingMsg} %c - %m%n<span class=nt>&lt;/pattern&gt;</span>
    <span class=nt>&lt;/PatternLayout&gt;</span>
    <span class=nt>&lt;Policies&gt;</span>
        <span class=nt>&lt;TimeBasedTriggeringPolicy</span> <span class=na>modulate=</span><span class=s>&#34;true&#34;</span> <span class=na>interval=</span><span class=s>&#34;1&#34;</span> <span class=nt>/&gt;</span>
    <span class=nt>&lt;/Policies&gt;</span>
<span class=nt>&lt;/RollingFile&gt;</span>
</code></pre></td></tr></table></div></div><p>可以看出，这个异常是由于RollingFile使用到了<code>${ctx:domainId}</code>，而该变量值是null，导致无法创建对应的RollingFile文件到磁盘。但是这个domainId是通过ThreadContext把值put进去的，不可能是null，从最终的效果来看，这个变量其实也是拿到了值的，因为对应的日志文件以及存在于磁盘上了。</p><p>既然如此，为什么还会出现这个异常呢？通过观察控制台可以发现，每过一段时间就会出现一次该异常。从异常中可以看到<code>ConfiguratonFileWatcher</code>，好像有些明白为什么了。</p><p>ConfiguratonFileWatcher是用来扫描配置文件是否被改动过的，在配置文件中设置的扫描间隔是30s：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-xml data-lang=xml><span class=nt>&lt;configuration</span> <span class=na>monitorInterval=</span><span class=s>&#34;30&#34;</span><span class=nt>&gt;</span>
    ....
<span class=nt>&lt;/configuration&gt;</span>
</code></pre></td></tr></table></div></div><p>由于扫描文件时另外起一个线程去扫描的，而<code>${ctx:domainId}</code>的值是存放于ThreadContext中的，ThreadContext是线程安全的，同一个key对应的value在不同线程中是不一定相同的。而对于新启动的线程来说，并没有将domainId的值存放进去，于是新线程在扫描配置文件的RollingFile时，自然是无法获取到<code>${ctx:domainId}</code>的值，故而每隔一段时间就会报上边的异常。</p><h2 id=解决方法>解决方法</h2><h3 id=方案一>方案一</h3><p>既然问题是因为扫描配置文件是否改动造成的，那么只要将动态加载的功能关闭就行了，如下：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-xml data-lang=xml><span class=nt>&lt;configuration</span> <span class=na>monitorInterval=</span><span class=s>&#34;0&#34;</span><span class=nt>&gt;</span>
    ....
<span class=nt>&lt;/configuration&gt;</span>
</code></pre></td></tr></table></div></div><h3 id=方案二>方案二</h3><p>如果希望不关闭动态加载配置文件的功能，可以将domainId的值存放到System.properties里：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-java data-lang=java><span class=n>System</span><span class=o>.</span><span class=na>setProperty</span><span class=o>(</span><span class=s>&#34;domainId&#34;</span><span class=o>,</span> <span class=s>&#34;xxx&#34;</span><span class=o>);</span>
</code></pre></td></tr></table></div></div><p>然后通过<code>${sys:xxx}</code>的方式来获取该properties的值：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-xml data-lang=xml><span class=nt>&lt;RollingFile</span> <span class=na>name=</span><span class=s>&#34;logfile&#34;</span> <span class=na>immediateFlush=</span><span class=s>&#34;true&#34;</span> <span class=na>fileName=</span><span class=s>&#34;logs/${sys:domainId}/CNTCore.log&#34;</span>
    <span class=na>filePattern=</span><span class=s>&#34;logs/${sys:domainId}/CNTCore.log.%d{yyyy-MM-dd-a}.gz&#34;</span> <span class=na>append=</span><span class=s>&#34;true&#34;</span><span class=nt>&gt;</span>
    <span class=nt>&lt;PatternLayout&gt;</span>
        <span class=nt>&lt;pattern&gt;</span>%d %t %p %X{TracingMsg} %c - %m%n<span class=nt>&lt;/pattern&gt;</span>
    <span class=nt>&lt;/PatternLayout&gt;</span>
    <span class=nt>&lt;Policies&gt;</span>
        <span class=nt>&lt;TimeBasedTriggeringPolicy</span> <span class=na>modulate=</span><span class=s>&#34;true&#34;</span> <span class=na>interval=</span><span class=s>&#34;1&#34;</span> <span class=nt>/&gt;</span>
    <span class=nt>&lt;/Policies&gt;</span>
<span class=nt>&lt;/RollingFile&gt;</span>
</code></pre></td></tr></table></div></div><p>在log4j2中关于这些变量取值有以下这些种类：</p><table><thead><tr><th>Prefix</th><th>Context</th></tr></thead><tbody><tr><td>bundle</td><td>Resource bundle. The format is ${bundle:BundleName:BundleKey}. The bundle name follows package naming conventions, for example: ${bundle:com.domain.Messages:MyKey}.</td></tr><tr><td>ctx</td><td>Thread Context Map (MDC)</td></tr><tr><td>date</td><td>Inserts the current date and/or time using the specified format</td></tr><tr><td>env</td><td>System environment variables. The formats are ${env:ENV_NAME} and ${env:ENV_NAME:-default_value}.</td></tr><tr><td>jndi</td><td>A value set in the default JNDI Context.</td></tr><tr><td>jvmrunargs</td><td>A JVM input argument accessed through JMX, but not a main argument; see RuntimeMXBean.getInputArguments(). Not available on Android.</td></tr><tr><td>log4j</td><td>Log4j configuration properties. The expressions ${log4j:configLocation} and ${log4j:configParentLocation} respectively provide the absolute path to the log4j configuration file and its parent folder.</td></tr><tr><td>main</td><td>A value set with MapLookup.setMainArguments(String[])</td></tr><tr><td>map</td><td>A value from a MapMessage</td></tr><tr><td>sd</td><td>A value from a StructuredDataMessage. The key &ldquo;id&rdquo; will return the name of the StructuredDataId without the enterprise number. The key &ldquo;type&rdquo; will return the message type. Other keys will retrieve individual elements from the Map.</td></tr><tr><td>sys</td><td>System properties. The formats are ${sys:some.property} and ${sys:some.property:-default_value}.</td></tr></tbody></table><h3 id=方案三>方案三</h3><p>不要在RollingFile的fileName和filePattern属性里使用到<code>${ctx:domainId}</code>等cdn或者mdn的写法，这样会导致在log4j2异步扫描重加载配置文件的时候报错。</p><p>可以使用另一种Appender来实现这种把日志分别打印到不同文件的效果，那就是RoutingAppender。有兴趣的可以去了解下这个RoutingAppender，还是挺有意思的。</p><h2 id=参考链接>参考链接</h2><ul><li><a href=https://issues.apache.org/jira/browse/LOG4J2-1967 target=_blank rel="noopener noreffer">Unable to invoke factory method in class class org.apache.logging.log4j.core.appender.RollingFileAppender for element RollingFile</a></li><li><a href=http://logging.apache.org/log4j/2.x/manual/configuration.html target=_blank rel="noopener noreffer">Property Substitution</a></li></ul><div class="details admonition warning open"><div class="details-summary admonition-title"><i class="icon fas fa-exclamation-triangle fa-fwwarning"></i>警告<i class="details-icon fas fa-angle-right fa-fw"></i></div><div class=details-content><div class=admonition-content>本文最后更新于 <span class=timeago datetime=2019-01-02T22:05:54 title="January 2, 2019">January 2, 2019</span>，文中内容可能已过时，请谨慎使用。</div></div></div><div class=post-reward><input type=checkbox name=reward id=reward hidden>
<label class=reward-button for=reward>赞赏支持</label><div class=qr-code><label class=qr-code-image for=reward><img class=image src=https://cdn.jsdelivr.net/gh/lewky/lewky.github.io@master/images/common/wechat.png>
<span>微信打赏</span></label>
<label class=qr-code-image for=reward><img class=image src=https://cdn.jsdelivr.net/gh/lewky/lewky.github.io@master/images/common/alipay.png>
<span>支付宝打赏</span></label></div></div></div><div class=post-footer id=post-footer><div class=post-info><div class=post-info-line><div class=post-info-mod><span>更新于 2019-01-02</span></div><div class=post-info-license><span><a rel="license external nofollow noopener noreffer" href=https://creativecommons.org/licenses/by-nc/4.0/ target=_blank>CC BY-NC 4.0</a></span></div></div><div class=post-info-line><div class=post-info-md><span><a class=link-to-markdown href=/posts/d8320ac8.html/index.md target=_blank>阅读原始文档</a></span></div><div class=post-info-share><span><a href=javascript:void(0); title="分享到 Twitter" data-sharer=twitter data-url=https://lewky.cn/posts/d8320ac8.html/ data-title="Log4j2异常 - IllegalStateException: No factory method found for class" data-hashtags=Log4j2><i class="fab fa-twitter fa-fw"></i></a><a href=javascript:void(0); title="分享到 Facebook" data-sharer=facebook data-url=https://lewky.cn/posts/d8320ac8.html/ data-hashtag=Log4j2><i class="fab fa-facebook-square fa-fw"></i></a><a href=javascript:void(0); title="分享到 Hacker News" data-sharer=hackernews data-url=https://lewky.cn/posts/d8320ac8.html/ data-title="Log4j2异常 - IllegalStateException: No factory method found for class"><i class="fab fa-hacker-news fa-fw"></i></a><a href=javascript:void(0); title="分享到 Line" data-sharer=line data-url=https://lewky.cn/posts/d8320ac8.html/ data-title="Log4j2异常 - IllegalStateException: No factory method found for class"><i data-svg-src=https://cdn.jsdelivr.net/npm/simple-icons@2.14.0/icons/line.svg></i></a><a href=javascript:void(0); title="分享到 微博" data-sharer=weibo data-url=https://lewky.cn/posts/d8320ac8.html/ data-title="Log4j2异常 - IllegalStateException: No factory method found for class"><i class="fab fa-weibo fa-fw"></i></a></span></div></div></div><div class=post-info-more><section class=post-tags><i class="fas fa-tags fa-fw"></i>&nbsp;<a href=/tags/log4j2/>Log4j2</a></section><section><span><a href=javascript:void(0); onclick=window.history.back();>返回</a></span>&nbsp;|&nbsp;<span><a href=/>主页</a></span></section></div><div class=post-nav><a href=/posts/a5cad454.html/ class=prev rel=prev title="Log4j2异常 - NoSuchMethodError: com.lmax.disruptor.dsl.Disruptor"><i class="fas fa-angle-left fa-fw"></i>Log4j2异常 - NoSuchMethodError: com.lmax.disruptor.dsl.Disruptor</a>
<a href=/posts/8dc44b45.html/ class=next rel=next title="Log4j2 - 动态生成Appender">Log4j2 - 动态生成Appender<i class="fas fa-angle-right fa-fw"></i></a></div></div><div id=comments><div id=waline></div><script src=https://cdn.jsdelivr.net/npm/@waline/client/dist/Waline.min.js></script><script>new Waline({el:'#waline',meta:["nick","mail","link"],placeholder:"提交评论较慢，请等待几秒~",serverURL:"https://comment.lewky.cn/",avatarCDN:"https://sdn.geekzu.org/avatar/",requiredFields:["nick","mail"],pageSize:10,avatar:"retro",lang:"zh-CN",visitor:true,highlight:true,emojiCDN:'https:\/\/cdn.jsdelivr.net\/gh\/lewky\/lewky.github.io@master/images/emoji/',emojiMaps:{"good":"weibo/2018new_good_org.png","no way":"weibo/2018new_kuxiao_org.png","smile":"weibo/2018new_weixioa02_org.png","ok":"weibo/2018new_ok_org.png","laugh and cry":"weibo/2018new_xiaoku_thumb.png","doge":"weibo/2018new_doge02_org.png","whee":"weibo/2018new_xixi_thumb.png","happy":"weibo/2018new_taikaixin_org.png","sweat":"weibo/2018new_han_org.png","cat":"weibo/2018new_miaomiao_thumb.png","dog":"weibo/2018new_erha_org.png","lovely":"weibo/2018new_keai_org.png","QQ-0":"qq/0.gif","QQ-1":"qq/1.gif","QQ-3":"qq/3.gif","QQ-6":"qq/6.gif","QQ-10":"qq/10.gif","QQ-12":"qq/12.gif","QQ-13":"qq/13.gif","QQ-26":"qq/26.gif","QQ-31":"qq/31.gif","QQ-37":"qq/37.gif","QQ-71":"qq/71.gif","QQ-72":"qq/72.gif","QQ-74":"qq/74.gif","QQ-85":"qq/85.gif","QQ-146":"qq/146.gif","QQ-147":"qq/147.gif","QQ-148":"qq/148.gif","QQ-149":"qq/149.gif","QQ-150":"qq/150.gif","QQ-151":"qq/151.gif","QQ-152":"qq/152.gif","QQ-153":"qq/153.gif","QQ-154":"qq/154.gif","QQ-155":"qq/155.gif","QQ-172":"qq/172.gif","QQ-207":"qq/207.gif","QQ-jin_li":"qq/jin_li.gif","QQ-zheng_yan":"qq/zheng_yan.gif","aru-1":"aru/1.png","aru-22":"aru/22.png","aru-45":"aru/45.png","aru-47":"aru/47.png","aru-52":"aru/52.png","aru-53":"aru/53.png","aru-54":"aru/54.png","aru-55":"aru/55.png","aru-56":"aru/56.png","aru-57":"aru/57.png","aru-58":"aru/58.png","aru-61":"aru/61.png","aru-100":"aru/100.png","aru-101":"aru/101.png","aru-103":"aru/103.png","aru-104":"aru/104.png","aru-107":"aru/107.png","aru-108":"aru/108.png","aru-110":"aru/110.png","aru-112":"aru/112.png","aru-122":"aru/122.png","aru-123":"aru/123.png","aru-134":"aru/134.png","aru-135":"aru/135.png","aru-144":"aru/144.png","aru-150":"aru/150.png","aru-151":"aru/151.png","aru-152":"aru/152.png","aru-153":"aru/153.png","aru-155":"aru/155.png","aru-156":"aru/156.png","aru-160":"aru/160.png","aru-162":"aru/162.png","aru-164":"aru/164.png","aru-166":"aru/166.png","aru-167":"aru/167.png","aru-168":"aru/168.png","aru-170":"aru/170.png","aru-171":"aru/171.png","aru-172":"aru/172.png","aru-173":"aru/173.png","aru-174":"aru/174.png","aru-175":"aru/175.png","aru-176":"aru/176.png","aru-178":"aru/178.png","aru-213":"aru/213.png","aru-240":"aru/240.png","aru-241":"aru/241.png","aru-249":"aru/249.png","aru-257":"aru/257.png","aru-258":"aru/258.png","aru-259":"aru/259.png","aru-265":"aru/265.png","aru-266":"aru/266.png","aru-267":"aru/267.png","aru-285":"aru/285.png","aru-286":"aru/286.png","aru-287":"aru/287.png","aru-288":"aru/288.png","aru-295":"aru/295.png","aru-296":"aru/296.png","aru-297":"aru/297.png","aru-298":"aru/298.png","aru-299":"aru/299.png","aru-300":"aru/300.png","aru-301":"aru/301.png","aru-302":"aru/302.png","aru-303":"aru/303.png","aru-304":"aru/304.png","aru-305":"aru/305.png","aru-306":"aru/306.png","bilibili_2233-卖萌":"bilibili_2233/卖萌.png","bilibili_2233-吃惊":"bilibili_2233/吃惊.png","bilibili_2233-吐魂":"bilibili_2233/吐魂.png","bilibili_2233-喝水":"bilibili_2233/喝水.png","bilibili_2233-困惑":"bilibili_2233/困惑.png","bilibili_2233-大哭":"bilibili_2233/大哭.png","bilibili_2233-大笑":"bilibili_2233/大笑.png","bilibili_2233-委屈":"bilibili_2233/委屈.png","bilibili_2233-怒":"bilibili_2233/怒.png","bilibili_2233-无言":"bilibili_2233/无言.png","bilibili_2233-汗":"bilibili_2233/汗.png","bilibili_2233-疑问":"bilibili_2233/疑问.png","bilibili_2233-第一":"bilibili_2233/第一.png","bilibili_2233-耶":"bilibili_2233/耶.png","bilibili_2233-郁闷":"bilibili_2233/郁闷.png","bilibili_tv_gif-doge":"bilibili_tv_gif/doge.gif","bilibili_tv_gif-亲亲":"bilibili_tv_gif/亲亲.gif","bilibili_tv_gif-偷笑":"bilibili_tv_gif/偷笑.gif","bilibili_tv_gif-再见":"bilibili_tv_gif/再见.gif","bilibili_tv_gif-发怒":"bilibili_tv_gif/发怒.gif","bilibili_tv_gif-发财":"bilibili_tv_gif/发财.gif","bilibili_tv_gif-可爱":"bilibili_tv_gif/可爱.gif","bilibili_tv_gif-吐血":"bilibili_tv_gif/吐血.gif","bilibili_tv_gif-呆":"bilibili_tv_gif/呆.gif","bilibili_tv_gif-呕吐":"bilibili_tv_gif/呕吐.gif","bilibili_tv_gif-困":"bilibili_tv_gif/困.gif","bilibili_tv_gif-坏笑":"bilibili_tv_gif/坏笑.gif","bilibili_tv_gif-大佬":"bilibili_tv_gif/大佬.gif","bilibili_tv_gif-大哭":"bilibili_tv_gif/大哭.gif","bilibili_tv_gif-委屈":"bilibili_tv_gif/委屈.gif","bilibili_tv_gif-害羞":"bilibili_tv_gif/害羞.gif","bilibili_tv_gif-尴尬":"bilibili_tv_gif/尴尬.gif","bilibili_tv_gif-微笑":"bilibili_tv_gif/微笑.gif","bilibili_tv_gif-思考":"bilibili_tv_gif/思考.gif","bilibili_tv_gif-惊吓":"bilibili_tv_gif/惊吓.gif","bilibili_tv_gif-打脸":"bilibili_tv_gif/打脸.gif","bilibili_tv_gif-抓狂":"bilibili_tv_gif/抓狂.gif","bilibili_tv_gif-抠鼻子":"bilibili_tv_gif/抠鼻子.gif","bilibili_tv_gif-斜眼笑":"bilibili_tv_gif/斜眼笑.gif","bilibili_tv_gif-无奈":"bilibili_tv_gif/无奈.gif","bilibili_tv_gif-晕":"bilibili_tv_gif/晕.gif","bilibili_tv_gif-流汗":"bilibili_tv_gif/流汗.gif","bilibili_tv_gif-流鼻血":"bilibili_tv_gif/流鼻血.gif","bilibili_tv_gif-点赞":"bilibili_tv_gif/点赞.gif","bilibili_tv_gif-生气":"bilibili_tv_gif/生气.gif","bilibili_tv_gif-生病":"bilibili_tv_gif/生病.gif","bilibili_tv_gif-疑问":"bilibili_tv_gif/疑问.gif","bilibili_tv_gif-白眼":"bilibili_tv_gif/白眼.gif","bilibili_tv_gif-睡着":"bilibili_tv_gif/睡着.gif","bilibili_tv_gif-笑哭":"bilibili_tv_gif/笑哭.gif","bilibili_tv_gif-腼腆":"bilibili_tv_gif/腼腆.gif","bilibili_tv_gif-色":"bilibili_tv_gif/色.gif","bilibili_tv_gif-调皮":"bilibili_tv_gif/调皮.gif","bilibili_tv_gif-鄙视":"bilibili_tv_gif/鄙视.gif","bilibili_tv_gif-闭嘴":"bilibili_tv_gif/闭嘴.gif","bilibili_tv_gif-难过":"bilibili_tv_gif/难过.gif","bilibili_tv_gif-馋":"bilibili_tv_gif/馋.gif","bilibili_tv_gif-黑人问号":"bilibili_tv_gif/黑人问号.gif","bilibili_tv_gif-鼓掌":"bilibili_tv_gif/鼓掌.gif","滑稽-001":"滑稽/001.jpg","滑稽-002":"滑稽/002.jpg","滑稽-003":"滑稽/003.jpg","滑稽-004":"滑稽/004.jpg","滑稽-005":"滑稽/005.jpg","滑稽-006":"滑稽/006.jpg","滑稽-007":"滑稽/007.jpg","滑稽-008":"滑稽/008.jpg","滑稽-009":"滑稽/009.jpg","滑稽-010":"滑稽/010.jpg","滑稽-011":"滑稽/011.jpg","滑稽-012":"滑稽/012.jpg","滑稽-013":"滑稽/013.jpg","滑稽-014":"滑稽/014.jpg","滑稽-015":"滑稽/015.jpg","滑稽-016":"滑稽/016.jpg","滑稽-017":"滑稽/017.jpg","滑稽-018":"滑稽/018.jpg","滑稽-019":"滑稽/019.jpg","滑稽-020":"滑稽/020.jpg","滑稽-021":"滑稽/021.jpg","滑稽-022":"滑稽/022.jpg","滑稽-023":"滑稽/023.jpg","滑稽-024":"滑稽/024.jpg","滑稽-025":"滑稽/025.jpg","滑稽-026":"滑稽/026.jpg","滑稽-027":"滑稽/027.jpg","滑稽-028":"滑稽/028.jpg","滑稽-029":"滑稽/029.jpg","滑稽-030":"滑稽/030.jpg","滑稽-031":"滑稽/031.jpg","滑稽-032":"滑稽/032.jpg","滑稽-033":"滑稽/033.jpg","滑稽-034":"滑稽/034.jpg","滑稽-035":"滑稽/035.jpg","滑稽-036":"滑稽/036.jpg","滑稽-037":"滑稽/037.jpg","滑稽-038":"滑稽/038.jpg","滑稽-039":"滑稽/039.jpg","滑稽-040":"滑稽/040.jpg","滑稽-041":"滑稽/041.jpg","滑稽-042":"滑稽/042.jpg","滑稽-043":"滑稽/043.jpg","滑稽-044":"滑稽/044.jpg","滑稽-045":"滑稽/045.jpg","滑稽-046":"滑稽/046.jpg","滑稽-047":"滑稽/047.jpg","default-01":"default/01.webp","default-010":"default/010.webp","default-011":"default/011.webp","default-012":"default/012.webp","default-013":"default/013.webp","default-014":"default/014.webp","default-016":"default/016.webp","default-017":"default/017.webp","default-018":"default/018.jpg","default-019":"default/019.webp","default-02":"default/02.webp","default-020":"default/020.webp","default-021":"default/021.webp","default-022":"default/022.webp","default-023":"default/023.webp","default-024":"default/024.webp","default-025":"default/025.jpg","default-026":"default/026.webp","default-027":"default/027.webp","default-028":"default/028.webp","default-029":"default/029.webp","default-03":"default/03.jpg","default-030":"default/030.gif","default-031":"default/031.webp","default-04":"default/04.jpg","default-05":"default/05.gif","default-06":"default/06.gif","default-07":"default/07.webp","default-08":"default/08.webp","default-09":"default/09.webp"}});</script></div></article></div></main><footer class=footer><div class=footer-container><div class=footer-line><span id=run-time></span></div><div class=footer-line><i class="far fa-copyright fa-fw"></i><span itemprop=copyrightYear>2018 - 2021</span><span class=author itemprop=copyrightHolder>&nbsp;<a href=/ target=_blank>雨临Lewis</a></span>&nbsp;|&nbsp;<span class=license><a rel="license external nofollow noopener noreffer" href=https://creativecommons.org/licenses/by-nc/4.0/ target=_blank>CC BY-NC 4.0</a></span><span class=icp-splitter>&nbsp;|&nbsp;</span><br class=icp-br><span class=icp><a target=_blank href=http://www.beian.miit.gov.cn/ style=font-weight:700>粤ICP备19103822</a></span></div></div></footer></div><div id=fixed-buttons><a href=# id=back-to-top class=fixed-button title=回到顶部><i class="fas fa-arrow-up fa-fw"></i></a><a href=# id=view-comments class=fixed-button title=查看评论><i class="fas fa-comment fa-fw"></i></a></div><div class=sidebar_wo><div id=leimu><img src=https://cdn.jsdelivr.net/gh/lewky/lewky.github.io@master/images/b2t/leimuA.png alt=雷姆 onmouseover="this.src='https:\/\/cdn.jsdelivr.net\/gh\/lewky\/lewky.github.io@master/images/b2t/leimuB.png'" onmouseout="this.src='https:\/\/cdn.jsdelivr.net\/gh\/lewky\/lewky.github.io@master/images/b2t/leimuA.png'" title=回到顶部></div><div class=sidebar_wo id=lamu><img src=https://cdn.jsdelivr.net/gh/lewky/lewky.github.io@master/images/b2t/lamuA.png alt=雷姆 onmouseover="this.src='https:\/\/cdn.jsdelivr.net\/gh\/lewky\/lewky.github.io@master/images/b2t/lamuB.png'" onmouseout="this.src='https:\/\/cdn.jsdelivr.net\/gh\/lewky\/lewky.github.io@master/images/b2t/lamuA.png'" title=回到底部></div></div><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/lightgallery.js@1.2.0/dist/css/lightgallery.min.css><script type=text/javascript src=https://cdn.jsdelivr.net/npm/smooth-scroll@16.1.3/dist/smooth-scroll.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/lazysizes@5.2.2/lazysizes.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/lightgallery.js@1.2.0/dist/js/lightgallery.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/lg-thumbnail.js@1.2.0/dist/lg-thumbnail.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/lg-zoom.js@1.2.0/dist/lg-zoom.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/clipboard@2.0.6/dist/clipboard.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/sharer.js@0.4.0/sharer.min.js></script><script type=text/javascript>window.config={"code":{"copyTitle":"复制到剪贴板","maxShownLines":15},"comment":{},"lightGallery":{"actualSize":false,"exThumbImage":"data-thumbnail","hideBarsDelay":2000,"selector":".lightgallery","speed":400,"thumbContHeight":80,"thumbWidth":80,"thumbnail":true}};</script><script type=text/javascript src=/js/theme.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/jquery@2.1.3/dist/jquery.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/jquery-backstretch@2.1.18/jquery.backstretch.min.js></script><script>$(function(){$(".site-avatar-plug-bilibili").attr("src","https:\/\/cdn.jsdelivr.net\/gh\/lewky\/lewky.github.io@master/images/avatar-plug/bilibili_"+(~~(128*Math.random())+1)+".png");});var avatar_plug=0;var avatar_click=1;jQuery(document).ready(function($){var frequency=1;var plug_count=128;$("div.home-avatar a").click(function(e){if(avatar_click%frequency===0){avatar_plug++;$(".site-avatar-plug-bilibili").attr("src","https:\/\/cdn.jsdelivr.net\/gh\/lewky\/lewky.github.io@master/images/avatar-plug/bilibili_"+avatar_plug+".png");}
if(avatar_plug===plug_count){avatar_plug=0;}
$("div.home-avatar a").attr("alt","再点击"+(frequency-avatar_click%frequency)+"次头像试试看~~");avatar_click++;});});</script><script>var $cdnPrefix="https://cdn.jsdelivr.net/gh/lewky/lewky.github.io@master";</script><script type=text/javascript src=/js/custom.js></script><script>var _hmt=_hmt||[];(function(){var hm=document.createElement("script");hm.src="https://hm.baidu.com/hm.js?6f278ed0fdb01edb3b1e7398379e5432";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(hm,s);})();</script><div class="GalMenu GalDropDown"><div class=circle id=gal><div class=ring><a href=/ target=_blank style=background-image:url(https://cdn.jsdelivr.net/gh/lewky/lewky.github.io@master/images/rightmenu/rightmenu1.jpg) class=menuItem>首页</a><a href=/funny/mikutap/ target=_blank style=background-image:url(https://cdn.jsdelivr.net/gh/lewky/lewky.github.io@master/images/rightmenu/rightmenu2.jpg) class=menuItem>音乐游戏</a><a href=/funny/high/ target=_blank style=background-image:url(https://cdn.jsdelivr.net/gh/lewky/lewky.github.io@master/images/rightmenu/rightmenu3.jpg) class=menuItem>前方高能</a><a href=/posts/e62c38c4.html target=_blank style=background-image:url(https://cdn.jsdelivr.net/gh/lewky/lewky.github.io@master/images/rightmenu/rightmenu4.jpg) class=menuItem>建站日志</a><a href=/posts/d65a1577.html target=_blank style=background-image:url(https://cdn.jsdelivr.net/gh/lewky/lewky.github.io@master/images/rightmenu/rightmenu5.jpg) class=menuItem>随笔</a><a href=/friends/ target=_blank style=background-image:url(https://cdn.jsdelivr.net/gh/lewky/lewky.github.io@master/images/rightmenu/rightmenu6.jpg) class=menuItem>友链</a></div></div></div><script type=text/javascript>var items=document.querySelectorAll('.menuItem');for(var i=0,l=items.length;i<l;i++){items[i].style.left=(50-35*Math.cos(-0.5*Math.PI-2*(1/l)*i*Math.PI)).toFixed(4)+"%";items[i].style.top=(50+35*Math.sin(-0.5*Math.PI-2*(1/l)*i*Math.PI)).toFixed(4)+"%"}</script><link rel=stylesheet href=https://cdn.jsdelivr.net/gh/lewky/lewky.github.io@master/css/GalMenu.css><script type=text/javascript src=https://cdn.jsdelivr.net/gh/lewky/lewky.github.io@master/js/GalMenu.js></script><script type=text/javascript>$(document).ready(function(){$('body').GalMenu({'menu':'GalDropDown'})});</script></body></html>