<!doctype html><html><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="noodp"><meta http-equiv=x-ua-compatible content="IE=edge, chrome=1"><title>Javaé«˜å¹¶å‘ç§’æ€API(ä¸€)ä¹‹ä¸šåŠ¡åˆ†æä¸DAOå±‚ - Yulin Lewis' Blog</title><meta name=keywords content="é›¨ä¸´Lewis,Java,hugo,hexo,åšå®¢"><meta name=Description content="ä¸æƒ³å½“å†™æ‰‹çš„ç å†œä¸æ˜¯å¥½å’¸é±¼_(xĞ·ã€âˆ )_"><meta property="og:title" content="Javaé«˜å¹¶å‘ç§’æ€API(ä¸€)ä¹‹ä¸šåŠ¡åˆ†æä¸DAOå±‚"><meta property="og:description" content="æœ¬SSMå®æˆ˜é¡¹ç›®ä½¿ç”¨äº†Mavenè¿›è¡Œä¾èµ–ç®¡ç†ï¼Œå¦‚æœæœ‰ä¸æ¸…æ¥šMavenæ˜¯ä»€ä¹ˆçš„å¯ä»¥å‚è€ƒè¿™ç¯‡æ–‡ç« 

1. åˆ›å»ºMavené¡¹ç›®å’Œä¾èµ–
1.1 åˆ›å»ºé¡¹ç›®å‰éœ€è¦å…ˆå®‰è£…Mavenï¼Œå¹¶è®¾ç½®å¥½ç¯å¢ƒå˜é‡

Mavenä¸‹è½½
è®¾ç½®ç¯å¢ƒå˜é‡"><meta property="og:type" content="article"><meta property="og:url" content="https://lewky.cn/posts/56225.html/"><meta property="og:image" content="https://lewky.cn/logo.png"><meta property="article:published_time" content="2017-10-04T23:57:03+08:00"><meta property="article:modified_time" content="2017-10-04T23:57:03+08:00"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://lewky.cn/logo.png"><meta name=twitter:title content="Javaé«˜å¹¶å‘ç§’æ€API(ä¸€)ä¹‹ä¸šåŠ¡åˆ†æä¸DAOå±‚"><meta name=twitter:description content="æœ¬SSMå®æˆ˜é¡¹ç›®ä½¿ç”¨äº†Mavenè¿›è¡Œä¾èµ–ç®¡ç†ï¼Œå¦‚æœæœ‰ä¸æ¸…æ¥šMavenæ˜¯ä»€ä¹ˆçš„å¯ä»¥å‚è€ƒè¿™ç¯‡æ–‡ç« 

1. åˆ›å»ºMavené¡¹ç›®å’Œä¾èµ–
1.1 åˆ›å»ºé¡¹ç›®å‰éœ€è¦å…ˆå®‰è£…Mavenï¼Œå¹¶è®¾ç½®å¥½ç¯å¢ƒå˜é‡

Mavenä¸‹è½½
è®¾ç½®ç¯å¢ƒå˜é‡"><meta name=application-name content="é›¨ä¸´Lewisçš„åšå®¢"><meta name=apple-mobile-web-app-title content="é›¨ä¸´Lewisçš„åšå®¢"><meta name=theme-color content="#ffffff"><meta name=msapplication-TileColor content="#da532c"><link rel="shortcut icon" type=image/x-icon href=/favicon.ico><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><link rel=canonical href=https://lewky.cn/posts/56225.html/><link rel=prev href=https://lewky.cn/posts/65067.html/><link rel=next href=https://lewky.cn/posts/18357.html/><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/normalize.css@8.0.1/normalize.min.css><link rel=stylesheet href=/css/style.min.css><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.13.0/css/all.min.css><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/animate.css@3.7.2/animate.min.css><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"Javaé«˜å¹¶å‘ç§’æ€API(ä¸€)ä¹‹ä¸šåŠ¡åˆ†æä¸DAOå±‚","inLanguage":"","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/lewky.cn\/posts\/56225.html\/"},"genre":"posts","keywords":"é¡¹ç›®ç¬”è®°, SSMå®æˆ˜é¡¹ç›®, ç§’æ€","wordcount":9847,"url":"https:\/\/lewky.cn\/posts\/56225.html\/","datePublished":"2017-10-04T23:57:03+08:00","dateModified":"2017-10-04T23:57:03+08:00","license":"This work is licensed under a Creative Commons Attribution-NonCommercial 4.0 International License.","publisher":{"@type":"Organization","name":"é›¨ä¸´Lewis","logo":"https:\/\/lewky.cn\/images\/avatar.jpg"},"author":{"@type":"Person","name":"é›¨ä¸´Lewis"},"description":""}</script></head><body header-desktop=fixed header-mobile=auto><script type=text/javascript>(window.localStorage&&localStorage.getItem('theme')?localStorage.getItem('theme')==='dark':('auto'==='auto'?window.matchMedia('(prefers-color-scheme: dark)').matches:'auto'==='dark'))&&document.body.setAttribute('theme','dark');</script><div id=mask></div><div class=wrapper><header class=desktop id=header-desktop><div class=header-wrapper><a href=https://github.com/lewky class=github-corner target=_blank title="Follow me on GitHub" aria-label="Follow me on GitHub"><svg width="3.5rem" height="3.5rem" viewBox="0 0 250 250" style="fill:#70b7fd;color:#fff;position:absolute;top:0;border:0;left:0;transform:scale(-1,1)" aria-hidden="true"><path d="M0 0 115 115h15l12 27L250 250V0z"/><path d="M128.3 109C113.8 99.7 119 89.6 119 89.6 122 82.7 120.5 78.6 120.5 78.6 119.2 72 123.4 76.3 123.4 76.3 127.3 80.9 125.5 87.3 125.5 87.3 122.9 97.6 130.6 101.9 134.4 103.2" fill="currentcolor" style="transform-origin:130px 106px" class="octo-arm"/><path d="M115 115C114.9 115.1 118.7 116.5 119.8 115.4L133.7 101.6C136.9 99.2 139.9 98.4 142.2 98.6 133.8 88 127.5 74.4 143.8 58 148.5 53.4 154 51.2 159.7 51 160.3 49.4 163.2 43.6 171.4 40.1 171.4 40.1 176.1 42.5 178.8 56.2 183.1 58.6 187.2 61.8 190.9 65.4 194.5 69 197.7 73.2 200.1 77.6 213.8 80.2 216.3 84.9 216.3 84.9 212.7 93.1 206.9 96 205.4 96.6 205.1 102.4 203 107.8 198.3 112.5 181.9 128.9 168.3 122.5 157.7 114.1 157.9 116.9 156.7 120.9 152.7 124.9L141 136.5C139.8 137.7 141.6 141.9 141.8 141.8z" fill="currentcolor" class="octo-body"/></svg></a><div class=header-title><a href=/ title="Yulin Lewis' Blog"><span class=header-title-pre><i class="fas fa-fw fa-atom"></i></span>é›¨ä¸´Lewis</a></div><div class=menu><div class=menu-inner><a class=menu-item href=/posts/><i class="fas fa-fw fa-archive"></i>å½’æ¡£ </a><a class=menu-item href=/tags/><i class="fas fa-fw fa-tag"></i>æ ‡ç­¾ </a><a class=menu-item href=/categories/><i class="fas fa-fw fa-th"></i>åˆ†ç±» </a><a class=menu-item href=/about/><i class="fas fa-fw fa-at"></i>å…³äº </a><a class=menu-item href=/friends/><i class="fas fa-fw fa-fan fa-spin"></i>å‹é“¾ </a><a class=menu-item href=/search/><i class="fas fa-fw fa-search"></i>æœç´¢ </a><span class="menu-item delimiter"></span><a href=javascript:void(0); class="menu-item theme-switch" title=åˆ‡æ¢ä¸»é¢˜><i class="fas fa-adjust fa-fw"></i></a></div></div></div></header><header class=mobile id=header-mobile><div class=header-container><div class=header-wrapper><div class=header-title><a href=/ title="Yulin Lewis' Blog"><span class=header-title-pre><i class="fas fa-fw fa-atom"></i></span>é›¨ä¸´Lewis</a></div><div class=menu-toggle id=menu-toggle-mobile><span></span><span></span><span></span></div></div><div class=menu id=menu-mobile><a class=menu-item href=/posts/><i class="fas fa-fw fa-archive"></i>å½’æ¡£</a><a class=menu-item href=/tags/><i class="fas fa-fw fa-tag"></i>æ ‡ç­¾</a><a class=menu-item href=/categories/><i class="fas fa-fw fa-th"></i>åˆ†ç±»</a><a class=menu-item href=/about/><i class="fas fa-fw fa-at"></i>å…³äº</a><a class=menu-item href=/friends/><i class="fas fa-fw fa-fan fa-spin"></i>å‹é“¾</a><a class=menu-item href=/search/><i class="fas fa-fw fa-search"></i>æœç´¢</a><a href=javascript:void(0); class="menu-item theme-switch" title=åˆ‡æ¢ä¸»é¢˜>
<i class="fas fa-adjust fa-fw"></i></a></div></div></header><div class="search-dropdown desktop"><div id=search-dropdown-desktop></div></div><div class="search-dropdown mobile"><div id=search-dropdown-mobile></div></div><main class=main><div class=container><article class="page single"><h1 class="single-title animated flipInX">Javaé«˜å¹¶å‘ç§’æ€API(ä¸€)ä¹‹ä¸šåŠ¡åˆ†æä¸DAOå±‚</h1><div class=post-meta><div class=post-meta-line><span class=post-author><a href=/ title=Author rel=author class=author><i class="fas fa-user-circle fa-fw"></i>é›¨ä¸´Lewis</a></span>&nbsp;<span class=post-category>æ”¶å½•äº <a href=/categories/seckill/><i class="far fa-folder fa-fw"></i>seckill</a></span></div><div class=post-meta-line><i class="far fa-calendar-alt fa-fw"></i>&nbsp;<time datetime=2017-10-04>2017-10-04</time>&nbsp;<i class="fas fa-pencil-alt fa-fw"></i>&nbsp;çº¦ 9847 å­—&nbsp;
<i class="far fa-clock fa-fw"></i>&nbsp;é¢„è®¡é˜…è¯» 20 åˆ†é’Ÿ&nbsp;<span id=/posts/56225.html/ class=leancloud_visitors data-flag-title=Javaé«˜å¹¶å‘ç§’æ€API(ä¸€)ä¹‹ä¸šåŠ¡åˆ†æä¸DAOå±‚>
<i class="far fa-eye fa-fw"></i>&nbsp;<span class=leancloud-visitors-count></span>&nbsp;æ¬¡é˜…è¯»
</span>&nbsp;</div></div><div class=content id=content><blockquote><p>æœ¬SSMå®æˆ˜é¡¹ç›®ä½¿ç”¨äº†Mavenè¿›è¡Œä¾èµ–ç®¡ç†ï¼Œå¦‚æœæœ‰ä¸æ¸…æ¥šMavenæ˜¯ä»€ä¹ˆçš„å¯ä»¥å‚è€ƒ<a href=http://blog.csdn.net/lewky_liu/article/details/78138381 target=_blank rel="noopener noreffer">è¿™ç¯‡æ–‡ç« </a></p></blockquote><h2 id=1-åˆ›å»ºmavené¡¹ç›®å’Œä¾èµ–>1. åˆ›å»ºMavené¡¹ç›®å’Œä¾èµ–</h2><h3 id=11-åˆ›å»ºé¡¹ç›®å‰éœ€è¦å…ˆå®‰è£…mavenå¹¶è®¾ç½®å¥½ç¯å¢ƒå˜é‡>1.1 åˆ›å»ºé¡¹ç›®å‰éœ€è¦å…ˆå®‰è£…Mavenï¼Œå¹¶è®¾ç½®å¥½ç¯å¢ƒå˜é‡</h3><ul><li><a href=http://download.csdn.net/download/lewky_liu/10000144 target=_blank rel="noopener noreffer">Mavenä¸‹è½½</a></li><li>è®¾ç½®ç¯å¢ƒå˜é‡</li></ul><ul><li>æ–°å»ºå˜é‡<code>MAVEN_HOME</code>ï¼Œå€¼ä¸ºMavençš„ç›®å½•<code>X:\XXX\apache-maven-XXX</code><ul><li>å°†<code>%MAVEN_HOME%\bin</code>æ·»åŠ åˆ°<code>Path</code>å˜é‡ä¸‹</li></ul></li><li>è¿è¡ŒCMDï¼Œè¾“å…¥<code>mvn -v</code>åå¯ä»¥çœ‹åˆ°Mavençš„ç‰ˆæœ¬ä¿¡æ¯ç­‰åˆ™è¡¨ç¤ºå®‰è£…æˆåŠŸ</li></ul><h3 id=12-åˆ›å»ºmavené¡¹ç›®æœ‰ä¸¤ç§æ–¹å¼å¦‚ä¸‹>1.2 åˆ›å»ºMavené¡¹ç›®æœ‰ä¸¤ç§æ–¹å¼ï¼Œå¦‚ä¸‹</h3><p><strong>ç¬¬ä¸€ç§åˆ›å»ºæ–¹å¼ï¼šä½¿ç”¨å‘½ä»¤è¡Œæ‰‹åŠ¨åˆ›å»º</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash>mvn archetype:generate -DgroupId<span class=o>=</span>com.lewis.seckill -DartifactId<span class=o>=</span>seckill -Dpackage<span class=o>=</span>com.lewis.seckill -Dversion<span class=o>=</span>1.0-SNAPSHOT -DarchetypeArtifactId<span class=o>=</span>maven-archetype-webapp
</code></pre></td></tr></table></div></div><p>åœ¨è§†é¢‘ä¸­ä½¿ç”¨çš„æ˜¯<code>archetype:create</code>ï¼Œè¯¥æ–¹æ³•å·²è¢«åºŸå¼ƒï¼Œè¯·ä½¿ç”¨<code>archetype:generate</code>æ¥åˆ›å»ºã€‚å‘½ä»¤è¡Œæ‰§è¡Œåä¼šåˆ›å»ºä¸€ä¸ª<code>maven-archetype-webapp</code>éª¨æ¶çš„Mavené¡¹ç›®ï¼Œå…¶ä¸­<code>groupId</code>æ˜¯é¡¹ç›®ç»„ç»‡å”¯ä¸€çš„æ ‡è¯†ç¬¦ï¼Œå®é™…å¯¹åº”JAVAçš„åŒ…çš„ç»“æ„ï¼›<code>artifactId</code>æ˜¯é¡¹ç›®çš„å”¯ä¸€çš„æ ‡è¯†ç¬¦ï¼Œå®é™…å¯¹åº”é¡¹ç›®çš„åç§°ï¼›<code>package</code>ä¸€èˆ¬æ˜¯<code>groupId</code>+<code>artifactId</code>ï¼Œæ˜¯è‡ªåŠ¨ç”Ÿæˆçš„ï¼Œå¯ä»¥ä¿®æ”¹</p><p><strong>ç¬¬äºŒç§åˆ›å»ºæ–¹å¼ï¼šå€ŸåŠ©IDEå·¥å…·çš„Mavenæ’ä»¶æ¥åˆ›å»ºé¡¹ç›®</strong></p><blockquote><p>Eclipseå®‰è£…Mavenæ’ä»¶</p></blockquote><ul><li>ä¸çŸ¥é“æ€ä¹ˆMavenæ’ä»¶çš„è¯·å‚è€ƒ<a href=http://blog.csdn.net/wode_dream/article/details/38052639 target=_blank rel="noopener noreffer">è¯¥åšæ–‡</a>ï¼Œæ¨èä½¿ç”¨linkæ–¹å¼æ‰‹å·¥å®‰è£…çš„æ–¹å¼<ul><li>å¦‚æœæ˜¯æ‰‹å·¥å®‰è£…Mavenæ’ä»¶çš„ï¼Œå¯èƒ½ä¼šç¼ºå°‘pom.xml å›¾å½¢åŒ–ç¼–è¾‘å·¥å…·ï¼Œè¯·å¦å¤–æ·»åŠ è¿›å»ï¼Œå…·ä½“æƒ…å†µè¯·å‚è€ƒ<a href=http://www.micmiu.com/software/build/eclipse-m2e-plugins/ target=_blank rel="noopener noreffer">è¯¥åšæ–‡</a></li><li>å·²ç»å®‰è£…äº†Mavenæ’ä»¶çš„è¯·èµ°ä¸‹ä¸€ä¸ªæ­¥éª¤</li></ul></li><li><code>File</code>â†’<code>New</code>â†’<code>Other...</code>â†’<code>Maven Project</code>â†’<code>Next</code>,è¿›å…¥å¦‚ä¸‹ç•Œé¢</li></ul><p><figure><a class=lightgallery href=https://cdn.jsdelivr.net/gh/lewky/lewky.github.io@master/images/posts/project/seckill/Maven1.jpg title=Maven1 data-thumbnail=https://cdn.jsdelivr.net/gh/lewky/lewky.github.io@master/images/posts/project/seckill/Maven1.jpg data-sub-html="<h2> </h2><p>Maven1</p>"><img class=lazyload src=/svg/loading.min.svg data-src=https://cdn.jsdelivr.net/gh/lewky/lewky.github.io@master/images/posts/project/seckill/Maven1.jpg data-srcset="https://cdn.jsdelivr.net/gh/lewky/lewky.github.io@master/images/posts/project/seckill/Maven1.jpg, https://cdn.jsdelivr.net/gh/lewky/lewky.github.io@master/images/posts/project/seckill/Maven1.jpg 1.5x, https://cdn.jsdelivr.net/gh/lewky/lewky.github.io@master/images/posts/project/seckill/Maven1.jpg 2x" data-sizes=auto alt=https://cdn.jsdelivr.net/gh/lewky/lewky.github.io@master/images/posts/project/seckill/Maven1.jpg></a><figcaption class=image-caption>Maven1</figcaption></figure></p><ul><li>ç‚¹å‡»<code>Next</code>ï¼Œé€‰æ‹©è¦æ„å»ºçš„éª¨æ¶<code>maven-archetype-webapp</code>ï¼Œå¦‚ä¸‹å›¾</li></ul><p><figure><a class=lightgallery href=https://cdn.jsdelivr.net/gh/lewky/lewky.github.io@master/images/posts/project/seckill/Maven2.jpg title=Maven2 data-thumbnail=https://cdn.jsdelivr.net/gh/lewky/lewky.github.io@master/images/posts/project/seckill/Maven2.jpg data-sub-html="<h2> </h2><p>Maven2</p>"><img class=lazyload src=/svg/loading.min.svg data-src=https://cdn.jsdelivr.net/gh/lewky/lewky.github.io@master/images/posts/project/seckill/Maven2.jpg data-srcset="https://cdn.jsdelivr.net/gh/lewky/lewky.github.io@master/images/posts/project/seckill/Maven2.jpg, https://cdn.jsdelivr.net/gh/lewky/lewky.github.io@master/images/posts/project/seckill/Maven2.jpg 1.5x, https://cdn.jsdelivr.net/gh/lewky/lewky.github.io@master/images/posts/project/seckill/Maven2.jpg 2x" data-sizes=auto alt=https://cdn.jsdelivr.net/gh/lewky/lewky.github.io@master/images/posts/project/seckill/Maven2.jpg></a><figcaption class=image-caption>Maven2</figcaption></figure></p><ul><li>ç‚¹å‡»<code>Next</code>ï¼Œå¡«å†™<code>groupId=com.lewis.seckill</code>ï¼Œ<code>DartifactId=seckill</code>ï¼Œ<code>package=com.lewis.seckill</code>ï¼ˆæ ¹æ®å®é™…æƒ…å†µå¡«å†™ï¼‰ï¼Œç„¶å<code>Finish</code></li></ul><blockquote><p>å¦‚æœæ˜¯ç¬¬ä¸€æ¬¡ä½¿ç”¨Eclipseçš„Mavenæ’ä»¶æ¥åˆ›å»ºMavené¡¹ç›®çš„å¯èƒ½ä¼šé‡åˆ°ä¸€äº›é—®é¢˜ï¼Œå¯ä»¥å‚è€ƒ<a href=http://blog.csdn.net/lewky_liu/article/details/78138381 target=_blank rel="noopener noreffer">è¯¥åšæ–‡</a></p></blockquote><h3 id=13-ä¿®æ”¹pomxmlæ–‡ä»¶>1.3 ä¿®æ”¹pom.xmlæ–‡ä»¶</h3><p>å½“åˆ›å»ºå®ŒMavené¡¹ç›®åä¼šåœ¨æ ¹ç›®å½•ä¸‹æœ‰ä¸€ä¸ªpom.xmlæ–‡ä»¶ï¼ŒMavené¡¹ç›®é€šè¿‡pom.xmlè¿›è¡Œé¡¹ç›®ä¾èµ–çš„ç®¡ç†ï¼Œå¦‚æœæ²¡æœ‰è¯¥xmlæ–‡ä»¶ï¼ŒEclipseä¸ä¼šå°†è¯¥é¡¹ç›®å½“ä½œä¸€ä¸ªMavené¡¹ç›®</p><blockquote><p>æ·»åŠ é¡¹ç›®éœ€è¦çš„jaråŒ…ä¾èµ–</p></blockquote><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>  1
</span><span class=lnt>  2
</span><span class=lnt>  3
</span><span class=lnt>  4
</span><span class=lnt>  5
</span><span class=lnt>  6
</span><span class=lnt>  7
</span><span class=lnt>  8
</span><span class=lnt>  9
</span><span class=lnt> 10
</span><span class=lnt> 11
</span><span class=lnt> 12
</span><span class=lnt> 13
</span><span class=lnt> 14
</span><span class=lnt> 15
</span><span class=lnt> 16
</span><span class=lnt> 17
</span><span class=lnt> 18
</span><span class=lnt> 19
</span><span class=lnt> 20
</span><span class=lnt> 21
</span><span class=lnt> 22
</span><span class=lnt> 23
</span><span class=lnt> 24
</span><span class=lnt> 25
</span><span class=lnt> 26
</span><span class=lnt> 27
</span><span class=lnt> 28
</span><span class=lnt> 29
</span><span class=lnt> 30
</span><span class=lnt> 31
</span><span class=lnt> 32
</span><span class=lnt> 33
</span><span class=lnt> 34
</span><span class=lnt> 35
</span><span class=lnt> 36
</span><span class=lnt> 37
</span><span class=lnt> 38
</span><span class=lnt> 39
</span><span class=lnt> 40
</span><span class=lnt> 41
</span><span class=lnt> 42
</span><span class=lnt> 43
</span><span class=lnt> 44
</span><span class=lnt> 45
</span><span class=lnt> 46
</span><span class=lnt> 47
</span><span class=lnt> 48
</span><span class=lnt> 49
</span><span class=lnt> 50
</span><span class=lnt> 51
</span><span class=lnt> 52
</span><span class=lnt> 53
</span><span class=lnt> 54
</span><span class=lnt> 55
</span><span class=lnt> 56
</span><span class=lnt> 57
</span><span class=lnt> 58
</span><span class=lnt> 59
</span><span class=lnt> 60
</span><span class=lnt> 61
</span><span class=lnt> 62
</span><span class=lnt> 63
</span><span class=lnt> 64
</span><span class=lnt> 65
</span><span class=lnt> 66
</span><span class=lnt> 67
</span><span class=lnt> 68
</span><span class=lnt> 69
</span><span class=lnt> 70
</span><span class=lnt> 71
</span><span class=lnt> 72
</span><span class=lnt> 73
</span><span class=lnt> 74
</span><span class=lnt> 75
</span><span class=lnt> 76
</span><span class=lnt> 77
</span><span class=lnt> 78
</span><span class=lnt> 79
</span><span class=lnt> 80
</span><span class=lnt> 81
</span><span class=lnt> 82
</span><span class=lnt> 83
</span><span class=lnt> 84
</span><span class=lnt> 85
</span><span class=lnt> 86
</span><span class=lnt> 87
</span><span class=lnt> 88
</span><span class=lnt> 89
</span><span class=lnt> 90
</span><span class=lnt> 91
</span><span class=lnt> 92
</span><span class=lnt> 93
</span><span class=lnt> 94
</span><span class=lnt> 95
</span><span class=lnt> 96
</span><span class=lnt> 97
</span><span class=lnt> 98
</span><span class=lnt> 99
</span><span class=lnt>100
</span><span class=lnt>101
</span><span class=lnt>102
</span><span class=lnt>103
</span><span class=lnt>104
</span><span class=lnt>105
</span><span class=lnt>106
</span><span class=lnt>107
</span><span class=lnt>108
</span><span class=lnt>109
</span><span class=lnt>110
</span><span class=lnt>111
</span><span class=lnt>112
</span><span class=lnt>113
</span><span class=lnt>114
</span><span class=lnt>115
</span><span class=lnt>116
</span><span class=lnt>117
</span><span class=lnt>118
</span><span class=lnt>119
</span><span class=lnt>120
</span><span class=lnt>121
</span><span class=lnt>122
</span><span class=lnt>123
</span><span class=lnt>124
</span><span class=lnt>125
</span><span class=lnt>126
</span><span class=lnt>127
</span><span class=lnt>128
</span><span class=lnt>129
</span><span class=lnt>130
</span><span class=lnt>131
</span><span class=lnt>132
</span><span class=lnt>133
</span><span class=lnt>134
</span><span class=lnt>135
</span><span class=lnt>136
</span><span class=lnt>137
</span><span class=lnt>138
</span><span class=lnt>139
</span><span class=lnt>140
</span><span class=lnt>141
</span><span class=lnt>142
</span><span class=lnt>143
</span><span class=lnt>144
</span><span class=lnt>145
</span><span class=lnt>146
</span><span class=lnt>147
</span><span class=lnt>148
</span><span class=lnt>149
</span><span class=lnt>150
</span><span class=lnt>151
</span><span class=lnt>152
</span><span class=lnt>153
</span><span class=lnt>154
</span><span class=lnt>155
</span><span class=lnt>156
</span><span class=lnt>157
</span><span class=lnt>158
</span><span class=lnt>159
</span><span class=lnt>160
</span><span class=lnt>161
</span><span class=lnt>162
</span><span class=lnt>163
</span><span class=lnt>164
</span><span class=lnt>165
</span><span class=lnt>166
</span><span class=lnt>167
</span><span class=lnt>168
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-xml data-lang=xml>	<span class=nt>&lt;project</span> <span class=na>xmlns=</span><span class=s>&#34;http://maven.apache.org/POM/4.0.0&#34;</span> <span class=na>xmlns:xsi=</span><span class=s>&#34;http://www.w3.org/2001/XMLSchema-instance&#34;</span>
		<span class=na>xsi:schemaLocation=</span><span class=s>&#34;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd&#34;</span><span class=nt>&gt;</span>
		<span class=nt>&lt;modelVersion&gt;</span>4.0.0<span class=nt>&lt;/modelVersion&gt;</span>
		<span class=nt>&lt;groupId&gt;</span>com.lewis<span class=nt>&lt;/groupId&gt;</span>
		<span class=nt>&lt;artifactId&gt;</span>seckill<span class=nt>&lt;/artifactId&gt;</span>
		<span class=nt>&lt;packaging&gt;</span>war<span class=nt>&lt;/packaging&gt;</span>
		<span class=nt>&lt;version&gt;</span>0.0.1-SNAPSHOT<span class=nt>&lt;/version&gt;</span>
		<span class=nt>&lt;name&gt;</span>seckill Maven Webapp<span class=nt>&lt;/name&gt;</span>
		<span class=nt>&lt;url&gt;</span>http://maven.apache.org<span class=nt>&lt;/url&gt;</span>
		<span class=nt>&lt;dependencies&gt;</span>
			<span class=nt>&lt;dependency&gt;</span>
				<span class=nt>&lt;groupId&gt;</span>junit<span class=nt>&lt;/groupId&gt;</span>
				<span class=nt>&lt;artifactId&gt;</span>junit<span class=nt>&lt;/artifactId&gt;</span>
				<span class=nt>&lt;version&gt;</span>4.11<span class=nt>&lt;/version&gt;</span>
				<span class=nt>&lt;scope&gt;</span>test<span class=nt>&lt;/scope&gt;</span>
			<span class=nt>&lt;/dependency&gt;</span>
			<span class=c>&lt;!--è¡¥å…¨é¡¹ç›®ä¾èµ– --&gt;</span>
			<span class=c>&lt;!--1.æ—¥å¿— javaæ—¥å¿—æœ‰:slf4j,log4j,logback,commons-logging
</span><span class=c>				slf4j,commons-logging:æ˜¯è§„èŒƒ/æ¥å£ æ—¥å¿—å®ç°:log4j,logback
</span><span class=c>				ä½¿ç”¨:slf4j+logback --&gt;</span>
			<span class=nt>&lt;dependency&gt;</span>
				<span class=nt>&lt;groupId&gt;</span>org.slf4j<span class=nt>&lt;/groupId&gt;</span>
				<span class=nt>&lt;artifactId&gt;</span>slf4j-api<span class=nt>&lt;/artifactId&gt;</span>
				<span class=nt>&lt;version&gt;</span>1.7.12<span class=nt>&lt;/version&gt;</span>
			<span class=nt>&lt;/dependency&gt;</span>
			<span class=nt>&lt;dependency&gt;</span>
				<span class=nt>&lt;groupId&gt;</span>ch.qos.logback<span class=nt>&lt;/groupId&gt;</span>
				<span class=nt>&lt;artifactId&gt;</span>logback-core<span class=nt>&lt;/artifactId&gt;</span>
				<span class=nt>&lt;version&gt;</span>1.1.1<span class=nt>&lt;/version&gt;</span>
			<span class=nt>&lt;/dependency&gt;</span>
			<span class=c>&lt;!--å®ç°slf4jæ¥å£å¹¶æ•´åˆ --&gt;</span>
			<span class=nt>&lt;dependency&gt;</span>
				<span class=nt>&lt;groupId&gt;</span>ch.qos.logback<span class=nt>&lt;/groupId&gt;</span>
				<span class=nt>&lt;artifactId&gt;</span>logback-classic<span class=nt>&lt;/artifactId&gt;</span>
				<span class=nt>&lt;version&gt;</span>1.1.1<span class=nt>&lt;/version&gt;</span>
			<span class=nt>&lt;/dependency&gt;</span>
	
			<span class=c>&lt;!--2.æ•°æ®åº“ç›¸å…³ä¾èµ– --&gt;</span>
			<span class=nt>&lt;dependency&gt;</span>
				<span class=nt>&lt;groupId&gt;</span>mysql<span class=nt>&lt;/groupId&gt;</span>
				<span class=nt>&lt;artifactId&gt;</span>mysql-connector-java<span class=nt>&lt;/artifactId&gt;</span>
				<span class=nt>&lt;version&gt;</span>5.1.35<span class=nt>&lt;/version&gt;</span>
				<span class=nt>&lt;scope&gt;</span>runtime<span class=nt>&lt;/scope&gt;</span>
			<span class=nt>&lt;/dependency&gt;</span>
			<span class=nt>&lt;dependency&gt;</span>
				<span class=nt>&lt;groupId&gt;</span>c3p0<span class=nt>&lt;/groupId&gt;</span>
				<span class=nt>&lt;artifactId&gt;</span>c3p0<span class=nt>&lt;/artifactId&gt;</span>
				<span class=nt>&lt;version&gt;</span>0.9.1.1<span class=nt>&lt;/version&gt;</span>
			<span class=nt>&lt;/dependency&gt;</span>
	
			<span class=c>&lt;!--3.daoæ¡†æ¶:MyBatisä¾èµ– --&gt;</span>
			<span class=nt>&lt;dependency&gt;</span>
				<span class=nt>&lt;groupId&gt;</span>org.mybatis<span class=nt>&lt;/groupId&gt;</span>
				<span class=nt>&lt;artifactId&gt;</span>mybatis<span class=nt>&lt;/artifactId&gt;</span>
				<span class=nt>&lt;version&gt;</span>3.3.0<span class=nt>&lt;/version&gt;</span>
			<span class=nt>&lt;/dependency&gt;</span>
			<span class=c>&lt;!--mybatisè‡ªèº«å®ç°çš„springæ•´åˆä¾èµ– --&gt;</span>
			<span class=nt>&lt;dependency&gt;</span>
				<span class=nt>&lt;groupId&gt;</span>org.mybatis<span class=nt>&lt;/groupId&gt;</span>
				<span class=nt>&lt;artifactId&gt;</span>mybatis-spring<span class=nt>&lt;/artifactId&gt;</span>
				<span class=nt>&lt;version&gt;</span>1.2.3<span class=nt>&lt;/version&gt;</span>
			<span class=nt>&lt;/dependency&gt;</span>
	
			<span class=c>&lt;!--4.Servlet webç›¸å…³ä¾èµ– --&gt;</span>
			<span class=nt>&lt;dependency&gt;</span>
				<span class=nt>&lt;groupId&gt;</span>taglibs<span class=nt>&lt;/groupId&gt;</span>
				<span class=nt>&lt;artifactId&gt;</span>standard<span class=nt>&lt;/artifactId&gt;</span>
				<span class=nt>&lt;version&gt;</span>1.1.2<span class=nt>&lt;/version&gt;</span>
			<span class=nt>&lt;/dependency&gt;</span>
			<span class=nt>&lt;dependency&gt;</span>
				<span class=nt>&lt;groupId&gt;</span>jstl<span class=nt>&lt;/groupId&gt;</span>
				<span class=nt>&lt;artifactId&gt;</span>jstl<span class=nt>&lt;/artifactId&gt;</span>
				<span class=nt>&lt;version&gt;</span>1.2<span class=nt>&lt;/version&gt;</span>
			<span class=nt>&lt;/dependency&gt;</span>
			<span class=nt>&lt;dependency&gt;</span>
				<span class=nt>&lt;groupId&gt;</span>com.fasterxml.jackson.core<span class=nt>&lt;/groupId&gt;</span>
				<span class=nt>&lt;artifactId&gt;</span>jackson-databind<span class=nt>&lt;/artifactId&gt;</span>
				<span class=nt>&lt;version&gt;</span>2.5.4<span class=nt>&lt;/version&gt;</span>
			<span class=nt>&lt;/dependency&gt;</span>
			<span class=nt>&lt;dependency&gt;</span>
				<span class=nt>&lt;groupId&gt;</span>javax.servlet<span class=nt>&lt;/groupId&gt;</span>
				<span class=nt>&lt;artifactId&gt;</span>javax.servlet-api<span class=nt>&lt;/artifactId&gt;</span>
				<span class=nt>&lt;version&gt;</span>3.1.0<span class=nt>&lt;/version&gt;</span>
			<span class=nt>&lt;/dependency&gt;</span>
	
			<span class=c>&lt;!--5:springä¾èµ– --&gt;</span>
			<span class=c>&lt;!--1)springæ ¸å¿ƒä¾èµ– --&gt;</span>
			<span class=nt>&lt;dependency&gt;</span>
				<span class=nt>&lt;groupId&gt;</span>org.springframework<span class=nt>&lt;/groupId&gt;</span>
				<span class=nt>&lt;artifactId&gt;</span>spring-core<span class=nt>&lt;/artifactId&gt;</span>
				<span class=nt>&lt;version&gt;</span>4.1.7.RELEASE<span class=nt>&lt;/version&gt;</span>
			<span class=nt>&lt;/dependency&gt;</span>
			<span class=nt>&lt;dependency&gt;</span>
				<span class=nt>&lt;groupId&gt;</span>org.springframework<span class=nt>&lt;/groupId&gt;</span>
				<span class=nt>&lt;artifactId&gt;</span>spring-beans<span class=nt>&lt;/artifactId&gt;</span>
				<span class=nt>&lt;version&gt;</span>4.1.7.RELEASE<span class=nt>&lt;/version&gt;</span>
			<span class=nt>&lt;/dependency&gt;</span>
			<span class=nt>&lt;dependency&gt;</span>
				<span class=nt>&lt;groupId&gt;</span>org.springframework<span class=nt>&lt;/groupId&gt;</span>
				<span class=nt>&lt;artifactId&gt;</span>spring-context<span class=nt>&lt;/artifactId&gt;</span>
				<span class=nt>&lt;version&gt;</span>4.1.7.RELEASE<span class=nt>&lt;/version&gt;</span>
			<span class=nt>&lt;/dependency&gt;</span>
			<span class=c>&lt;!--2)spring daoå±‚ä¾èµ– --&gt;</span>
			<span class=nt>&lt;dependency&gt;</span>
				<span class=nt>&lt;groupId&gt;</span>org.springframework<span class=nt>&lt;/groupId&gt;</span>
				<span class=nt>&lt;artifactId&gt;</span>spring-jdbc<span class=nt>&lt;/artifactId&gt;</span>
				<span class=nt>&lt;version&gt;</span>4.1.7.RELEASE<span class=nt>&lt;/version&gt;</span>
			<span class=nt>&lt;/dependency&gt;</span>
			<span class=nt>&lt;dependency&gt;</span>
				<span class=nt>&lt;groupId&gt;</span>org.springframework<span class=nt>&lt;/groupId&gt;</span>
				<span class=nt>&lt;artifactId&gt;</span>spring-tx<span class=nt>&lt;/artifactId&gt;</span>
				<span class=nt>&lt;version&gt;</span>4.1.7.RELEASE<span class=nt>&lt;/version&gt;</span>
			<span class=nt>&lt;/dependency&gt;</span>
			<span class=c>&lt;!--3)springwebç›¸å…³ä¾èµ– --&gt;</span>
			<span class=nt>&lt;dependency&gt;</span>
				<span class=nt>&lt;groupId&gt;</span>org.springframework<span class=nt>&lt;/groupId&gt;</span>
				<span class=nt>&lt;artifactId&gt;</span>spring-web<span class=nt>&lt;/artifactId&gt;</span>
				<span class=nt>&lt;version&gt;</span>4.1.7.RELEASE<span class=nt>&lt;/version&gt;</span>
			<span class=nt>&lt;/dependency&gt;</span>
			<span class=nt>&lt;dependency&gt;</span>
				<span class=nt>&lt;groupId&gt;</span>org.springframework<span class=nt>&lt;/groupId&gt;</span>
				<span class=nt>&lt;artifactId&gt;</span>spring-webmvc<span class=nt>&lt;/artifactId&gt;</span>
				<span class=nt>&lt;version&gt;</span>4.1.7.RELEASE<span class=nt>&lt;/version&gt;</span>
			<span class=nt>&lt;/dependency&gt;</span>
			<span class=c>&lt;!--4)spring testç›¸å…³ä¾èµ– --&gt;</span>
			<span class=nt>&lt;dependency&gt;</span>
				<span class=nt>&lt;groupId&gt;</span>org.springframework<span class=nt>&lt;/groupId&gt;</span>
				<span class=nt>&lt;artifactId&gt;</span>spring-test<span class=nt>&lt;/artifactId&gt;</span>
				<span class=nt>&lt;version&gt;</span>4.1.7.RELEASE<span class=nt>&lt;/version&gt;</span>
			<span class=nt>&lt;/dependency&gt;</span>
	
			<span class=c>&lt;!--æ·»åŠ redisä¾èµ– --&gt;</span>
			<span class=nt>&lt;dependency&gt;</span>
				<span class=nt>&lt;groupId&gt;</span>redis.clients<span class=nt>&lt;/groupId&gt;</span>
				<span class=nt>&lt;artifactId&gt;</span>jedis<span class=nt>&lt;/artifactId&gt;</span>
				<span class=nt>&lt;version&gt;</span>2.7.3<span class=nt>&lt;/version&gt;</span>
			<span class=nt>&lt;/dependency&gt;</span>
	
			<span class=c>&lt;!--prostuffåºåˆ—åŒ–ä¾èµ– --&gt;</span>
			<span class=nt>&lt;dependency&gt;</span>
				<span class=nt>&lt;groupId&gt;</span>com.dyuproject.protostuff<span class=nt>&lt;/groupId&gt;</span>
				<span class=nt>&lt;artifactId&gt;</span>protostuff-core<span class=nt>&lt;/artifactId&gt;</span>
				<span class=nt>&lt;version&gt;</span>1.0.8<span class=nt>&lt;/version&gt;</span>
			<span class=nt>&lt;/dependency&gt;</span>
			<span class=nt>&lt;dependency&gt;</span>
				<span class=nt>&lt;groupId&gt;</span>com.dyuproject.protostuff<span class=nt>&lt;/groupId&gt;</span>
				<span class=nt>&lt;artifactId&gt;</span>protostuff-runtime<span class=nt>&lt;/artifactId&gt;</span>
				<span class=nt>&lt;version&gt;</span>1.0.8<span class=nt>&lt;/version&gt;</span>
			<span class=nt>&lt;/dependency&gt;</span>
		<span class=nt>&lt;/dependencies&gt;</span>
		<span class=nt>&lt;build&gt;</span>
			<span class=nt>&lt;finalName&gt;</span>seckill<span class=nt>&lt;/finalName&gt;</span>
			<span class=nt>&lt;resources&gt;</span>
				<span class=c>&lt;!--æ‰“åŒ…æ—¶åŒ…å«æºä»£ç åŒ…ä¸‹çš„èµ„æºæ–‡ä»¶
</span><span class=c>					é»˜è®¤æƒ…å†µä¸‹åªä¼šæ‰“åŒ…src/main/javaä¸‹çš„æºä»£ç  --&gt;</span>
				<span class=nt>&lt;resource&gt;</span>
					<span class=nt>&lt;directory&gt;</span>src/main/java<span class=nt>&lt;/directory&gt;</span>
					<span class=nt>&lt;includes&gt;</span>
						<span class=nt>&lt;include&gt;</span>**/*.xml<span class=nt>&lt;/include&gt;</span>
					<span class=nt>&lt;/includes&gt;</span>
					<span class=nt>&lt;filtering&gt;</span>false<span class=nt>&lt;/filtering&gt;</span>
				<span class=nt>&lt;/resource&gt;</span>
				<span class=nt>&lt;resource&gt;</span>
					<span class=nt>&lt;directory&gt;</span>src/main/resources<span class=nt>&lt;/directory&gt;</span>
				<span class=nt>&lt;/resource&gt;</span>
			<span class=nt>&lt;/resources&gt;</span>
		<span class=nt>&lt;/build&gt;</span>
	<span class=nt>&lt;/project&gt;</span>
</code></pre></td></tr></table></div></div><blockquote><p>å…³äºmavenä¾èµ–çš„ç®€åŒ–å†™æ³•</p></blockquote><p>æ•™å­¦è§†é¢‘ä¸­è€å¸ˆå†™äº†å¾ˆå¤šçš„ä¾èµ–ï¼Œä½†å…¶å®è¿™é‡Œé¢æœ‰ä¸€äº›æ˜¯å¯ä»¥çœç•¥ä¸å†™çš„ï¼Œå› ä¸ºæœ‰äº›åŒ…ä¼šè‡ªåŠ¨ä¾èµ–å…¶å®ƒçš„åŒ…ï¼ˆMavençš„ä¼ é€’æ€§ä¾èµ–ï¼‰ã€‚è¿™é‡Œé¢å¯ä»¥çœç•¥çš„ä¾èµ–æœ‰ï¼šspring-core;spring-beansï¼ˆä¸Šé¢è¿™ä¸¤ä¸ªspring-contextä¼šè‡ªåŠ¨ä¾èµ–ï¼‰;spring-contextï¼Œspring-jdbcï¼ˆmybatis-springä¼šä¾èµ–ï¼‰ï¼›spring-webï¼ˆspring-webmvcä¼šä¾èµ–ï¼‰ï¼›logback-coreï¼ˆlogback-classicä¼šä¾èµ–ï¼‰</p><blockquote><p>æœ‰æƒ³è¦äº†è§£Mavençš„ä¾èµ–èŒƒå›´ä¸ä¼ é€’æ€§ä¾èµ–çš„è¯·å‚è€ƒ<a href=http://blog.csdn.net/lewky_liu/article/details/78145211 target=_blank rel="noopener noreffer">è¯¥åšæ–‡</a></p></blockquote><h2 id=2-ç§’æ€ä¸šåŠ¡åˆ†æ>2. ç§’æ€ä¸šåŠ¡åˆ†æ</h2><h3 id=21-ä¸šåŠ¡åˆ†æ>2.1 ä¸šåŠ¡åˆ†æ</h3><blockquote><p>ç§’æ€ä¸šåŠ¡çš„æ ¸å¿ƒæ˜¯å¯¹åº“å­˜çš„å¤„ç†ï¼Œå…¶ä¸šåŠ¡æµç¨‹å¦‚ä¸‹å›¾</p></blockquote><p><figure><a class=lightgallery href=https://cdn.jsdelivr.net/gh/lewky/lewky.github.io@master/images/posts/project/seckill/1.png title=1.png data-thumbnail=https://cdn.jsdelivr.net/gh/lewky/lewky.github.io@master/images/posts/project/seckill/1.png data-sub-html="<h2> </h2><p>1.png</p>"><img class=lazyload src=/svg/loading.min.svg data-src=https://cdn.jsdelivr.net/gh/lewky/lewky.github.io@master/images/posts/project/seckill/1.png data-srcset="https://cdn.jsdelivr.net/gh/lewky/lewky.github.io@master/images/posts/project/seckill/1.png, https://cdn.jsdelivr.net/gh/lewky/lewky.github.io@master/images/posts/project/seckill/1.png 1.5x, https://cdn.jsdelivr.net/gh/lewky/lewky.github.io@master/images/posts/project/seckill/1.png 2x" data-sizes=auto alt=https://cdn.jsdelivr.net/gh/lewky/lewky.github.io@master/images/posts/project/seckill/1.png></a><figcaption class=image-caption>1.png</figcaption></figure></p><blockquote><p>ç”¨æˆ·é’ˆå¯¹åº“å­˜ä¸šåŠ¡åˆ†æ</p></blockquote><p>å½“ç”¨æˆ·æ‰§è¡Œç§’æ€æˆåŠŸæ—¶ï¼Œåº”è¯¥å‘ç”Ÿä»¥ä¸‹ä¸¤ä¸ªæ“ä½œï¼š</p><ul><li>å‡åº“å­˜</li><li>è®°å½•è´­ä¹°æ˜ç»†</li></ul><p>è¿™ä¸¤ä¸ªæ“ä½œå±äºä¸€ä¸ªå®Œæ•´äº‹åŠ¡ï¼Œé€šè¿‡äº‹åŠ¡æ¥å®ç°æ•°æ®è½åœ°</p><blockquote><p>ä¸ºä»€ä¹ˆéœ€è¦äº‹åŠ¡ï¼Ÿ</p></blockquote><ul><li>å‡åº“å­˜å´æ²¡æœ‰è®°å½•è´­ä¹°æ˜ç»†ï¼Œä¼šå¯¼è‡´å•†å“å°‘å–</li><li>è®°å½•è´­ä¹°æ˜ç»†å´æ²¡æœ‰å‡åº“å­˜ï¼Œä¼šå¯¼è‡´å•†å“è¶…å–</li></ul><p>åœ¨å®é™…ä¸­ï¼Œä»¥ä¸Šéƒ½æ˜¯å¾ˆä¸¥é‡çš„äº‹æ•…ï¼Œä¼šç»™å•†å®¶æˆ–ä¹°å®¶å¸¦æ¥æŸå¤±ï¼Œè¿™æ˜¯ä¸èƒ½è¢«å…è®¸çš„ã€‚ä¸€æ—¦å‘ç”Ÿè¿™ç§äº‹æ•…ï¼Œäº‹æ•…è´£ä»»å¾ˆè‡ªç„¶çš„å°±ä¼šå»æ‰¾è®¾è®¡å®ç°ä¸šåŠ¡çš„ç¨‹åºå‘˜</p><blockquote><p>å¦‚ä½•å®ç°æ•°æ®è½åœ°ï¼Ÿ</p></blockquote><p>æœ‰<strong>MySQLä¸NoSQL</strong>ä¸¤ç§æ•°æ®è½åœ°çš„æ–¹æ¡ˆ</p><ul><li>MySQLå±äºå…³ç³»å‹æ•°æ®åº“ï¼Œè€ŒMySQLå†…ç½®çš„äº‹åŠ¡æœºåˆ¶æ¥å¯ä»¥å‡†ç¡®çš„å¸®æˆ‘ä»¬å®Œæˆå‡åº“å­˜å’Œè®°å½•è´­ä¹°æ˜ç»†çš„è¿‡ç¨‹ã€‚MySQLæœ‰å¤šç§å­˜å‚¨å¼•æ“ï¼Œä½†åªæœ‰InnoDBå­˜å‚¨å¼•æ“æ”¯æŒäº‹åŠ¡ã€‚InnoDBæ”¯æŒè¡Œçº§é”å’Œè¡¨çº§é”ï¼Œé»˜è®¤ä½¿ç”¨è¡Œçº§é”</li><li>NoSQLå±äºéå…³ç³»å‹æ•°æ®åº“ï¼Œè¿‘äº›å¹´æ¥åœ¨æ•°æ®å­˜å‚¨æ–¹é¢æ‰¿æ‹…äº†å¾ˆå¤§çš„èŒè´£ï¼Œä½†æ˜¯å¯¹äºäº‹åŠ¡çš„æ”¯æŒåšçš„å¹¶ä¸æ˜¯å¾ˆå¥½ï¼Œæ›´å¤šè¿½æ±‚çš„æ˜¯æ€§èƒ½ã€é«˜å¤ç”¨ã€åˆ†å¸ƒå¼ã€‚</li></ul><p>äº‹åŠ¡æœºåˆ¶ä¾ç„¶æ˜¯ç›®å‰æœ€å¯é çš„æ•°æ®è½åœ°æ–¹æ¡ˆã€‚</p><blockquote><p>æ•°æ®è½åœ°ä¸ä¸æ•°æ®è½åœ°</p></blockquote><ul><li><strong>è½åœ°æ•°æ®</strong>ï¼šå°±æ˜¯è¢«æŒä¹…åŒ–çš„æ•°æ®ï¼Œè¿™ç§æ•°æ®ä¸€èˆ¬æ”¾åœ¨ç¡¬ç›˜æˆ–æ˜¯å…¶ä»–çš„æŒä¹…åŒ–å­˜å‚¨è®¾å¤‡é‡Œï¼Œä¾‹å¦‚ï¼šå›¾ç‰‡ã€ç³»ç»Ÿæ—¥å¿—ã€åœ¨é¡µé¢ä¸Šæ˜¾ç¤ºçš„æ•°æ®ä»¥åŠä¿å­˜åœ¨å…³ç³»æ•°æ®åº“é‡Œçš„æ•°æ®ç­‰ç­‰ï¼Œè½åœ°æ•°æ®ä¸€å®šä¼šæœ‰ä¸€ä¸ªå›ºå®šçš„è½½ä½“ï¼Œä»–ä»¬ä¸ä¼šç¬æ—¶æ¶ˆå¤±çš„ã€‚</li><li><strong>ä¸è½åœ°æ•°æ®</strong>ï¼šä¸€èˆ¬æŒ‡å­˜å‚¨åœ¨å†…å­˜æˆ–è€…æ˜¯ç½‘ç»œä¼ è¾“é‡Œçš„æ•°æ®ï¼Œè¿™äº›æ•°æ®æ˜¯ç¬æ—¶ï¼Œä½¿ç”¨å®Œæ¯•å°±ä¼šæ¶ˆå¤±ï¼Œä¾‹å¦‚ï¼šæˆ‘ä»¬åœ¨æµè§ˆå™¨å‘é€ç»™æœåŠ¡å™¨çš„è¯·æ±‚ï¼›ä»æ•°æ®åº“è¯»å–å‡ºæ¥çš„ä¸€ç›´åˆ°é¡µé¢å±•ç¤ºå‰çš„æ•°æ®ç­‰ç­‰ã€‚</li><li>â€œä¸è½åœ°â€ä¼ è¾“èƒ½å¤Ÿæ»¡è¶³ç”¨æˆ·åœ¨æ€§èƒ½ä¸Šçš„è¦æ±‚ã€‚</li></ul><h3 id=22-ä½¿ç”¨mysqlå®ç°ç§’æ€çš„éš¾ç‚¹åˆ†æ>2.2 ä½¿ç”¨MySQLå®ç°ç§’æ€çš„éš¾ç‚¹åˆ†æ</h3><blockquote><p>éš¾ç‚¹é—®é¢˜ï¼šå¦‚ä½•é«˜æ•ˆåœ°å¤„ç†ç«äº‰ï¼Ÿ</p></blockquote><p>å½“ä¸€ä¸ªç”¨æˆ·åœ¨æ‰§è¡Œç§’æ€æŸä»¶å•†å“æ—¶ï¼Œå…¶ä»–ä¹Ÿæƒ³è¦ç§’æ€è¯¥å•†å“çš„ç”¨æˆ·å°±åªèƒ½ç­‰å¾…ï¼Œç›´åˆ°ä¸Šä¸€ä¸ªç”¨æˆ·æäº¤æˆ–å›æ»šäº†äº‹åŠ¡ï¼Œä»–æ‰èƒ½å¤Ÿå¾—åˆ°è¯¥å•†å“çš„é”æ‰§è¡Œç§’æ€æ“ä½œã€‚è¿™é‡Œå°±æ¶‰åŠåˆ°äº†é”çš„ç«äº‰ã€‚</p><p><figure><a class=lightgallery href=https://cdn.jsdelivr.net/gh/lewky/lewky.github.io@master/images/posts/project/seckill/2.jpg title=2.jpg data-thumbnail=https://cdn.jsdelivr.net/gh/lewky/lewky.github.io@master/images/posts/project/seckill/2.jpg data-sub-html="<h2> </h2><p>2.jpg</p>"><img class=lazyload src=/svg/loading.min.svg data-src=https://cdn.jsdelivr.net/gh/lewky/lewky.github.io@master/images/posts/project/seckill/2.jpg data-srcset="https://cdn.jsdelivr.net/gh/lewky/lewky.github.io@master/images/posts/project/seckill/2.jpg, https://cdn.jsdelivr.net/gh/lewky/lewky.github.io@master/images/posts/project/seckill/2.jpg 1.5x, https://cdn.jsdelivr.net/gh/lewky/lewky.github.io@master/images/posts/project/seckill/2.jpg 2x" data-sizes=auto alt=https://cdn.jsdelivr.net/gh/lewky/lewky.github.io@master/images/posts/project/seckill/2.jpg></a><figcaption class=image-caption>2.jpg</figcaption></figure></p><p>å¯¹äºMySQLæ¥è¯´ï¼Œç«äº‰ååº”åˆ°èƒŒåçš„æŠ€æœ¯æ˜¯å°±æ˜¯äº‹åŠ¡+è¡Œçº§é”ï¼š</p><p>start transactionï¼ˆå¼€å¯äº‹åŠ¡ï¼‰â†’ updateåº“å­˜æ•°é‡ â†’ insertè´­ä¹°æ˜ç»† â†’ commitï¼ˆæäº¤äº‹åŠ¡ï¼‰</p><p>åœ¨ç§’æ€ç³»ç»Ÿä¸­ï¼Œåœ¨åŒä¸€æ—¶åˆ»ä¼šæœ‰å¾ˆå¤šç”¨æˆ·åœ¨ç§’æ€åŒä¸€ä»¶å•†å“ï¼Œé‚£ä¹ˆå¦‚ä½•é«˜æ•ˆä½å¤„ç†è¿™äº›ç«äº‰ï¼Ÿå¦‚ä½•é«˜æ•ˆåœ°æäº¤äº‹åŠ¡ï¼Ÿè¿™äº›å°†åœ¨<a href=http://blog.csdn.net/lewky_liu/article/details/78166080 target=_blank rel="noopener noreffer">Javaé«˜å¹¶å‘ç§’æ€API(å››)ä¹‹é«˜å¹¶å‘ä¼˜åŒ–</a>è¿›è¡Œåˆ†ææ€»ç»“ã€‚</p><blockquote><p>å®ç°å“ªäº›ç§’æ€åŠŸèƒ½ï¼Ÿ</p></blockquote><p>ä¸‹é¢å…ˆä»¥å¤©çŒ«çš„ç§’æ€åº“å­˜ç³»ç»Ÿä¸ºä¾‹ï¼Œå¦‚ä¸‹å›¾</p><p><figure><a class=lightgallery href=https://cdn.jsdelivr.net/gh/lewky/lewky.github.io@master/images/posts/project/seckill/2.jpg title=3.jpg data-thumbnail=https://cdn.jsdelivr.net/gh/lewky/lewky.github.io@master/images/posts/project/seckill/2.jpg data-sub-html="<h2> </h2><p>3.jpg</p>"><img class=lazyload src=/svg/loading.min.svg data-src=https://cdn.jsdelivr.net/gh/lewky/lewky.github.io@master/images/posts/project/seckill/2.jpg data-srcset="https://cdn.jsdelivr.net/gh/lewky/lewky.github.io@master/images/posts/project/seckill/2.jpg, https://cdn.jsdelivr.net/gh/lewky/lewky.github.io@master/images/posts/project/seckill/2.jpg 1.5x, https://cdn.jsdelivr.net/gh/lewky/lewky.github.io@master/images/posts/project/seckill/2.jpg 2x" data-sizes=auto alt=https://cdn.jsdelivr.net/gh/lewky/lewky.github.io@master/images/posts/project/seckill/2.jpg></a><figcaption class=image-caption>3.jpg</figcaption></figure></p><p>å¯ä»¥çœ‹åˆ°ï¼Œå¤©çŒ«çš„ç§’æ€åº“å­˜ç³»ç»Ÿæ˜¯å¾ˆå¤æ‚çš„ï¼Œéœ€è¦å¾ˆå¤šå·¥ç¨‹å¸ˆå…±åŒå¼€å‘ã€‚åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬åªå®ç°ç§’æ€ç›¸å…³çš„åŠŸèƒ½</p><ul><li>ç§’æ€æ¥å£æš´éœ²</li><li>æ‰§è¡Œç§’æ€</li><li>ç›¸å…³æŸ¥è¯¢</li></ul><blockquote><p>ä¸ºä»€ä¹ˆè¦è¿›è¡Œç§’æ€æ¥å£æš´éœ²çš„æ“ä½œï¼Ÿ</p></blockquote><p>ç°å®ä¸­æœ‰çš„ç”¨æˆ·å›é€šè¿‡æµè§ˆå™¨æ’ä»¶æå‰çŸ¥é“ç§’æ€æ¥å£ï¼Œå¡«å…¥å‚æ•°å’Œåœ°å€æ¥å®ç°è‡ªåŠ¨ç§’æ€ï¼Œè¿™å¯¹äºå…¶ä»–ç”¨æˆ·æ¥è¯´æ˜¯ä¸å…¬å¹³çš„ï¼Œæˆ‘ä»¬ä¹Ÿä¸å¸Œæœ›çœ‹åˆ°è¿™ç§æƒ…å†µ</p><h2 id=3-daoå±‚è®¾è®¡>3. DAOå±‚è®¾è®¡</h2><h3 id=31-åˆ›å»ºæ•°æ®åº“>3.1 åˆ›å»ºæ•°æ®åº“</h3><p>æºç é‡Œæœ‰ä¸ªsqlæ–‡ä»¶å¤¹ï¼Œå¯ä»¥ç»™å‡ºäº†sqlè¯­å¥ï¼›ä¹Ÿå¯ä»¥é€‰æ‹©è‡ªå·±æ‰‹å†™ã€‚æ•°æ®åº“ä¸€å…±å°±ä¸¤ä¸ªè¡¨ï¼šç§’æ€åº“å­˜è¡¨ã€ç§’æ€æˆåŠŸæ˜ç»†è¡¨ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-sql data-lang=sql>	<span class=c1>-- æ•°æ®åº“åˆå§‹åŒ–è„šæœ¬
</span><span class=c1></span>	
	<span class=c1>-- åˆ›å»ºæ•°æ®åº“
</span><span class=c1></span>	<span class=k>CREATE</span> <span class=k>DATABASE</span> <span class=n>seckill</span><span class=p>;</span>
	<span class=c1>-- ä½¿ç”¨æ•°æ®åº“
</span><span class=c1></span>	<span class=n>use</span> <span class=n>seckill</span><span class=p>;</span>
	<span class=k>CREATE</span> <span class=k>TABLE</span> <span class=n>seckill</span><span class=p>(</span>
	  <span class=o>`</span><span class=n>seckill_id</span><span class=o>`</span> <span class=nb>BIGINT</span> <span class=k>NOT</span> <span class=k>NUll</span> <span class=n>AUTO_INCREMENT</span> <span class=k>COMMENT</span> <span class=s1>&#39;å•†å“åº“å­˜ID&#39;</span><span class=p>,</span>
	  <span class=o>`</span><span class=n>name</span><span class=o>`</span> <span class=nb>VARCHAR</span><span class=p>(</span><span class=mi>120</span><span class=p>)</span> <span class=k>NOT</span> <span class=k>NULL</span> <span class=k>COMMENT</span> <span class=s1>&#39;å•†å“åç§°&#39;</span><span class=p>,</span>
	  <span class=o>`</span><span class=nb>number</span><span class=o>`</span> <span class=nb>int</span> <span class=k>NOT</span> <span class=k>NULL</span> <span class=k>COMMENT</span> <span class=s1>&#39;åº“å­˜æ•°é‡&#39;</span><span class=p>,</span>
	  <span class=o>`</span><span class=n>create_time</span><span class=o>`</span> <span class=k>TIMESTAMP</span> <span class=k>NOT</span> <span class=k>NULL</span> <span class=k>DEFAULT</span> <span class=k>CURRENT_TIMESTAMP</span> <span class=k>COMMENT</span> <span class=s1>&#39;åˆ›å»ºæ—¶é—´&#39;</span><span class=p>,</span>
	  <span class=o>`</span><span class=n>start_time</span><span class=o>`</span> <span class=k>TIMESTAMP</span>  <span class=k>NOT</span> <span class=k>NULL</span> <span class=k>COMMENT</span> <span class=s1>&#39;ç§’æ€å¼€å§‹æ—¶é—´&#39;</span><span class=p>,</span>
	  <span class=o>`</span><span class=n>end_time</span><span class=o>`</span>   <span class=k>TIMESTAMP</span>   <span class=k>NOT</span> <span class=k>NULL</span> <span class=k>COMMENT</span> <span class=s1>&#39;ç§’æ€ç»“æŸæ—¶é—´&#39;</span><span class=p>,</span>
	  <span class=k>PRIMARY</span> <span class=k>KEY</span> <span class=p>(</span><span class=n>seckill_id</span><span class=p>),</span>
	  <span class=k>key</span> <span class=n>idx_start_time</span><span class=p>(</span><span class=n>start_time</span><span class=p>),</span>
	  <span class=k>key</span> <span class=n>idx_end_time</span><span class=p>(</span><span class=n>end_time</span><span class=p>),</span>
	  <span class=k>key</span> <span class=n>idx_create_time</span><span class=p>(</span><span class=n>create_time</span><span class=p>)</span>
	<span class=p>)</span><span class=n>ENGINE</span><span class=o>=</span><span class=n>INNODB</span> <span class=n>AUTO_INCREMENT</span><span class=o>=</span><span class=mi>1000</span> <span class=k>DEFAULT</span> <span class=n>CHARSET</span><span class=o>=</span><span class=n>utf8</span> <span class=k>COMMENT</span><span class=o>=</span><span class=s1>&#39;ç§’æ€åº“å­˜è¡¨&#39;</span><span class=p>;</span>
	
	<span class=c1>-- åˆå§‹åŒ–æ•°æ®
</span><span class=c1></span>	<span class=k>INSERT</span> <span class=k>into</span> <span class=n>seckill</span><span class=p>(</span><span class=n>name</span><span class=p>,</span><span class=nb>number</span><span class=p>,</span><span class=n>start_time</span><span class=p>,</span><span class=n>end_time</span><span class=p>)</span>
	<span class=k>VALUES</span>
	  <span class=p>(</span><span class=s1>&#39;1000å…ƒç§’æ€iphone6&#39;</span><span class=p>,</span><span class=mi>100</span><span class=p>,</span><span class=s1>&#39;2016-01-01 00:00:00&#39;</span><span class=p>,</span><span class=s1>&#39;2016-01-02 00:00:00&#39;</span><span class=p>),</span>
	  <span class=p>(</span><span class=s1>&#39;800å…ƒç§’æ€ipad&#39;</span><span class=p>,</span><span class=mi>200</span><span class=p>,</span><span class=s1>&#39;2016-01-01 00:00:00&#39;</span><span class=p>,</span><span class=s1>&#39;2016-01-02 00:00:00&#39;</span><span class=p>),</span>
	  <span class=p>(</span><span class=s1>&#39;6600å…ƒç§’æ€mac book pro&#39;</span><span class=p>,</span><span class=mi>300</span><span class=p>,</span><span class=s1>&#39;2016-01-01 00:00:00&#39;</span><span class=p>,</span><span class=s1>&#39;2016-01-02 00:00:00&#39;</span><span class=p>),</span>
	  <span class=p>(</span><span class=s1>&#39;7000å…ƒç§’æ€iMac&#39;</span><span class=p>,</span><span class=mi>400</span><span class=p>,</span><span class=s1>&#39;2016-01-01 00:00:00&#39;</span><span class=p>,</span><span class=s1>&#39;2016-01-02 00:00:00&#39;</span><span class=p>);</span>
	
	<span class=c1>-- ç§’æ€æˆåŠŸæ˜ç»†è¡¨
</span><span class=c1></span>	<span class=c1>-- ç”¨æˆ·ç™»å½•è®¤è¯ç›¸å…³ä¿¡æ¯(ç®€åŒ–ä¸ºæ‰‹æœºå·)
</span><span class=c1></span>	<span class=k>CREATE</span> <span class=k>TABLE</span> <span class=n>success_killed</span><span class=p>(</span>
	  <span class=o>`</span><span class=n>seckill_id</span><span class=o>`</span> <span class=nb>BIGINT</span> <span class=k>NOT</span> <span class=k>NULL</span> <span class=k>COMMENT</span> <span class=s1>&#39;ç§’æ€å•†å“ID&#39;</span><span class=p>,</span>
	  <span class=o>`</span><span class=n>user_phone</span><span class=o>`</span> <span class=nb>BIGINT</span> <span class=k>NOT</span> <span class=k>NULL</span> <span class=k>COMMENT</span> <span class=s1>&#39;ç”¨æˆ·æ‰‹æœºå·&#39;</span><span class=p>,</span>
	  <span class=o>`</span><span class=k>state</span><span class=o>`</span> <span class=n>TINYINT</span> <span class=k>NOT</span> <span class=k>NULL</span> <span class=k>DEFAULT</span> <span class=o>-</span><span class=mi>1</span> <span class=k>COMMENT</span> <span class=s1>&#39;çŠ¶æ€æ ‡è¯†ğŸ‘æ— æ•ˆ 0:æˆåŠŸ 1:å·²ä»˜æ¬¾ 2:å·²å‘è´§&#39;</span><span class=p>,</span>
	  <span class=o>`</span><span class=n>create_time</span><span class=o>`</span> <span class=k>TIMESTAMP</span> <span class=k>NOT</span> <span class=k>NULL</span> <span class=k>COMMENT</span> <span class=s1>&#39;åˆ›å»ºæ—¶é—´&#39;</span><span class=p>,</span>
	  <span class=k>PRIMARY</span> <span class=k>KEY</span><span class=p>(</span><span class=n>seckill_id</span><span class=p>,</span><span class=n>user_phone</span><span class=p>),</span><span class=cm>/*è”åˆä¸»é”®*/</span>
	  <span class=k>KEY</span> <span class=n>idx_create_time</span><span class=p>(</span><span class=n>create_time</span><span class=p>)</span>
	<span class=p>)</span><span class=n>ENGINE</span><span class=o>=</span><span class=n>INNODB</span> <span class=k>DEFAULT</span> <span class=n>CHARSET</span><span class=o>=</span><span class=n>utf8</span> <span class=k>COMMENT</span><span class=o>=</span><span class=s1>&#39;ç§’æ€æˆåŠŸæ˜ç»†è¡¨&#39;</span><span class=p>;</span>
</code></pre></td></tr></table></div></div><blockquote><p>ç§’æ€æˆåŠŸæ˜ç»†è¡¨ä¸ºä½•ä½¿ç”¨è”åˆä¸»é”®</p></blockquote><p>ä¹‹æ‰€ä»¥ä½¿ç”¨è”åˆä¸»é”®ï¼Œæ˜¯ä¸ºäº†èƒ½å¤Ÿè¿‡æ»¤é‡å¤æ’å…¥ï¼Œå¯ä»¥é€šè¿‡<code>insert ignore into</code>è¯­å¥æ¥é¿å…ç”¨æˆ·é‡å¤ç§’æ€åŒä¸€ä»¶å•†å“ã€‚è¿™æ ·å½“æœ‰é‡å¤è®°å½•å°±ä¼šå¿½ç•¥ï¼Œè¯­å¥æ‰§è¡Œåè¿”å›æ•°å­—0ã€‚</p><blockquote><p>å¯èƒ½å­˜åœ¨çš„é—®é¢˜</p></blockquote><p>å®‰è£…è§†é¢‘é‡Œçš„å»ºè¡¨è¿‡ç¨‹ï¼Œå¯èƒ½ä¼šå‡ºç°å»ºè¡¨å¤±è´¥çš„æƒ…å†µã€‚åŸå› æ˜¯å½“ä½ ç»™ä¸€ä¸ªtimestampè®¾ç½®ä¸ºon update current_timestampçš„æ—¶å€™ï¼Œå…¶ä»–çš„timestampå­—æ®µéœ€è¦æ˜¾å¼è®¾å®šdefaultå€¼ã€‚</p><p>ä½†æ˜¯å¦‚æœä½ æœ‰ä¸¤ä¸ªtimestampå­—æ®µï¼Œä½†æ˜¯åªæŠŠç¬¬ä¸€ä¸ªè®¾å®šä¸ºcurrent_timestampè€Œç¬¬äºŒä¸ªæ²¡æœ‰è®¾å®šé»˜è®¤å€¼ï¼ŒMySQLä¹Ÿèƒ½æˆåŠŸå»ºè¡¨,ä½†æ˜¯åè¿‡æ¥å°±ä¸è¡Œã€‚è¿™æ˜¯mysql5.5ç‰ˆæœ¬å¯¹timestampçš„å¤„ç†ã€‚</p><p>ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå°†create_timeæ”¾åˆ°start_timeå’Œend_timeçš„å‰é¢ï¼Œè¿˜æœ‰çš„mysqlç‰ˆæœ¬éœ€è¦å°†ä¸‰ä¸ªæ—¶é—´æˆ³éƒ½è®¾ç½®é»˜è®¤å€¼ã€‚</p><h3 id=32-åˆ›å»ºæ•°æ®è¡¨å¯¹åº”çš„å®ä½“ç±»>3.2 åˆ›å»ºæ•°æ®è¡¨å¯¹åº”çš„å®ä½“ç±»</h3><blockquote><p>åœ¨<code>src/main/java</code>åŒ…ä¸‹åˆ›å»ºcom.lewis.entityåŒ…ï¼Œæ¥ç€å»ºç«‹<code>Seckill</code>å®ä½“ç±»</p></blockquote><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span><span class=lnt>50
</span><span class=lnt>51
</span><span class=lnt>52
</span><span class=lnt>53
</span><span class=lnt>54
</span><span class=lnt>55
</span><span class=lnt>56
</span><span class=lnt>57
</span><span class=lnt>58
</span><span class=lnt>59
</span><span class=lnt>60
</span><span class=lnt>61
</span><span class=lnt>62
</span><span class=lnt>63
</span><span class=lnt>64
</span><span class=lnt>65
</span><span class=lnt>66
</span><span class=lnt>67
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-java data-lang=java>	<span class=kd>public</span> <span class=kd>class</span> <span class=nc>Seckill</span> <span class=o>{</span>
	    <span class=kd>private</span> <span class=n>Long</span> <span class=n>seckillId</span><span class=o>;</span>
	
	    <span class=kd>private</span> <span class=n>String</span> <span class=n>name</span><span class=o>;</span>
	
	    <span class=kd>private</span> <span class=n>Integer</span> <span class=n>number</span><span class=o>;</span>
	
	    <span class=kd>private</span> <span class=n>Date</span> <span class=n>createTime</span><span class=o>;</span>
	
	    <span class=kd>private</span> <span class=n>Date</span> <span class=n>startTime</span><span class=o>;</span>
	
	    <span class=kd>private</span> <span class=n>Date</span> <span class=n>endTime</span><span class=o>;</span>
	
	    <span class=kd>public</span> <span class=n>Long</span> <span class=nf>getSeckillId</span><span class=o>()</span> <span class=o>{</span>
	        <span class=k>return</span> <span class=n>seckillId</span><span class=o>;</span>
	    <span class=o>}</span>
	
	    <span class=kd>public</span> <span class=kt>void</span> <span class=nf>setSeckillId</span><span class=o>(</span><span class=n>Long</span> <span class=n>seckillId</span><span class=o>)</span> <span class=o>{</span>
	        <span class=k>this</span><span class=o>.</span><span class=na>seckillId</span> <span class=o>=</span> <span class=n>seckillId</span><span class=o>;</span>
	    <span class=o>}</span>
	
	    <span class=kd>public</span> <span class=n>String</span> <span class=nf>getName</span><span class=o>()</span> <span class=o>{</span>
	        <span class=k>return</span> <span class=n>name</span><span class=o>;</span>
	    <span class=o>}</span>
	
	    <span class=kd>public</span> <span class=kt>void</span> <span class=nf>setName</span><span class=o>(</span><span class=n>String</span> <span class=n>name</span><span class=o>)</span> <span class=o>{</span>
	        <span class=k>this</span><span class=o>.</span><span class=na>name</span> <span class=o>=</span> <span class=n>name</span> <span class=o>==</span> <span class=kc>null</span> <span class=o>?</span> <span class=kc>null</span> <span class=o>:</span> <span class=n>name</span><span class=o>.</span><span class=na>trim</span><span class=o>();</span>
	    <span class=o>}</span>
	
	    <span class=kd>public</span> <span class=n>Integer</span> <span class=nf>getNumber</span><span class=o>()</span> <span class=o>{</span>
	        <span class=k>return</span> <span class=n>number</span><span class=o>;</span>
	    <span class=o>}</span>
	
	    <span class=kd>public</span> <span class=kt>void</span> <span class=nf>setNumber</span><span class=o>(</span><span class=n>Integer</span> <span class=n>number</span><span class=o>)</span> <span class=o>{</span>
	        <span class=k>this</span><span class=o>.</span><span class=na>number</span> <span class=o>=</span> <span class=n>number</span><span class=o>;</span>
	    <span class=o>}</span>
	
	    <span class=kd>public</span> <span class=n>Date</span> <span class=nf>getCreateTime</span><span class=o>()</span> <span class=o>{</span>
	        <span class=k>return</span> <span class=n>createTime</span><span class=o>;</span>
	    <span class=o>}</span>
	
	    <span class=kd>public</span> <span class=kt>void</span> <span class=nf>setCreateTime</span><span class=o>(</span><span class=n>Date</span> <span class=n>createTime</span><span class=o>)</span> <span class=o>{</span>
	        <span class=k>this</span><span class=o>.</span><span class=na>createTime</span> <span class=o>=</span> <span class=n>createTime</span><span class=o>;</span>
	    <span class=o>}</span>
	
	    <span class=kd>public</span> <span class=n>Date</span> <span class=nf>getStartTime</span><span class=o>()</span> <span class=o>{</span>
	        <span class=k>return</span> <span class=n>startTime</span><span class=o>;</span>
	    <span class=o>}</span>
	
	    <span class=kd>public</span> <span class=kt>void</span> <span class=nf>setStartTime</span><span class=o>(</span><span class=n>Date</span> <span class=n>startTime</span><span class=o>)</span> <span class=o>{</span>
	        <span class=k>this</span><span class=o>.</span><span class=na>startTime</span> <span class=o>=</span> <span class=n>startTime</span><span class=o>;</span>
	    <span class=o>}</span>
	
	    <span class=kd>public</span> <span class=n>Date</span> <span class=nf>getEndTime</span><span class=o>()</span> <span class=o>{</span>
	        <span class=k>return</span> <span class=n>endTime</span><span class=o>;</span>
	    <span class=o>}</span>
	
	    <span class=kd>public</span> <span class=kt>void</span> <span class=nf>setEndTime</span><span class=o>(</span><span class=n>Date</span> <span class=n>endTime</span><span class=o>)</span> <span class=o>{</span>
	        <span class=k>this</span><span class=o>.</span><span class=na>endTime</span> <span class=o>=</span> <span class=n>endTime</span><span class=o>;</span>
	    <span class=o>}</span>
	
		<span class=nd>@Override</span>
		<span class=kd>public</span> <span class=n>String</span> <span class=nf>toString</span><span class=o>()</span> <span class=o>{</span>
			<span class=k>return</span> <span class=s>&#34;Seckill [seckillId=&#34;</span> <span class=o>+</span> <span class=n>seckillId</span> <span class=o>+</span> <span class=s>&#34;, name=&#34;</span> <span class=o>+</span> <span class=n>name</span> <span class=o>+</span> <span class=s>&#34;, number=&#34;</span> <span class=o>+</span> <span class=n>number</span> <span class=o>+</span> <span class=s>&#34;, createTime=&#34;</span> <span class=o>+</span> <span class=n>createTime</span> <span class=o>+</span> <span class=s>&#34;, startTime=&#34;</span>
					<span class=o>+</span> <span class=n>startTime</span> <span class=o>+</span> <span class=s>&#34;, endTime=&#34;</span> <span class=o>+</span> <span class=n>endTime</span> <span class=o>+</span> <span class=s>&#34;]&#34;</span><span class=o>;</span>
		<span class=o>}</span>
	<span class=o>}</span>
</code></pre></td></tr></table></div></div><blockquote><p>åœ¨com.lewis.entityåŒ…ä¸‹ï¼Œæ¥ç€å»ºç«‹<code>SuccessKilled</code>å®ä½“ç±»</p></blockquote><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span><span class=lnt>50
</span><span class=lnt>51
</span><span class=lnt>52
</span><span class=lnt>53
</span><span class=lnt>54
</span><span class=lnt>55
</span><span class=lnt>56
</span><span class=lnt>57
</span><span class=lnt>58
</span><span class=lnt>59
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-java data-lang=java>	<span class=kd>public</span> <span class=kd>class</span> <span class=nc>SuccessKilled</span> <span class=o>{</span>
		<span class=kd>private</span> <span class=n>Byte</span> <span class=n>state</span><span class=o>;</span>
	
		<span class=kd>private</span> <span class=n>Date</span> <span class=n>createTime</span><span class=o>;</span>
	
		<span class=kd>private</span> <span class=n>Long</span> <span class=n>seckillId</span><span class=o>;</span>
	
		<span class=kd>private</span> <span class=n>Long</span> <span class=n>userPhone</span><span class=o>;</span>
	
		<span class=c1>// å¤šå¯¹ä¸€,å› ä¸ºä¸€ä»¶å•†å“åœ¨åº“å­˜ä¸­æœ‰å¾ˆå¤šæ•°é‡ï¼Œå¯¹åº”çš„è´­ä¹°æ˜ç»†ä¹Ÿæœ‰å¾ˆå¤šã€‚
</span><span class=c1></span>		<span class=kd>private</span> <span class=n>Seckill</span> <span class=n>seckill</span><span class=o>;</span>
	
		<span class=kd>public</span> <span class=n>Seckill</span> <span class=nf>getSeckill</span><span class=o>()</span> <span class=o>{</span>
			<span class=k>return</span> <span class=n>seckill</span><span class=o>;</span>
		<span class=o>}</span>
	
		<span class=kd>public</span> <span class=kt>void</span> <span class=nf>setSeckill</span><span class=o>(</span><span class=n>Seckill</span> <span class=n>seckill</span><span class=o>)</span> <span class=o>{</span>
			<span class=k>this</span><span class=o>.</span><span class=na>seckill</span> <span class=o>=</span> <span class=n>seckill</span><span class=o>;</span>
		<span class=o>}</span>
	
		<span class=kd>public</span> <span class=n>Long</span> <span class=nf>getSeckillId</span><span class=o>()</span> <span class=o>{</span>
			<span class=k>return</span> <span class=n>seckillId</span><span class=o>;</span>
		<span class=o>}</span>
	
		<span class=kd>public</span> <span class=kt>void</span> <span class=nf>setSeckillId</span><span class=o>(</span><span class=n>Long</span> <span class=n>seckillId</span><span class=o>)</span> <span class=o>{</span>
			<span class=k>this</span><span class=o>.</span><span class=na>seckillId</span> <span class=o>=</span> <span class=n>seckillId</span><span class=o>;</span>
		<span class=o>}</span>
	
		<span class=kd>public</span> <span class=n>Long</span> <span class=nf>getUserPhone</span><span class=o>()</span> <span class=o>{</span>
			<span class=k>return</span> <span class=n>userPhone</span><span class=o>;</span>
		<span class=o>}</span>
	
		<span class=kd>public</span> <span class=kt>void</span> <span class=nf>setUserPhone</span><span class=o>(</span><span class=n>Long</span> <span class=n>userPhone</span><span class=o>)</span> <span class=o>{</span>
			<span class=k>this</span><span class=o>.</span><span class=na>userPhone</span> <span class=o>=</span> <span class=n>userPhone</span><span class=o>;</span>
		<span class=o>}</span>
	
		<span class=kd>public</span> <span class=n>Byte</span> <span class=nf>getState</span><span class=o>()</span> <span class=o>{</span>
			<span class=k>return</span> <span class=n>state</span><span class=o>;</span>
		<span class=o>}</span>
	
		<span class=kd>public</span> <span class=kt>void</span> <span class=nf>setState</span><span class=o>(</span><span class=n>Byte</span> <span class=n>state</span><span class=o>)</span> <span class=o>{</span>
			<span class=k>this</span><span class=o>.</span><span class=na>state</span> <span class=o>=</span> <span class=n>state</span><span class=o>;</span>
		<span class=o>}</span>
	
		<span class=kd>public</span> <span class=n>Date</span> <span class=nf>getCreateTime</span><span class=o>()</span> <span class=o>{</span>
			<span class=k>return</span> <span class=n>createTime</span><span class=o>;</span>
		<span class=o>}</span>
	
		<span class=kd>public</span> <span class=kt>void</span> <span class=nf>setCreateTime</span><span class=o>(</span><span class=n>Date</span> <span class=n>createTime</span><span class=o>)</span> <span class=o>{</span>
			<span class=k>this</span><span class=o>.</span><span class=na>createTime</span> <span class=o>=</span> <span class=n>createTime</span><span class=o>;</span>
		<span class=o>}</span>
	
		<span class=nd>@Override</span>
		<span class=kd>public</span> <span class=n>String</span> <span class=nf>toString</span><span class=o>()</span> <span class=o>{</span>
			<span class=k>return</span> <span class=s>&#34;SuccessKilled [state=&#34;</span> <span class=o>+</span> <span class=n>state</span> <span class=o>+</span> <span class=s>&#34;, createTime=&#34;</span> <span class=o>+</span> <span class=n>createTime</span> <span class=o>+</span> <span class=s>&#34;, seckillId=&#34;</span> <span class=o>+</span> <span class=n>seckillId</span>
					<span class=o>+</span> <span class=s>&#34;, userPhone=&#34;</span> <span class=o>+</span> <span class=n>userPhone</span> <span class=o>+</span> <span class=s>&#34;]&#34;</span><span class=o>;</span>
		<span class=o>}</span>
	
	<span class=o>}</span>
</code></pre></td></tr></table></div></div><h3 id=33-åˆ›å»ºå®ä½“ç±»å¯¹åº”çš„daoå±‚æ¥å£ä¹Ÿå°±æ˜¯mapperæ¥å£daoé’ˆå¯¹çš„æ˜¯å…·ä½“å®ä½“æ¥æ“ä½œçš„å®ä½“çš„å¢åˆ æ”¹æŸ¥>3.3 åˆ›å»ºå®ä½“ç±»å¯¹åº”çš„DAOå±‚æ¥å£ï¼ˆä¹Ÿå°±æ˜¯Mapperæ¥å£ï¼ŒDAOé’ˆå¯¹çš„æ˜¯å…·ä½“å®ä½“æ¥æ“ä½œçš„â€œå®ä½“çš„å¢åˆ æ”¹æŸ¥â€ï¼‰</h3><blockquote><p>åœ¨<code>src/main/java</code>ä¸‹å»ºç«‹<code>com.lewis.dao</code>åŒ…ï¼Œåœ¨åŒ…ä¸‹å»ºç«‹<code>SeckillDao</code>æ¥å£</p></blockquote><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-java data-lang=java>	<span class=kd>public</span> <span class=kd>interface</span> <span class=nc>SeckillDao</span> <span class=o>{</span>
	
		<span class=cm>/**
</span><span class=cm>		 * å‡åº“å­˜
</span><span class=cm>		 * 
</span><span class=cm>		 * @param seckillId
</span><span class=cm>		 * @param killTime
</span><span class=cm>		 * @return æ›´æ–°çš„è®°å½•è¡Œæ•°ï¼Œå¦‚æœè¿”å›å€¼&lt;1åˆ™è¡¨ç¤ºæ›´æ–°å¤±è´¥
</span><span class=cm>		 */</span>
		<span class=kt>int</span> <span class=nf>reduceNumber</span><span class=o>(</span><span class=nd>@Param</span><span class=o>(</span><span class=s>&#34;seckillId&#34;</span><span class=o>)</span> <span class=kt>long</span> <span class=n>seckillId</span><span class=o>,</span> <span class=nd>@Param</span><span class=o>(</span><span class=s>&#34;killTime&#34;</span><span class=o>)</span> <span class=n>Date</span> <span class=n>killTime</span><span class=o>);</span>
	
		<span class=cm>/**
</span><span class=cm>		 * æ ¹æ®idæŸ¥è¯¢ç§’æ€å•†å“
</span><span class=cm>		 * 
</span><span class=cm>		 * @param seckillId
</span><span class=cm>		 * @return
</span><span class=cm>		 */</span>
		<span class=n>Seckill</span> <span class=nf>queryById</span><span class=o>(</span><span class=kt>long</span> <span class=n>seckillId</span><span class=o>);</span>
	
		<span class=cm>/**
</span><span class=cm>		 * æ ¹æ®åç§»é‡æŸ¥è¯¢ç§’æ€å•†å“åˆ—è¡¨
</span><span class=cm>		 * 
</span><span class=cm>		 * @param offset
</span><span class=cm>		 * @param limit
</span><span class=cm>		 * @return
</span><span class=cm>		 */</span>
		<span class=n>List</span><span class=o>&lt;</span><span class=n>Seckill</span><span class=o>&gt;</span> <span class=nf>queryAll</span><span class=o>(</span><span class=nd>@Param</span><span class=o>(</span><span class=s>&#34;offset&#34;</span><span class=o>)</span> <span class=kt>int</span> <span class=n>offset</span><span class=o>,</span> <span class=nd>@Param</span><span class=o>(</span><span class=s>&#34;limit&#34;</span><span class=o>)</span> <span class=kt>int</span> <span class=n>limit</span><span class=o>);</span>
	<span class=o>}</span>
</code></pre></td></tr></table></div></div><blockquote><p>åœ¨<code>com.lewis.dao</code>åŒ…ä¸‹å»ºç«‹<code>SuccessKilledDao</code>æ¥å£</p></blockquote><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-java data-lang=java>	<span class=kd>public</span> <span class=kd>interface</span> <span class=nc>SuccessKilledDao</span> <span class=o>{</span>
	
		<span class=cm>/**
</span><span class=cm>		 * æ’å…¥è´­ä¹°æ˜ç»†ï¼Œå¯è¿‡æ»¤é‡å¤
</span><span class=cm>		 * 
</span><span class=cm>		 * @param seckillId
</span><span class=cm>		 * @param userphone
</span><span class=cm>		 * @return æ’å…¥çš„è¡Œæ•°ï¼Œå¦‚æœè¿”å›å€¼&lt;1åˆ™è¡¨ç¤ºæ’å…¥å¤±è´¥
</span><span class=cm>		 */</span>
		<span class=kt>int</span> <span class=nf>insertSuccessKilled</span><span class=o>(</span><span class=nd>@Param</span><span class=o>(</span><span class=s>&#34;seckillId&#34;</span><span class=o>)</span> <span class=kt>long</span> <span class=n>seckillId</span><span class=o>,</span> <span class=nd>@Param</span><span class=o>(</span><span class=s>&#34;userPhone&#34;</span><span class=o>)</span> <span class=kt>long</span> <span class=n>userPhone</span><span class=o>);</span>
	
		<span class=cm>/**
</span><span class=cm>		 * æ ¹æ®idæŸ¥è¯¢SuccessKilledå¹¶æºå¸¦ç§’æ€å•†å“å¯¹è±¡å®ä½“
</span><span class=cm>		 * 
</span><span class=cm>		 * @param seckillId
</span><span class=cm>		 * @return
</span><span class=cm>		 */</span>
		<span class=n>SuccessKilled</span> <span class=nf>queryByIdWithSeckill</span><span class=o>(</span><span class=nd>@Param</span><span class=o>(</span><span class=s>&#34;seckillId&#34;</span><span class=o>)</span> <span class=kt>long</span> <span class=n>seckillId</span><span class=o>,</span> <span class=nd>@Param</span><span class=o>(</span><span class=s>&#34;userPhone&#34;</span><span class=o>)</span> <span class=kt>long</span> <span class=n>userPhone</span><span class=o>);</span>
	<span class=o>}</span>
</code></pre></td></tr></table></div></div><blockquote><p>ä¸ºä»€ä¹ˆæœ‰çš„æ–¹æ³•å½¢å‚å‰æœ‰@Paramï¼Œæœ‰çš„å´æ²¡æœ‰ï¼Ÿ</p></blockquote><p>ä»ä¸Šé¢çš„ä»£ç å¯ä»¥å‘ç°ï¼Œå½“æ–¹æ³•çš„å½¢å‚åœ¨ä¸¤ä¸ªåŠä¸¤ä¸ªä»¥ä¸Šæ—¶ï¼Œéœ€è¦åœ¨å‚æ•°å‰åŠ ä¸Š@Paramï¼Œå¦‚æœä¸åŠ ä¸Šè¯¥æ³¨è§£ä¼šåœ¨ä¹‹åçš„æµ‹è¯•è¿è¡Œæ—¶æŠ¥é”™ã€‚è¿™æ˜¯Sunæä¾›çš„é»˜è®¤ç¼–è¯‘å™¨ï¼ˆjavacï¼‰åœ¨ç¼–è¯‘åçš„Classæ–‡ä»¶ä¸­ä¼šä¸¢å¤±å‚æ•°çš„å®é™…åç§°ï¼Œæ–¹æ³•ä¸­çš„å½¢å‚ä¼šå˜æˆæ— æ„ä¹‰çš„arg0ã€arg1ç­‰ï¼Œåœ¨åªæœ‰ä¸€ä¸ªå‚æ•°æ—¶å°±æ— æ‰€è°“ï¼Œä½†å½“å‚æ•°åœ¨ä¸¤ä¸ªå’Œä¸¤ä¸ªä»¥ä¸Šæ—¶ï¼Œä¼ å…¥æ–¹æ³•çš„å‚æ•°å°±ä¼šæ‰¾ä¸åˆ°å¯¹åº”çš„å½¢å‚ã€‚å› ä¸ºJavaå½¢å‚çš„é—®é¢˜ï¼Œæ‰€ä»¥åœ¨å¤šä¸ªåŸºæœ¬ç±»å‹å‚æ•°æ—¶éœ€è¦ç”¨@Paramæ³¨è§£åŒºåˆ†å¼€æ¥ã€‚</p><h3 id=34-åŸºäºmybatiså®ç°daoæ¥å£>3.4 åŸºäºMyBatiså®ç°DAOæ¥å£</h3><blockquote><p>MyBatisæ€ä¹ˆç”¨ï¼ŸSQLå†™åœ¨å“ªé‡Œï¼Ÿ</p></blockquote><p>Mybatisæœ‰ä¸¤ç§æä¾›SQLçš„æ–¹å¼ï¼šXMLæä¾›SQLã€æ³¨è§£æä¾›SQLï¼ˆæ³¨è§£æ˜¯java5.0ä¹‹åæä¾›çš„ä¸€ä¸ªæ–°ç‰¹æ€§ï¼‰ã€‚</p><p>å¯¹äºå®é™…çš„ä½¿ç”¨ä¸­å»ºè®®ä½¿ç”¨XMLæ–‡ä»¶çš„æ–¹å¼æä¾›SQLã€‚å¦‚æœé€šè¿‡æ³¨è§£çš„æ–¹å¼æä¾›SQLï¼Œç”±äºæ³¨è§£æœ¬èº«è¿˜æ˜¯javaæºç ï¼Œè¿™å¯¹äºä¿®æ”¹å’Œè°ƒæ•´SQLå…¶å®æ˜¯éå¸¸ä¸æ–¹ä¾¿çš„ï¼Œä¸€æ ·éœ€è¦é‡æ–°ç¼–è¯‘ç±»ï¼Œå½“æˆ‘ä»¬å†™å¤æ‚çš„SQLå°¤å…¶æ‹¼æ¥é€»è¾‘æ—¶ï¼Œæ³¨è§£å¤„ç†èµ·æ¥å°±ä¼šéå¸¸ç¹çã€‚è€ŒXMLæä¾›äº†å¾ˆå¤šçš„SQLæ‹¼æ¥å’Œå¤„ç†é€»è¾‘çš„æ ‡ç­¾ï¼Œå¯ä»¥éå¸¸æ–¹ä¾¿çš„å¸®æˆ‘ä»¬å»åšå°è£…ã€‚</p><blockquote><p>å¦‚ä½•å»å®ç°DAOæ¥å£ï¼Ÿ</p></blockquote><p>Mapperè‡ªåŠ¨å®ç°DAOï¼ˆä¹Ÿå°±æ˜¯DAOåªéœ€è¦è®¾è®¡æ¥å£ï¼Œä¸éœ€è¦å»å†™å®ç°ç±»ï¼ŒMyBatisçŸ¥é“æˆ‘ä»¬çš„å‚æ•°ã€è¿”å›ç±»å‹æ˜¯ä»€ä¹ˆï¼ŒåŒæ—¶ä¹Ÿæœ‰SQLæ–‡ä»¶ï¼Œå®ƒå¯ä»¥è‡ªåŠ¨å¸®æˆ‘ä»¬ç”Ÿæˆæ¥å£çš„å®ç°ç±»æ¥å¸®æˆ‘ä»¬æ‰§è¡Œå‚æ•°çš„å°è£…ï¼Œæ‰§è¡ŒSQLï¼ŒæŠŠæˆ‘ä»¬çš„è¿”å›ç»“æœé›†å°è£…æˆæˆ‘ä»¬æƒ³è¦çš„ç±»å‹ï¼‰ ã€‚</p><p>ç¬¬äºŒç§æ˜¯é€šè¿‡APIç¼–ç¨‹æ–¹å¼å®ç°DAOæ¥å£ï¼ˆMyBatisé€šè¿‡ç»™æˆ‘ä»¬æä¾›äº†éå¸¸å¤šçš„APIï¼Œè·Ÿå…¶ä»–çš„ORMå’ŒJDBCå¾ˆåƒï¼‰</p><p>åœ¨å®é™…å¼€å‘ä¸­å»ºè®®ä½¿ç”¨Mapperè‡ªåŠ¨å®ç°DAOï¼Œè¿™æ ·å¯ä»¥ç›´æ¥åªå…³æ³¨SQLå¦‚ä½•ç¼–å†™ï¼Œå¦‚ä½•å»è®¾è®¡DAOæ¥å£ï¼Œå¸®æˆ‘ä»¬èŠ‚çœäº†å¾ˆå¤šçš„ç»´æŠ¤ç¨‹åºï¼Œæ‰€æœ‰çš„å®ç°éƒ½æ˜¯MyBatisè‡ªåŠ¨å®Œæˆã€‚</p><blockquote><p>åˆ›å»ºä¸€ä¸ªç›®å½•å­˜æ”¾Mybatisçš„SQLæ˜ å°„</p></blockquote><p>æŒ‰ç…§Mavençš„è§„èŒƒï¼ŒSQLæ˜ å°„æ–‡ä»¶åº”è¯¥æ”¾åœ¨<code>src/main/resources</code>åŒ…ä¸‹ï¼Œåœ¨è¯¥åŒ…ä¸‹å»ºç«‹<code>mapper</code>ç›®å½•ï¼Œç”¨æ¥å­˜æ”¾æ˜ å°„DAOæ¥å£çš„XMLæ–‡ä»¶ã€‚è¿™æ ·Mavenåœ¨ç¼–è¯‘æ—¶å°±ä¼šè‡ªåŠ¨å°†<code>src/main/resources</code>ä¸‹çš„è¿™äº›é…ç½®æ–‡ä»¶ç¼–è¯‘è¿›æ¥ã€‚</p><p>æˆ‘ä»¬ä¹Ÿå¯ä»¥æŒ‰ç…§åŸæœ¬çš„ä¹ æƒ¯ï¼Œåœ¨<code>src/main/java</code>ä¸‹å»ºç«‹<code>com.lewis.mapper</code>åŒ…ï¼Œå°†è¿™äº›SQLæ˜ å°„å­˜æ”¾åˆ°è¿™é‡Œã€‚ç”±äºMavené»˜è®¤ä¸ä¼šç¼–è¯‘<code>src/main/java</code>ä¸‹é™¤æºç ä»¥å¤–çš„æ–‡ä»¶ï¼Œæ‰€ä»¥éœ€è¦åœ¨pom.xmlä¸­è¿›è¡Œé¢å¤–çš„é…ç½®ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-xml data-lang=xml>	<span class=nt>&lt;build&gt;</span>
		<span class=nt>&lt;finalName&gt;</span>seckill<span class=nt>&lt;/finalName&gt;</span>
		<span class=nt>&lt;resources&gt;</span>
			<span class=c>&lt;!--æ‰“åŒ…æ—¶åŒ…å«æºä»£ç åŒ…ä¸‹çš„èµ„æºæ–‡ä»¶ï¼Œé»˜è®¤æƒ…å†µä¸‹åªä¼šæ‰“åŒ…src/main/javaä¸‹çš„æºä»£ç  --&gt;</span>
			<span class=nt>&lt;resource&gt;</span>
				<span class=nt>&lt;directory&gt;</span>src/main/java<span class=nt>&lt;/directory&gt;</span>
				<span class=nt>&lt;includes&gt;</span>
					<span class=nt>&lt;include&gt;</span>**/*.xml<span class=nt>&lt;/include&gt;</span>
				<span class=nt>&lt;/includes&gt;</span>
				<span class=nt>&lt;filtering&gt;</span>false<span class=nt>&lt;/filtering&gt;</span>
			<span class=nt>&lt;/resource&gt;</span>
			<span class=nt>&lt;resource&gt;</span>
				<span class=nt>&lt;directory&gt;</span>src/main/resources<span class=nt>&lt;/directory&gt;</span>
			<span class=nt>&lt;/resource&gt;</span>
		<span class=nt>&lt;/resources&gt;</span>
	<span class=nt>&lt;/build&gt;</span>
</code></pre></td></tr></table></div></div><p>åœ¨æœ¬é¡¹ç›®ä¸­ï¼Œæˆ‘æ˜¯é‡‡ç”¨çš„ç¬¬äºŒç§æ–¹å¼å­˜æ”¾Mybatisçš„SQLæ˜ å°„ã€‚ï¼ˆåªæ˜¯å°†æ˜ å°„DAOçš„mapperæ–‡ä»¶æ”¾åœ¨javaåŒ…ä¸‹ï¼Œå…¶ä»–çš„å…³äºSpringã€MyBatisç­‰çš„é…ç½®æ–‡ä»¶è¿˜æ˜¯æ”¾åœ¨resourcesåŒ…ä¸‹ï¼‰</p><blockquote><p>åœ¨<code>src/main/resources</code>ç›®å½•ä¸‹é…ç½®mybatis-config.xmlï¼ˆé…ç½®MyBatisçš„å…¨å±€å±æ€§ï¼‰</p></blockquote><p>æ‰“å¼€MyBatisçš„<a href=http://www.mybatis.org/mybatis-3/zh/index.html target=_blank rel="noopener noreffer">å®˜æ–¹æ–‡æ¡£</a>ï¼ˆMyBatisçš„å®˜æ–¹æ–‡æ¡£åšçš„éå¸¸å‹å¥½ï¼Œæä¾›äº†éå¸¸å¤šç‰ˆæœ¬çš„å›½é™…åŒ–æ”¯æŒï¼‰ï¼Œé€‰æ‹©<code>å…¥é—¨</code>ï¼Œæ‰¾åˆ°MyBatiså…¨å±€é…ç½®ï¼Œé‡Œé¢æœ‰XMLçš„è§„èŒƒï¼ˆXMLçš„æ ‡ç­¾çº¦æŸdtdæ–‡ä»¶ï¼‰ï¼Œæ‹·å…¥åˆ°é¡¹ç›®çš„MyBatiså…¨å±€é…ç½®æ–‡ä»¶ä¸­ï¼Œå¼€å§‹é…ç½®MyBatisï¼Œå¦‚ä¸‹ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-xml data-lang=xml>	<span class=cp>&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34; ?&gt;</span>
	<span class=cp>&lt;!DOCTYPE configuration
</span><span class=cp>	        PUBLIC &#34;-//mybatis.org//DTD Config 3.0//EN&#34;
</span><span class=cp>	        &#34;http://mybatis.org/dtd/mybatis-3-config.dtd&#34;&gt;</span>
	<span class=nt>&lt;configuration&gt;</span>
		<span class=c>&lt;!--é…ç½®å…¨å±€å±æ€§ --&gt;</span>
		<span class=nt>&lt;settings&gt;</span>
			<span class=c>&lt;!--ä½¿ç”¨jdbcçš„getGeneratekeysè·å–è‡ªå¢ä¸»é”®å€¼ï¼Œé»˜è®¤æ˜¯false
</span><span class=c>				å½“inertä¸€æ¡è®°å½•æ—¶æˆ‘ä»¬æ˜¯ä¸æ’å…¥idçš„ï¼Œidæ˜¯é€šè¿‡è‡ªå¢å»èµ‹å€¼çš„
</span><span class=c>				å½“æ’å…¥å®Œåæƒ³å¾—åˆ°è¯¥æ’å…¥è®°å½•çš„idæ—¶å¯ä»¥è°ƒç”¨jdbcçš„getGeneratekeys --&gt;</span>
			<span class=nt>&lt;setting</span> <span class=na>name=</span><span class=s>&#34;useGeneratedKeys&#34;</span> <span class=na>value=</span><span class=s>&#34;true&#34;</span> <span class=nt>/&gt;</span>
			
			<span class=c>&lt;!--ä½¿ç”¨åˆ—åˆ«åæ›¿æ¢åˆ—å é»˜è®¤å€¼ä¸ºtrueï¼ˆå¯ä»¥ä¸ç”¨å†™å‡ºæ¥ï¼Œè¿™é‡Œå†™å‡ºæ¥åªæ˜¯ä¸ºäº†è®²è§£è¯¥é…ç½®çš„ä½œç”¨ï¼‰
</span><span class=c>				select name as title(å®ä½“ä¸­çš„å±æ€§åæ˜¯title) form table; 
</span><span class=c>				å¼€å¯åmybatisä¼šè‡ªåŠ¨å¸®æˆ‘ä»¬æŠŠè¡¨ä¸­nameçš„å€¼èµ‹åˆ°å¯¹åº”å®ä½“çš„titleå±æ€§ä¸­ --&gt;</span>
			<span class=nt>&lt;setting</span> <span class=na>name=</span><span class=s>&#34;useColumnLabel&#34;</span> <span class=na>value=</span><span class=s>&#34;true&#34;</span> <span class=nt>/&gt;</span>
	
			<span class=c>&lt;!--å¼€å¯é©¼å³°å‘½åè½¬æ¢Table:create_timeåˆ° Entity(createTime) --&gt;</span>
			<span class=nt>&lt;setting</span> <span class=na>name=</span><span class=s>&#34;mapUnderscoreToCamelCase&#34;</span> <span class=na>value=</span><span class=s>&#34;true&#34;</span> <span class=nt>/&gt;</span>
		<span class=nt>&lt;/settings&gt;</span>
	
	<span class=nt>&lt;/configuration&gt;</span>
</code></pre></td></tr></table></div></div><blockquote><p>åœ¨<code>src/main/java</code>ç›®å½•ä¸‹çš„<code>com.lewis.mapper</code>åŒ…é‡Œåˆ›å»ºSeckillDao.xml</p></blockquote><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-xml data-lang=xml>	<span class=cp>&lt;!DOCTYPE mapper
</span><span class=cp>	        PUBLIC &#34;-//mybatis.org//DTD Mapper 3.0//EN&#34;
</span><span class=cp>	        &#34;http://mybatis.org/dtd/mybatis-3-mapper.dtd&#34;&gt;</span>
	<span class=c>&lt;!-- namespace:æŒ‡å®šä¸ºå“ªä¸ªæ¥å£æä¾›é…ç½® --&gt;</span> 
	<span class=nt>&lt;mapper</span> <span class=na>namespace=</span><span class=s>&#34;com.lewis.dao.SeckillDao&#34;</span><span class=nt>&gt;</span>
		<span class=c>&lt;!--ç›®çš„:ä¸ºdaoæ¥å£æ–¹æ³•æä¾›sqlè¯­å¥é…ç½®ï¼Œ å³é’ˆå¯¹daoæ¥å£ä¸­çš„æ–¹æ³•ç¼–å†™æˆ‘ä»¬çš„sqlè¯­å¥ --&gt;</span>
	
		<span class=c>&lt;!-- int reduceNumber(long seckillId, Date killTime);--&gt;</span>
		<span class=c>&lt;!-- è¿™é‡Œidå¿…é¡»å’Œå¯¹åº”çš„DAOæ¥å£çš„æ–¹æ³•åä¸€æ · --&gt;</span>
		<span class=nt>&lt;update</span> <span class=na>id=</span><span class=s>&#34;reduceNumber&#34;</span><span class=nt>&gt;</span>
			UPDATE seckill
			SET number = number-1
			WHERE seckill_id=#{seckillId}
			AND start_time <span class=cp>&lt;![CDATA[ &lt;= ]]&gt;</span>
			#{killTime}
			AND end_time &gt;= #{killTime}
			AND number &gt; 0;
		<span class=nt>&lt;/update&gt;</span>
	
		 <span class=c>&lt;!-- parameterType:ä½¿ç”¨åˆ°çš„å‚æ•°ç±»å‹
</span><span class=c>			æ­£å¸¸æƒ…å†µjavaè¡¨ç¤ºä¸€ä¸ªç±»å‹çš„åŒ…å+ç±»åï¼Œè¿™ç›´æ¥å†™ç±»åï¼Œå› ä¸ºåé¢æœ‰ä¸€ä¸ªé…ç½®å¯ä»¥ç®€åŒ–å†™åŒ…åçš„è¿‡ç¨‹ --&gt;</span>
		<span class=nt>&lt;select</span> <span class=na>id=</span><span class=s>&#34;queryById&#34;</span> <span class=na>resultType=</span><span class=s>&#34;Seckill&#34;</span> <span class=na>parameterType=</span><span class=s>&#34;long&#34;</span><span class=nt>&gt;</span>
			<span class=c>&lt;!-- å¯ä»¥é€šè¿‡åˆ«åçš„æ–¹å¼åˆ—æ˜åˆ°javaåçš„è½¬æ¢ï¼Œå¦‚æœå¼€å¯äº†é©¼å³°å‘½åæ³•å°±å¯ä»¥ä¸ç”¨è¿™ä¹ˆå†™äº† 
</span><span class=c>	       		 select seckill_id as seckillId
</span><span class=c>	        --&gt;</span>
			SELECT seckill_id,name,number,create_time,start_time,end_time
			FROM seckill
			WHERE seckill_id=#{seckillId}
		<span class=nt>&lt;/select&gt;</span>
	
		<span class=nt>&lt;select</span> <span class=na>id=</span><span class=s>&#34;queryAll&#34;</span> <span class=na>resultType=</span><span class=s>&#34;Seckill&#34;</span><span class=nt>&gt;</span>
			SELECT *
			FROM seckill
			ORDER BY create_time DESC
			limit #{offset},#{limit}
		<span class=nt>&lt;/select&gt;</span>
	
	<span class=nt>&lt;/mapper&gt;</span>
</code></pre></td></tr></table></div></div><blockquote><p>åœ¨<code>src/main/java</code>ç›®å½•ä¸‹çš„<code>com.lewis.mapper</code>åŒ…é‡Œåˆ›å»ºSuccessKilledDao.xml</p></blockquote><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-xml data-lang=xml>	<span class=cp>&lt;!DOCTYPE mapper
</span><span class=cp>	        PUBLIC &#34;-//mybatis.org//DTD Mapper 3.0//EN&#34;
</span><span class=cp>	        &#34;http://mybatis.org/dtd/mybatis-3-mapper.dtd&#34;&gt;</span>
	<span class=nt>&lt;mapper</span> <span class=na>namespace=</span><span class=s>&#34;com.lewis.dao.SuccessKilledDao&#34;</span><span class=nt>&gt;</span>
	
	    <span class=nt>&lt;insert</span> <span class=na>id=</span><span class=s>&#34;insertSuccessKilled&#34;</span><span class=nt>&gt;</span>
	        <span class=c>&lt;!--å½“å‡ºç°ä¸»é”®å†²çªæ—¶(å³é‡å¤ç§’æ€æ—¶)ï¼Œä¼šæŠ¥é”™;ä¸æƒ³è®©ç¨‹åºæŠ¥é”™ï¼ŒåŠ å…¥ignore--&gt;</span>
	        INSERT ignore INTO success_killed(seckill_id,user_phone,state)
	        VALUES (#{seckillId},#{userPhone},0)
	    <span class=nt>&lt;/insert&gt;</span>
	
	    <span class=nt>&lt;select</span> <span class=na>id=</span><span class=s>&#34;queryByIdWithSeckill&#34;</span> <span class=na>resultType=</span><span class=s>&#34;SuccessKilled&#34;</span><span class=nt>&gt;</span>
	
	        <span class=c>&lt;!--æ ¹æ®seckillIdæŸ¥è¯¢SuccessKilledå¯¹è±¡ï¼Œå¹¶æºå¸¦Seckillå¯¹è±¡--&gt;</span>
	        <span class=c>&lt;!--å¦‚ä½•å‘Šè¯‰mybatisæŠŠç»“æœæ˜ å°„åˆ°SuccessKillå±æ€§åŒæ—¶æ˜ å°„åˆ°Seckillå±æ€§--&gt;</span>
	        <span class=c>&lt;!--å¯ä»¥è‡ªç”±æ§åˆ¶SQLè¯­å¥--&gt;</span>
	
	        SELECT
	            sk.seckill_id,
	            sk.user_phone,
	            sk.create_time,
	            sk.state,
	            s.seckill_id &#34;seckill.seckill_id&#34;,
	            s.name &#34;seckill.name&#34;,
	            s.number &#34;seckill.number&#34;,
	            s.start_time &#34;seckill.start_time&#34;,
	            s.end_time &#34;seckill.end_time&#34;,
	            s.create_time &#34;seckill.create_time&#34;
	        FROM success_killed sk
	        INNER JOIN seckill s ON sk.seckill_id=s.seckill_id
	        WHERE sk.seckill_id=#{seckillId} and sk.user_phone=#{userPhone}
	    <span class=nt>&lt;/select&gt;</span>
	
	<span class=nt>&lt;/mapper&gt;</span>
</code></pre></td></tr></table></div></div><p>æ³¨ï¼šä¸Šé¢çš„s.seckill_id â€œseckill.seckill_idâ€è¡¨ç¤ºs.seckill_idè¿™ä¸€åˆ—çš„æ•°æ®æ˜¯Success_killedå®ä½“ç±»é‡Œçš„seckillå±æ€§é‡Œçš„seckill_idå±æ€§ï¼Œæ˜¯ä¸€ä¸ªçº§è”çš„è¿‡ç¨‹ï¼Œä½¿ç”¨çš„å°±æ˜¯åˆ«ååªæ˜¯å¿½ç•¥äº†aså…³é”®å­—ï¼Œåˆ«åè¦åŠ ä¸ŠåŒå¼•å·ã€‚</p><blockquote><p>ä¸ºä»€ä¹ˆè¦ç”¨<code>&lt;![CDATA[]]></code>æŠŠ<code>&lt;=</code>ç»™åŒ…èµ·æ¥</p></blockquote><p>CDATAæŒ‡çš„æ˜¯ä¸åº”ç”± XML è§£æå™¨è¿›è¡Œè§£æçš„æ–‡æœ¬æ•°æ®ï¼Œåœ¨XMLå…ƒç´ ä¸­ï¼Œ<code>&lt;</code>å’Œ<code>&</code>æ˜¯éæ³•çš„ï¼š</p><ul><li><code>&lt;</code>ä¼šäº§ç”Ÿé”™è¯¯ï¼Œå› ä¸ºè§£æå™¨ä¼šæŠŠè¯¥å­—ç¬¦è§£é‡Šä¸ºæ–°å…ƒç´ çš„å¼€å§‹ã€‚</li><li><code>&</code>ä¹Ÿä¼šäº§ç”Ÿé”™è¯¯ï¼Œå› ä¸ºè§£æå™¨ä¼šæŠŠè¯¥å­—ç¬¦è§£é‡Šä¸ºå­—ç¬¦å®ä½“çš„å¼€å§‹ã€‚ï¼ˆå­—ç¬¦å®ä½“ï¼šæ¯”å¦‚<code>&amp;nbsp;</code>è¡¨ç¤ºä¸€ä¸ªç©ºæ ¼ï¼‰</li></ul><p>æ‰€ä»¥åœ¨è¿™é‡Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨<code>&lt;![CDATA[ &lt;= ]]></code>æ¥å‘Šè¯‰XML<code>&lt;=</code>ä¸æ˜¯XMLçš„è¯­è¨€ã€‚</p><h3 id=35-æ•´åˆspringå’Œmybatis>3.5 æ•´åˆSpringå’ŒMyBatis</h3><p>åœ¨<code>resources</code>ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªæ–°çš„ç›®å½•<code>spring</code>(å­˜æ”¾æ‰€æœ‰Springç›¸å…³çš„é…ç½®)</p><blockquote><p>åœ¨resourcesåŒ…ä¸‹åˆ›å»ºjdbc.propertiesï¼Œç”¨äºé…ç½®æ•°æ®åº“çš„è¿æ¥ä¿¡æ¯</p></blockquote><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-fallback data-lang=fallback>	driver=com.mysql.jdbc.Driver
	url=jdbc:mysql://localhost:3306/seckill?useUnicode=true&amp;characterEncoding=utf-8
	jdbc.username=root
	password=123
</code></pre></td></tr></table></div></div><blockquote><p>åœ¨<code>resources/spring</code>ç›®å½•ä¸‹åˆ›å»ºSpringå…³äºDAOå±‚çš„é…ç½®æ–‡ä»¶spring-dao.xml</p></blockquote><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span><span class=lnt>50
</span><span class=lnt>51
</span><span class=lnt>52
</span><span class=lnt>53
</span><span class=lnt>54
</span><span class=lnt>55
</span><span class=lnt>56
</span><span class=lnt>57
</span><span class=lnt>58
</span><span class=lnt>59
</span><span class=lnt>60
</span><span class=lnt>61
</span><span class=lnt>62
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-xml data-lang=xml>	<span class=cp>&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;</span>
	<span class=nt>&lt;beans</span> <span class=na>xmlns=</span><span class=s>&#34;http://www.springframework.org/schema/beans&#34;</span>
	       <span class=na>xmlns:xsi=</span><span class=s>&#34;http://www.w3.org/2001/XMLSchema-instance&#34;</span>
	       <span class=na>xmlns:context=</span><span class=s>&#34;http://www.springframework.org/schema/context&#34;</span>
	       <span class=na>xsi:schemaLocation=</span><span class=s>&#34;http://www.springframework.org/schema/beans
</span><span class=s>	        http://www.springframework.org/schema/beans/spring-beans.xsd
</span><span class=s>	        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd&#34;</span><span class=nt>&gt;</span>
	
	    <span class=c>&lt;!--é…ç½®æ•´åˆmybatisè¿‡ç¨‹
</span><span class=c>	    1.é…ç½®æ•°æ®åº“ç›¸å…³å‚æ•°--&gt;</span>
	    <span class=nt>&lt;context:property-placeholder</span> <span class=na>location=</span><span class=s>&#34;classpath:jdbc.properties&#34;</span><span class=nt>/&gt;</span>
	
	    <span class=c>&lt;!--2.æ•°æ®åº“è¿æ¥æ± --&gt;</span>
	    <span class=nt>&lt;bean</span> <span class=na>id=</span><span class=s>&#34;dataSource&#34;</span> <span class=na>class=</span><span class=s>&#34;com.mchange.v2.c3p0.ComboPooledDataSource&#34;</span><span class=nt>&gt;</span>
	        <span class=c>&lt;!--é…ç½®è¿æ¥æ± å±æ€§--&gt;</span>
	        <span class=nt>&lt;property</span> <span class=na>name=</span><span class=s>&#34;driverClass&#34;</span> <span class=na>value=</span><span class=s>&#34;${driver}&#34;</span> <span class=nt>/&gt;</span>
	
	        <span class=c>&lt;!-- åŸºæœ¬å±æ€§ urlã€userã€password --&gt;</span>
	        <span class=nt>&lt;property</span> <span class=na>name=</span><span class=s>&#34;jdbcUrl&#34;</span> <span class=na>value=</span><span class=s>&#34;${url}&#34;</span> <span class=nt>/&gt;</span>
	        <span class=nt>&lt;property</span> <span class=na>name=</span><span class=s>&#34;user&#34;</span> <span class=na>value=</span><span class=s>&#34;${jdbc.username}&#34;</span> <span class=nt>/&gt;</span>
	        <span class=nt>&lt;property</span> <span class=na>name=</span><span class=s>&#34;password&#34;</span> <span class=na>value=</span><span class=s>&#34;${password}&#34;</span> <span class=nt>/&gt;</span>
	
	        <span class=c>&lt;!--c3p0ç§æœ‰å±æ€§--&gt;</span>
	        <span class=nt>&lt;property</span> <span class=na>name=</span><span class=s>&#34;maxPoolSize&#34;</span> <span class=na>value=</span><span class=s>&#34;30&#34;</span><span class=nt>/&gt;</span>
	        <span class=nt>&lt;property</span> <span class=na>name=</span><span class=s>&#34;minPoolSize&#34;</span> <span class=na>value=</span><span class=s>&#34;10&#34;</span><span class=nt>/&gt;</span>
	        <span class=c>&lt;!--å…³é—­è¿æ¥åä¸è‡ªåŠ¨commit--&gt;</span>
	        <span class=nt>&lt;property</span> <span class=na>name=</span><span class=s>&#34;autoCommitOnClose&#34;</span> <span class=na>value=</span><span class=s>&#34;false&#34;</span><span class=nt>/&gt;</span>
	
	        <span class=c>&lt;!--è·å–è¿æ¥è¶…æ—¶æ—¶é—´--&gt;</span>
	        <span class=nt>&lt;property</span> <span class=na>name=</span><span class=s>&#34;checkoutTimeout&#34;</span> <span class=na>value=</span><span class=s>&#34;1000&#34;</span><span class=nt>/&gt;</span>
	        <span class=c>&lt;!--å½“è·å–è¿æ¥å¤±è´¥é‡è¯•æ¬¡æ•°--&gt;</span>
	        <span class=nt>&lt;property</span> <span class=na>name=</span><span class=s>&#34;acquireRetryAttempts&#34;</span> <span class=na>value=</span><span class=s>&#34;2&#34;</span><span class=nt>/&gt;</span>
	    <span class=nt>&lt;/bean&gt;</span>
	
	    <span class=c>&lt;!--çº¦å®šå¤§äºé…ç½®--&gt;</span>
	    <span class=c>&lt;!--ï¼“.é…ç½®SqlSessionFactoryå¯¹è±¡--&gt;</span>
	    <span class=nt>&lt;bean</span> <span class=na>id=</span><span class=s>&#34;sqlSessionFactory&#34;</span> <span class=na>class=</span><span class=s>&#34;org.mybatis.spring.SqlSessionFactoryBean&#34;</span><span class=nt>&gt;</span>
	        <span class=c>&lt;!--å¾€ä¸‹æ‰æ˜¯mybatiså’ŒspringçœŸæ­£æ•´åˆçš„é…ç½®--&gt;</span>
	        <span class=c>&lt;!--æ³¨å…¥æ•°æ®åº“è¿æ¥æ± --&gt;</span>
	        <span class=nt>&lt;property</span> <span class=na>name=</span><span class=s>&#34;dataSource&#34;</span> <span class=na>ref=</span><span class=s>&#34;dataSource&#34;</span><span class=nt>/&gt;</span>
	        <span class=c>&lt;!--é…ç½®mybatiså…¨å±€é…ç½®æ–‡ä»¶:mybatis-config.xml--&gt;</span>
	        <span class=nt>&lt;property</span> <span class=na>name=</span><span class=s>&#34;configLocation&#34;</span> <span class=na>value=</span><span class=s>&#34;classpath:mybatis-config.xml&#34;</span><span class=nt>/&gt;</span>
	        <span class=c>&lt;!--æ‰«æentityåŒ…,ä½¿ç”¨åˆ«å,å¤šä¸ªç”¨;éš”å¼€--&gt;</span>
	        <span class=nt>&lt;property</span> <span class=na>name=</span><span class=s>&#34;typeAliasesPackage&#34;</span> <span class=na>value=</span><span class=s>&#34;com.lewis.entity&#34;</span><span class=nt>/&gt;</span>
	        <span class=c>&lt;!--æ‰«æsqlé…ç½®æ–‡ä»¶:mapperéœ€è¦çš„xmlæ–‡ä»¶--&gt;</span>
	        <span class=nt>&lt;property</span> <span class=na>name=</span><span class=s>&#34;mapperLocations&#34;</span> <span class=na>value=</span><span class=s>&#34;classpath:com/lewis/mapper/*.xml&#34;</span><span class=nt>/&gt;</span>
	    <span class=nt>&lt;/bean&gt;</span>
	
	    <span class=c>&lt;!--ï¼”:é…ç½®æ‰«æDaoæ¥å£åŒ…,åŠ¨æ€å®ç°DAOæ¥å£,æ³¨å…¥åˆ°springå®¹å™¨--&gt;</span>
	    <span class=nt>&lt;bean</span> <span class=na>class=</span><span class=s>&#34;org.mybatis.spring.mapper.MapperScannerConfigurer&#34;</span><span class=nt>&gt;</span>
	        <span class=c>&lt;!--æ³¨å…¥SqlSessionFactory--&gt;</span>
	        <span class=nt>&lt;property</span> <span class=na>name=</span><span class=s>&#34;sqlSessionFactoryBeanName&#34;</span> <span class=na>value=</span><span class=s>&#34;sqlSessionFactory&#34;</span><span class=nt>/&gt;</span>
	        <span class=c>&lt;!-- ç»™å‡ºéœ€è¦æ‰«æçš„Daoæ¥å£--&gt;</span>
	        <span class=nt>&lt;property</span> <span class=na>name=</span><span class=s>&#34;basePackage&#34;</span> <span class=na>value=</span><span class=s>&#34;com.lewis.dao&#34;</span><span class=nt>/&gt;</span>
	    <span class=nt>&lt;/bean&gt;</span>
	
	    <span class=c>&lt;!--redisDao--&gt;</span>
	   <span class=c>&lt;!--  &lt;bean id=&#34;redisDao&#34; class=&#34;com.lewis.dao.cache.RedisDao&#34;&gt;
</span><span class=c>	        &lt;constructor-arg index=&#34;0&#34; value=&#34;localhost&#34;/&gt;
</span><span class=c>	        &lt;constructor-arg index=&#34;1&#34; value=&#34;6379&#34;/&gt;
</span><span class=c>	    &lt;/bean&gt; --&gt;</span>
	<span class=nt>&lt;/beans&gt;</span>
</code></pre></td></tr></table></div></div><blockquote><p>å…³äºæ•°æ®åº“è¿æ¥æ± çš„é…ç½®å¯èƒ½å‡ºç°çš„é—®é¢˜</p></blockquote><p>åœ¨jdbc.propertiesé‡Œä½¿ç”¨çš„æ˜¯<code>jdbc.username</code>ï¼Œè€Œä¸æ˜¯<code>username</code>æˆ–è€…<code>name</code>ï¼Œè¿™æ˜¯å› ä¸ºåä¸¤ä¸ªå±æ€§åå¯èƒ½ä¼šä¸å…¨å±€å˜é‡å†²çªï¼Œå¯¼è‡´è¿æ¥çš„æ•°æ®åº“ç”¨æˆ·åå˜æˆäº†ç”µè„‘çš„ç”¨æˆ·åï¼Œæ‰€ä»¥ä½¿ç”¨äº†<code>jdbc.username</code>ã€‚</p><blockquote><p>ç›¸å…³é“¾æ¥</p></blockquote><p>å…³äºSpringçš„XMLé…ç½®æ–‡ä»¶çš„å¤´éƒ¨æ–‡ä»¶çš„è¯´æ˜å¯ä»¥å‚è€ƒ<a href=http://blog.csdn.net/lewky_liu/article/details/78157747 target=_blank rel="noopener noreffer">è¿™ç¯‡æ–‡ç« </a></p><h3 id=36-daoå±‚å•å…ƒæµ‹è¯•>3.6 DAOå±‚å•å…ƒæµ‹è¯•</h3><p>æœ‰ä¸çŸ¥é“Eclipseå¦‚ä½•ç›´æ¥è¿›è¡Œç”Ÿæˆå¿«é€Ÿçš„æµ‹è¯•å•å…ƒçš„ï¼Œå¯ä»¥çœ‹çœ‹<a href=http://blog.csdn.net/jj_nan/article/details/64134781 target=_blank rel="noopener noreffer">è¿™ç¯‡æ–‡ç« </a></p><p>ä½¿ç”¨Eclipseå·¥å…·ç›´æ¥ç”Ÿæˆæµ‹è¯•å•å…ƒï¼Œè¿™äº›æµ‹è¯•ä»£ç æŒ‰ç…§Mavenè§„èŒƒæ”¾åˆ°<code>src/test/java</code>åŒ…ä¸‹ã€‚åœ¨ç”Ÿæˆçš„æµ‹è¯•ä»£ç é‡Œæµ‹è¯•æˆ‘ä»¬çš„æ–¹æ³•ï¼Œæµ‹è¯•çš„å…·ä½“ä»£ç å¦‚ä¸‹ï¼š</p><blockquote><p><code>SeckillDaoTest.java</code></p></blockquote><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span><span class=lnt>50
</span><span class=lnt>51
</span><span class=lnt>52
</span><span class=lnt>53
</span><span class=lnt>54
</span><span class=lnt>55
</span><span class=lnt>56
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-java data-lang=java>	<span class=kn>package</span> <span class=nn>com.lewis.dao</span><span class=o>;</span>
	
	<span class=kn>import static</span> <span class=nn>org.junit.Assert.*</span><span class=o>;</span>
	
	<span class=kn>import</span> <span class=nn>java.util.Date</span><span class=o>;</span>
	<span class=kn>import</span> <span class=nn>java.util.List</span><span class=o>;</span>
	
	<span class=kn>import</span> <span class=nn>javax.annotation.Resource</span><span class=o>;</span>
	
	<span class=kn>import</span> <span class=nn>org.junit.Test</span><span class=o>;</span>
	<span class=kn>import</span> <span class=nn>org.junit.runner.RunWith</span><span class=o>;</span>
	<span class=kn>import</span> <span class=nn>org.springframework.test.context.ContextConfiguration</span><span class=o>;</span>
	<span class=kn>import</span> <span class=nn>org.springframework.test.context.junit4.SpringJUnit4ClassRunner</span><span class=o>;</span>
	
	<span class=kn>import</span> <span class=nn>com.lewis.entity.Seckill</span><span class=o>;</span>
	
	<span class=cm>/**
</span><span class=cm>	 * é…ç½®Springå’ŒJunitæ•´åˆ,junitå¯åŠ¨æ—¶åŠ è½½springIOCå®¹å™¨ spring-test,junit
</span><span class=cm>	 */</span>
	<span class=nd>@RunWith</span><span class=o>(</span><span class=n>SpringJUnit4ClassRunner</span><span class=o>.</span><span class=na>class</span><span class=o>)</span>
	<span class=c1>// å‘Šè¯‰junit springçš„é…ç½®æ–‡ä»¶
</span><span class=c1></span>	<span class=nd>@ContextConfiguration</span><span class=o>({</span> <span class=s>&#34;classpath:spring/spring-dao.xml&#34;</span> <span class=o>})</span>
	<span class=kd>public</span> <span class=kd>class</span> <span class=nc>SeckillDaoTest</span> <span class=o>{</span>
	
		<span class=c1>// æ³¨å…¥Daoå®ç°ç±»ä¾èµ–
</span><span class=c1></span>		<span class=nd>@Resource</span>
		<span class=kd>private</span> <span class=n>SeckillDao</span> <span class=n>seckillDao</span><span class=o>;</span>
	
		<span class=nd>@Test</span>
		<span class=kd>public</span> <span class=kt>void</span> <span class=nf>testQueryById</span><span class=o>()</span> <span class=o>{</span>
	
			<span class=kt>long</span> <span class=n>seckillId</span> <span class=o>=</span> <span class=n>1000</span><span class=o>;</span>
			<span class=n>Seckill</span> <span class=n>seckill</span> <span class=o>=</span> <span class=n>seckillDao</span><span class=o>.</span><span class=na>queryById</span><span class=o>(</span><span class=n>seckillId</span><span class=o>);</span>
			<span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>seckill</span><span class=o>.</span><span class=na>getName</span><span class=o>());</span>
			<span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>seckill</span><span class=o>);</span>
		<span class=o>}</span>
	
		<span class=nd>@Test</span>
		<span class=kd>public</span> <span class=kt>void</span> <span class=nf>testQueryAll</span><span class=o>()</span> <span class=o>{</span>
	
			<span class=n>List</span><span class=o>&lt;</span><span class=n>Seckill</span><span class=o>&gt;</span> <span class=n>seckills</span> <span class=o>=</span> <span class=n>seckillDao</span><span class=o>.</span><span class=na>queryAll</span><span class=o>(</span><span class=n>0</span><span class=o>,</span> <span class=n>100</span><span class=o>);</span>
			<span class=k>for</span> <span class=o>(</span><span class=n>Seckill</span> <span class=n>seckill</span> <span class=o>:</span> <span class=n>seckills</span><span class=o>)</span> <span class=o>{</span>
				<span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>seckill</span><span class=o>);</span>
			<span class=o>}</span>
		<span class=o>}</span>
	
		<span class=nd>@Test</span>
		<span class=kd>public</span> <span class=kt>void</span> <span class=nf>testReduceNumber</span><span class=o>()</span> <span class=o>{</span>
	
			<span class=kt>long</span> <span class=n>seckillId</span> <span class=o>=</span> <span class=n>1000</span><span class=o>;</span>
			<span class=n>Date</span> <span class=n>date</span> <span class=o>=</span> <span class=k>new</span> <span class=n>Date</span><span class=o>();</span>
			<span class=kt>int</span> <span class=n>updateCount</span> <span class=o>=</span> <span class=n>seckillDao</span><span class=o>.</span><span class=na>reduceNumber</span><span class=o>(</span><span class=n>seckillId</span><span class=o>,</span> <span class=n>date</span><span class=o>);</span>
			<span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>updateCount</span><span class=o>);</span>
		<span class=o>}</span>
	
	<span class=o>}</span>
</code></pre></td></tr></table></div></div><blockquote><p>æµ‹è¯•è¯´æ˜</p></blockquote><p>å…ˆå·¦é”®å•å‡»è¦æµ‹è¯•çš„é‚£ä¸ªæ–¹æ³•åï¼Œå†å³é”®ç‚¹å‡»é€‰æ‹©<code>Debug As</code>å¯ä»¥å•ç‹¬å¯¹è¯¥æ–¹æ³•è¿›è¡Œå•å…ƒæµ‹è¯•ã€‚ä¸‰ä¸ªæ–¹æ³•éƒ½æµ‹è¯•é€šè¿‡ï¼Œä½†æ˜¯å¯¹äºæœ€åä¸€ä¸ªæ–¹æ³•ä¼šå‘ç°æ•°æ®åº“ä¸­è¯¥å•†å“æ•°é‡å¹¶æ²¡æœ‰å‡å°‘ï¼Œè¿™æ˜¯å› ä¸ºæˆ‘ä»¬è®¾ç½®äº†ç§’æ€æ—¶é—´ï¼Œå½“å‰æ—¶é—´ä¸æ»¡è¶³ç§’æ€æ—¶é—´ï¼Œæ‰€ä»¥ä¸ä¼šç§’æ€æˆåŠŸå‡å°‘æ•°é‡ã€‚</p><p>å¦‚æœä¹‹å‰æ²¡æœ‰åœ¨DAOæ¥å£çš„å¤šå‚æ•°æ–¹æ³•é‡Œåœ¨å½¢å‚å‰åŠ ä¸Š@Paramæ³¨è§£ï¼Œé‚£ä¹ˆåœ¨è¿™é‡Œè¿›è¡Œå•å…ƒæµ‹è¯•æ—¶ï¼ŒMyBatisä¼šæŠ¥ç»‘å®šå‚æ•°å¤±è´¥çš„é”™è¯¯ï¼Œå› ä¸ºæ— æ³•æ‰¾åˆ°å‚æ•°ã€‚è¿™æ˜¯å› ä¸ºJavaæ²¡æœ‰ä¿å­˜è¡Œå‚çš„è®°å½•ï¼ŒJavaåœ¨è¿è¡Œçš„æ—¶å€™ä¼šæŠŠ<code>queryAll(int offset,int limit)</code>ä¸­çš„å‚æ•°å˜æˆè¿™æ ·<code>queryAll(int arg0,int arg1)</code>ï¼Œå¯¼è‡´MyBatisæ— æ³•è¯†åˆ«è¿™ä¸¤ä¸ªå‚æ•°ã€‚</p><blockquote><p><code>SuccessKilledDaoTest.java</code></p></blockquote><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-java data-lang=java>	<span class=kn>package</span> <span class=nn>com.lewis.dao</span><span class=o>;</span>
	
	<span class=kn>import static</span> <span class=nn>org.junit.Assert.*</span><span class=o>;</span>
	
	<span class=kn>import</span> <span class=nn>javax.annotation.Resource</span><span class=o>;</span>
	
	<span class=kn>import</span> <span class=nn>org.junit.Test</span><span class=o>;</span>
	<span class=kn>import</span> <span class=nn>org.junit.runner.RunWith</span><span class=o>;</span>
	<span class=kn>import</span> <span class=nn>org.springframework.test.context.ContextConfiguration</span><span class=o>;</span>
	<span class=kn>import</span> <span class=nn>org.springframework.test.context.junit4.SpringJUnit4ClassRunner</span><span class=o>;</span>
	
	<span class=kn>import</span> <span class=nn>com.lewis.entity.SuccessKilled</span><span class=o>;</span>
	
	<span class=nd>@RunWith</span><span class=o>(</span><span class=n>SpringJUnit4ClassRunner</span><span class=o>.</span><span class=na>class</span><span class=o>)</span>
	<span class=c1>// å‘Šè¯‰junit springçš„é…ç½®æ–‡ä»¶
</span><span class=c1></span>	<span class=nd>@ContextConfiguration</span><span class=o>({</span> <span class=s>&#34;classpath:spring/spring-dao.xml&#34;</span> <span class=o>})</span>
	<span class=kd>public</span> <span class=kd>class</span> <span class=nc>SuccessKilledDaoTest</span> <span class=o>{</span>
	
		<span class=nd>@Resource</span>
		<span class=kd>private</span> <span class=n>SuccessKilledDao</span> <span class=n>successKilledDao</span><span class=o>;</span>
	
		<span class=nd>@Test</span>
		<span class=kd>public</span> <span class=kt>void</span> <span class=nf>testInsertSuccessKilled</span><span class=o>()</span> <span class=o>{</span>
	
			<span class=kt>long</span> <span class=n>seckillId</span> <span class=o>=</span> <span class=n>1000L</span><span class=o>;</span>
			<span class=kt>long</span> <span class=n>userPhone</span> <span class=o>=</span> <span class=n>13476191877L</span><span class=o>;</span>
			<span class=kt>int</span> <span class=n>insertCount</span> <span class=o>=</span> <span class=n>successKilledDao</span><span class=o>.</span><span class=na>insertSuccessKilled</span><span class=o>(</span><span class=n>seckillId</span><span class=o>,</span> <span class=n>userPhone</span><span class=o>);</span>
			<span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;insertCount=&#34;</span> <span class=o>+</span> <span class=n>insertCount</span><span class=o>);</span>
		<span class=o>}</span>
	
		<span class=nd>@Test</span>
		<span class=kd>public</span> <span class=kt>void</span> <span class=nf>testQueryByIdWithSeckill</span><span class=o>()</span> <span class=o>{</span>
	
			<span class=kt>long</span> <span class=n>seckillId</span> <span class=o>=</span> <span class=n>1000L</span><span class=o>;</span>
			<span class=kt>long</span> <span class=n>userPhone</span> <span class=o>=</span> <span class=n>13476191877L</span><span class=o>;</span>
			<span class=n>SuccessKilled</span> <span class=n>successKilled</span> <span class=o>=</span> <span class=n>successKilledDao</span><span class=o>.</span><span class=na>queryByIdWithSeckill</span><span class=o>(</span><span class=n>seckillId</span><span class=o>,</span> <span class=n>userPhone</span><span class=o>);</span>
			<span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>successKilled</span><span class=o>);</span>
			<span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>successKilled</span><span class=o>.</span><span class=na>getSeckill</span><span class=o>());</span>
		<span class=o>}</span>
	
	<span class=o>}</span>
</code></pre></td></tr></table></div></div><blockquote><p>æµ‹è¯•è¯´æ˜</p></blockquote><p>æµ‹è¯•æ–¹æ³•åŒä¸Šï¼Œæµ‹è¯•ç»“æœé€šè¿‡ï¼Œå¦å¤–ç”±äºæˆ‘ä»¬ä½¿ç”¨äº†è”åˆä¸»é”®ï¼Œåœ¨insertæ—¶ä½¿ç”¨äº†ignoreå…³é”®å­—ï¼Œæ‰€ä»¥å¯¹äº<code>testInsertSuccessKilled()</code>é‡å¤æ’å…¥åŒä¸€æ¡æ•°æ®æ˜¯æ— æ•ˆçš„ï¼Œä¼šè¢«è¿‡æ»¤æ‰ï¼Œç¡®ä¿äº†ä¸€ä¸ªç”¨æˆ·ä¸èƒ½é‡å¤ç§’æ€åŒä¸€ä»¶å•†å“ã€‚</p><blockquote><p>æœ¬èŠ‚ç»“è¯­</p></blockquote><p>è‡³æ­¤ï¼Œå…³äºJavaé«˜å¹¶å‘ç§’æ€APIçš„DAOå±‚çš„å¼€å‘ä¸æµ‹è¯•å·²ç»å®Œæˆï¼Œæ¥ä¸‹æ¥è¿›è¡ŒServiceå±‚çš„å¼€å‘ã€æµ‹è¯•ï¼Œè¯¦æƒ…å¯ä»¥å‚è€ƒ<a href=http://blog.csdn.net/lewky_liu/article/details/78162149 target=_blank rel="noopener noreffer">Javaé«˜å¹¶å‘ç§’æ€API(äºŒ)ä¹‹Serviceå±‚</a>ã€‚</p></div><div class=post-footer id=post-footer><div class=post-info><div class=post-info-line><div class=post-info-mod><span>æ›´æ–°äº 2017-10-04</span></div><div class=post-info-license></div></div><div class=post-info-line><div class=post-info-md><span><a class=link-to-markdown href=/posts/56225.html/index.md target=_blank>é˜…è¯»åŸå§‹æ–‡æ¡£</a></span></div><div class=post-info-share><span><a href=javascript:void(0); title="åˆ†äº«åˆ° Twitter" data-sharer=twitter data-url=https://lewky.cn/posts/56225.html/ data-title=Javaé«˜å¹¶å‘ç§’æ€API(ä¸€)ä¹‹ä¸šåŠ¡åˆ†æä¸DAOå±‚ data-hashtags=é¡¹ç›®ç¬”è®°,SSMå®æˆ˜é¡¹ç›®,ç§’æ€><i class="fab fa-twitter fa-fw"></i></a><a href=javascript:void(0); title="åˆ†äº«åˆ° Facebook" data-sharer=facebook data-url=https://lewky.cn/posts/56225.html/ data-hashtag=é¡¹ç›®ç¬”è®°><i class="fab fa-facebook-square fa-fw"></i></a><a href=javascript:void(0); title="åˆ†äº«åˆ° Hacker News" data-sharer=hackernews data-url=https://lewky.cn/posts/56225.html/ data-title=Javaé«˜å¹¶å‘ç§’æ€API(ä¸€)ä¹‹ä¸šåŠ¡åˆ†æä¸DAOå±‚><i class="fab fa-hacker-news fa-fw"></i></a><a href=javascript:void(0); title="åˆ†äº«åˆ° Line" data-sharer=line data-url=https://lewky.cn/posts/56225.html/ data-title=Javaé«˜å¹¶å‘ç§’æ€API(ä¸€)ä¹‹ä¸šåŠ¡åˆ†æä¸DAOå±‚><i data-svg-src=https://cdn.jsdelivr.net/npm/simple-icons@2.14.0/icons/line.svg></i></a><a href=javascript:void(0); title="åˆ†äº«åˆ° å¾®åš" data-sharer=weibo data-url=https://lewky.cn/posts/56225.html/ data-title=Javaé«˜å¹¶å‘ç§’æ€API(ä¸€)ä¹‹ä¸šåŠ¡åˆ†æä¸DAOå±‚><i class="fab fa-weibo fa-fw"></i></a></span></div></div></div><div class=post-info-more><section class=post-tags><i class="fas fa-tags fa-fw"></i>&nbsp;<a href=/tags/%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0/>é¡¹ç›®ç¬”è®°</a>,&nbsp;<a href=/tags/ssm%E5%AE%9E%E6%88%98%E9%A1%B9%E7%9B%AE/>SSMå®æˆ˜é¡¹ç›®</a>,&nbsp;<a href=/tags/%E7%A7%92%E6%9D%80/>ç§’æ€</a></section><section><span><a href=javascript:void(0); onclick=window.history.back();>è¿”å›</a></span>&nbsp;|&nbsp;<span><a href=/>ä¸»é¡µ</a></span></section></div><div class=post-nav><a href=/posts/65067.html/ class=prev rel=prev title="SSMå®æˆ˜é¡¹ç›® - Javaé«˜å¹¶å‘ç§’æ€API"><i class="fas fa-angle-left fa-fw"></i>SSMå®æˆ˜é¡¹ç›® - Javaé«˜å¹¶å‘ç§’æ€API</a>
<a href=/posts/18357.html/ class=next rel=next title=Javaé«˜å¹¶å‘ç§’æ€API(äºŒ)ä¹‹Serviceå±‚>Javaé«˜å¹¶å‘ç§’æ€API(äºŒ)ä¹‹Serviceå±‚<i class="fas fa-angle-right fa-fw"></i></a></div></div><div id=comments><div id=valine class=comment></div><script src=//cdn1.lncld.net/static/js/3.0.4/av-min.js></script><script src=https://cdn.jsdelivr.net/npm/valine@1.4.14/dist/Valine.min.js></script><script type=text/javascript>new Valine({el:'#valine',appId:'1OiMg9cMz7owGf7apX4mTQs3-gzGzoHsz',appKey:'nfafLPsFBNTdO9Sb5suuGdpG',notify:'',verify:'',avatar:'retro',placeholder:'è¯´ç‚¹ä»€ä¹ˆå§...ï¼ˆè¯·å¡«å†™æ­£ç¡®çš„é‚®ä»¶åœ°å€ä»¥ä¾¿äºæ”¶åˆ°å›å¤é€šçŸ¥ï¼‰',visitor:'true'});</script></div></article></div></main><footer class=footer><div class=footer-container><div class=footer-line>ç”± <a href=https://gohugo.io/ target=_blank rel="noopener noreffer" title="Hugo 0.74.2">Hugo</a> å¼ºåŠ›é©±åŠ¨ | ä¸»é¢˜ - <a href=https://github.com/dillonzq/LoveIt target=_blank rel="noopener noreffer" title="LoveIt 0.2.10"><i class="far fa-kiss-wink-heart fa-fw"></i>LoveIt</a></div><div class=footer-line><i class="far fa-copyright fa-fw"></i><span itemprop=copyrightYear>2018 - 2021</span><span class=author itemprop=copyrightHolder>&nbsp;<a href=/ target=_blank>é›¨ä¸´Lewis</a></span>&nbsp;|&nbsp;<span class=license><a rel="license external nofollow noopener noreffer" href=https://creativecommons.org/licenses/by-nc/4.0/ target=_blank>CC BY-NC 4.0</a></span><span class=icp-splitter>&nbsp;|&nbsp;</span><br class=icp-br><span class=icp><a target=_blank href=http://www.beian.miit.gov.cn/ style=font-weight:700>ç²¤ICPå¤‡19103822</a></span></div></div></footer></div><div id=fixed-buttons><a href=# id=back-to-top class=fixed-button title=å›åˆ°é¡¶éƒ¨><i class="fas fa-arrow-up fa-fw"></i></a><a href=# id=view-comments class=fixed-button title=æŸ¥çœ‹è¯„è®º><i class="fas fa-comment fa-fw"></i></a></div><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/lightgallery.js@1.2.0/dist/css/lightgallery.min.css><script type=text/javascript src=https://cdn.jsdelivr.net/npm/smooth-scroll@16.1.3/dist/smooth-scroll.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/lazysizes@5.2.2/lazysizes.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/lightgallery.js@1.2.0/dist/js/lightgallery.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/lg-thumbnail.js@1.2.0/dist/lg-thumbnail.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/lg-zoom.js@1.2.0/dist/lg-zoom.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/clipboard@2.0.6/dist/clipboard.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/sharer.js@0.4.0/sharer.min.js></script><script type=text/javascript>window.config={"code":{"copyTitle":"å¤åˆ¶åˆ°å‰ªè´´æ¿","maxShownLines":15},"comment":{},"lightGallery":{"actualSize":false,"exThumbImage":"data-thumbnail","hideBarsDelay":2000,"selector":".lightgallery","speed":400,"thumbContHeight":80,"thumbWidth":80,"thumbnail":true}};</script><script type=text/javascript src=/js/theme.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/jquery@2.1.3/dist/jquery.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/jquery-backstretch@2.1.18/jquery.backstretch.min.js></script><script>var $cdnPrefix="https://cdn.jsdelivr.net/gh/lewky/lewky.github.io@master";</script><script type=text/javascript src=/js/custom.js></script><script>var _hmt=_hmt||[];(function(){var hm=document.createElement("script");hm.src="https://hm.baidu.com/hm.js?6f278ed0fdb01edb3b1e7398379e5432";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(hm,s);})();</script><div class="GalMenu GalDropDown"><div class=circle id=gal><div class=ring><a href=/ target=_blank style=background-image:url(https://cdn.jsdelivr.net/gh/lewky/lewky.github.io@master/images/rightmenu/rightmenu1.jpg) class=menuItem>é¦–é¡µ</a><a href=/funny/mikutap/ target=_blank style=background-image:url(https://cdn.jsdelivr.net/gh/lewky/lewky.github.io@master/images/rightmenu/rightmenu2.jpg) class=menuItem>éŸ³ä¹æ¸¸æˆ</a><a href=/funny/high/ target=_blank style=background-image:url(https://cdn.jsdelivr.net/gh/lewky/lewky.github.io@master/images/rightmenu/rightmenu3.jpg) class=menuItem>å‰æ–¹é«˜èƒ½</a><a href=/posts/e62c38c4.html target=_blank style=background-image:url(https://cdn.jsdelivr.net/gh/lewky/lewky.github.io@master/images/rightmenu/rightmenu4.jpg) class=menuItem>å»ºç«™æ—¥å¿—</a><a href=/posts/d65a1577.html target=_blank style=background-image:url(https://cdn.jsdelivr.net/gh/lewky/lewky.github.io@master/images/rightmenu/rightmenu5.jpg) class=menuItem>éšç¬”</a><a href=/friends/ target=_blank style=background-image:url(https://cdn.jsdelivr.net/gh/lewky/lewky.github.io@master/images/rightmenu/rightmenu6.jpg) class=menuItem>å‹é“¾</a></div><audio id=audio src=https://cdn.jsdelivr.net/gh/lewky/lewky.github.io@master/audio/niconiconi.mp3></audio></div></div><script type=text/javascript>var items=document.querySelectorAll('.menuItem');for(var i=0,l=items.length;i<l;i++){items[i].style.left=(50-35*Math.cos(-0.5*Math.PI-2*(1/l)*i*Math.PI)).toFixed(4)+"%";items[i].style.top=(50+35*Math.sin(-0.5*Math.PI-2*(1/l)*i*Math.PI)).toFixed(4)+"%"}</script><link rel=stylesheet href=https://cdn.jsdelivr.net/gh/lewky/lewky.github.io@master/css/GalMenu.css><script type=text/javascript src=https://cdn.jsdelivr.net/gh/lewky/lewky.github.io@master/js/GalMenu.js></script><script type=text/javascript>$(document).ready(function(){$('body').GalMenu({'menu':'GalDropDown'})});</script></body></html>