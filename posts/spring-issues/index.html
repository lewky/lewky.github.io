<!doctype html><html lang><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="noodp"><meta http-equiv=x-ua-compatible content="IE=edge, chrome=1"><title>Spring问题汇总 - Yulin Lewis' Blog</title><meta name=keywords content="雨临Lewis,Java,hugo,hexo,博客"><meta name=Description content="不想当写手的码农不是好咸鱼_(xз」∠)_"><meta property="og:title" content="Spring问题汇总"><meta property="og:description" content="SpelEvaluationException: EL1030E
运行Spring项目时报错如下：


 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17


org.springframework.expression.spel.SpelEvaluationException: EL1030E: The operator 'ADD' is not supported between objects of type 'java.lang.String' and 'null'
	at org.springframework.expression.spel.ExpressionState.operate(ExpressionState.java:240)
	at org.springframework.expression.spel.ast.OpPlus.getValueInternal(OpPlus.java:80)
	at org.springframework.expression.spel.ast.OpPlus.getValueInternal(OpPlus.java:85)
	at org.springframework.expression.spel.ast.OpPlus.getValueInternal(OpPlus.java:83)
	at org.springframework.expression.spel.ast.OpPlus.getValueInternal(OpPlus.java:83)
	at org.springframework.expression.spel.ast.OpPlus.getValueInternal(OpPlus.java:83)
	at org.springframework.expression.spel.ast.OpPlus.getValueInternal(OpPlus.java:83)
	at org.springframework.expression.spel.ast.SpelNodeImpl.getValue(SpelNodeImpl.java:109)
	at org.springframework.expression.spel.standard.SpelExpression.getValue
....
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1415)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:745)


"><meta property="og:type" content="article"><meta property="og:url" content="https://lewky.cn/posts/spring-issues/"><meta property="og:image" content="https://lewky.cn/logo.png"><meta property="article:section" content="posts"><meta property="article:published_time" content="2021-08-09T23:06:01+08:00"><meta property="article:modified_time" content="2024-02-23T12:57:01+08:00"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://lewky.cn/logo.png"><meta name=twitter:title content="Spring问题汇总"><meta name=twitter:description content="SpelEvaluationException: EL1030E
运行Spring项目时报错如下：


 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17


org.springframework.expression.spel.SpelEvaluationException: EL1030E: The operator 'ADD' is not supported between objects of type 'java.lang.String' and 'null'
	at org.springframework.expression.spel.ExpressionState.operate(ExpressionState.java:240)
	at org.springframework.expression.spel.ast.OpPlus.getValueInternal(OpPlus.java:80)
	at org.springframework.expression.spel.ast.OpPlus.getValueInternal(OpPlus.java:85)
	at org.springframework.expression.spel.ast.OpPlus.getValueInternal(OpPlus.java:83)
	at org.springframework.expression.spel.ast.OpPlus.getValueInternal(OpPlus.java:83)
	at org.springframework.expression.spel.ast.OpPlus.getValueInternal(OpPlus.java:83)
	at org.springframework.expression.spel.ast.OpPlus.getValueInternal(OpPlus.java:83)
	at org.springframework.expression.spel.ast.SpelNodeImpl.getValue(SpelNodeImpl.java:109)
	at org.springframework.expression.spel.standard.SpelExpression.getValue
....
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1415)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:745)


"><meta name=application-name content="雨临Lewis的博客"><meta name=apple-mobile-web-app-title content="雨临Lewis的博客"><meta name=theme-color content="#ffffff"><meta name=msapplication-TileColor content="#da532c"><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5916478302479037" crossorigin=anonymous></script>
<link rel="shortcut icon" type=image/x-icon href=/favicon.ico><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><link rel=manifest href=/site.webmanifest><link rel=canonical href=https://lewky.cn/posts/spring-issues/><link rel=prev href=https://lewky.cn/posts/ireport-issues/><link rel=next href=https://lewky.cn/posts/powermock-issues/><link rel=stylesheet href=https://unpkg.com/normalize.css@8.0.1/normalize.css><link rel=stylesheet href=/css/style.min.css><link rel=stylesheet href=https://unpkg.com/@fortawesome/fontawesome-free@5.13.0/css/all.min.css><link rel=stylesheet href=https://unpkg.com/animate.css@3.7.2/animate.min.css><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"Spring问题汇总","inLanguage":"","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/lewky.cn\/posts\/spring-issues\/"},"genre":"posts","keywords":"工作记录","wordcount":1866,"url":"https:\/\/lewky.cn\/posts\/spring-issues\/","datePublished":"2021-08-09T23:06:01+08:00","dateModified":"2024-02-23T12:57:01+08:00","license":"This work is licensed under a Creative Commons Attribution-NonCommercial 4.0 International License.","publisher":{"@type":"Organization","name":"雨临Lewis","logo":"https:\/\/lewky.cn\/images\/avatar.jpg"},"author":{"@type":"Person","name":"雨临Lewis"},"description":""}</script></head><body header-desktop=fixed header-mobile=auto><script type=text/javascript>(window.localStorage&&localStorage.getItem("theme")?localStorage.getItem("theme")==="dark":"auto"==="auto"?window.matchMedia("(prefers-color-scheme: dark)").matches:"auto"==="dark")&&document.body.setAttribute("theme","dark")</script><div id=mask></div><div class=wrapper><header class=desktop id=header-desktop><div class=header-wrapper><a href=https://github.com/lewky class=github-corner target=_blank title="Follow me on GitHub" aria-label="Follow me on GitHub"><svg width="3.5rem" height="3.5rem" viewBox="0 0 250 250" style="fill:#70b7fd;color:#fff;position:absolute;top:0;border:0;left:0;transform:scale(-1,1)" aria-hidden="true"><path d="M0 0 115 115h15l12 27L250 250V0z"/><path d="M128.3 109C113.8 99.7 119 89.6 119 89.6 122 82.7 120.5 78.6 120.5 78.6 119.2 72 123.4 76.3 123.4 76.3 127.3 80.9 125.5 87.3 125.5 87.3 122.9 97.6 130.6 101.9 134.4 103.2" fill="currentcolor" style="transform-origin:130px 106px" class="octo-arm"/><path d="M115 115C114.9 115.1 118.7 116.5 119.8 115.4l13.9-13.8C136.9 99.2 139.9 98.4 142.2 98.6 133.8 88 127.5 74.4 143.8 58 148.5 53.4 154 51.2 159.7 51 160.3 49.4 163.2 43.6 171.4 40.1 171.4 40.1 176.1 42.5 178.8 56.2 183.1 58.6 187.2 61.8 190.9 65.4 194.5 69 197.7 73.2 200.1 77.6 213.8 80.2 216.3 84.9 216.3 84.9 212.7 93.1 206.9 96 205.4 96.6 205.1 102.4 203 107.8 198.3 112.5 181.9 128.9 168.3 122.5 157.7 114.1 157.9 116.9 156.7 120.9 152.7 124.9L141 136.5C139.8 137.7 141.6 141.9 141.8 141.8z" fill="currentcolor" class="octo-body"/></svg></a><div class=header-title><a href=/ title="Yulin Lewis' Blog"><span class=header-title-pre><i class='fas fa-fw fa-atom'></i></span>雨临Lewis</a></div><div class=menu><div class=menu-inner><div class=dropdown><a href=/posts/ class="menu-item menu-more dropbtn" title=点击查看所有文章><i class='fas fa-fw fa-archive'></i> 归档</a><div class="menu-more-content dropdown-content"><a href=/categories/ title><i class='fas fa-fw fa-th'></i> 分类 </a><a href=/tags/ title><i class='fas fa-fw fa-tag'></i> 标签 </a><a href=/about/ title><i class='fas fa-fw fa-at'></i> 关于</a></div></div><a class=menu-item href=/friends/ title=欢迎申请友链><i class='fas fa-fw fa-link'></i> 友链</a><div class=dropdown><a href=javascript:void(0); class="menu-item menu-more dropbtn" title=一些有意思的东东~><i class='fas fa-fw fa-fan fa-spin'></i> 趣味</a><div class="menu-more-content dropdown-content"><a href=/funny/high/ title="前方高能♂ 小心外放！" target=_blank rel=noopener><i class='fas fa-fw fa-dizzy'></i> 燥起来！ </a><a href=/funny/mikutap/ title=初音未来音乐游戏 target=_blank rel=noopener><i class='fas fa-fw fa-music'></i> 在线打碟 </a><a href=/funny/catch-the-cat/ title=逮住那只猫!><i class='fas fa-fw fa-cat'></i> 抓住猫咪</a></div></div><div class=dropdown><a href=/ class="menu-item menu-more dropbtn" title=回到首页><i class='fas fa-fw fa-atom'></i> 站点</a><div class="menu-more-content dropdown-content"><a href=/bbs/ title=来留言吧~><i class='fas fa-fw fa-comment'></i> 公告留言 </a><a href=https://seo.chinaz.com title target=_blank rel=noopener><i class='fas fa-fw fa-chart-line'></i> SEO查询 </a><a href=https://www.ping.cn/http/lewky.cn title target=_blank rel=noopener><i class='fas fa-fw fa-bezier-curve'></i> 网站测速 </a><a href=/posts/e62c38c4.html/ title><i class='fas fa-fw fa-cog fa-spin'></i> 建站日志</a></div></div><div class=dropdown><a href=javascript:void(0); class="menu-item menu-more dropbtn" title><i class='fas fa-fw fa-book'></i> 文档</a><div class="menu-more-content dropdown-content"><a href=https://gohugo.io/documentation/ title target=_blank rel=noopener><i class='fas fa-fw fa-star'></i> Hugo文档 </a><a href=https://javanote.doc.lewky.cn/ title=尚在完善中~ target=_blank rel=noopener><i class='fab fa-fw fa-java'></i> Java 笔记</a></div></div><a class=menu-item href=/search/ title=渲染搜索结果需要等待几秒钟~><i class='fas fa-fw fa-search'></i> 搜索
</a><span class="menu-item delimiter"></span>
<a href=https://www.travellings.cn/go.html target=_blank class=menu-item rel=noopener title=开往-友链接力><i class='fas fa-fw fa-subway'></i></a>
<a href=https://rssblog.vercel.app/ class=menu-item target=_blank rel=noopener title=RSSBlog><i class='fas fa-fw fa-inbox'></i></a>
<a href=https://github.com/lewky class=menu-item target=_blank rel=noopener title=GitHub><i class='fab fa-fw fa-github'></i></a></div></div></div></header><header class=mobile id=header-mobile><div class=header-container><div class=header-wrapper><div class=header-title><a href=/ title="Yulin Lewis' Blog"><span class=header-title-pre><i class='fas fa-fw fa-atom'></i></span>雨临Lewis</a></div><div class=menu-toggle id=menu-toggle-mobile><span></span><span></span><span></span></div></div><div class=menu id=menu-mobile><div class=dropdown><a href=/posts/ class="menu-item menu-more dropbtn" title=点击查看所有文章><i class='fas fa-fw fa-archive'></i> 归档</a><div class="menu-more-content dropdown-content"><a href=/categories/ title><i class='fas fa-fw fa-th'></i> 分类 </a><a href=/tags/ title><i class='fas fa-fw fa-tag'></i> 标签 </a><a href=/about/ title><i class='fas fa-fw fa-at'></i> 关于</a></div></div><a class=menu-item href=/friends/ title=欢迎申请友链><i class='fas fa-fw fa-link'></i> 友链</a><div class=dropdown><a href=javascript:void(0); class="menu-item menu-more dropbtn" title=一些有意思的东东~><i class='fas fa-fw fa-fan fa-spin'></i> 趣味</a><div class="menu-more-content dropdown-content"><a href=/funny/high/ title="前方高能♂ 小心外放！" target=_blank rel=noopener><i class='fas fa-fw fa-dizzy'></i> 燥起来！ </a><a href=/funny/mikutap/ title=初音未来音乐游戏 target=_blank rel=noopener><i class='fas fa-fw fa-music'></i> 在线打碟 </a><a href=/funny/catch-the-cat/ title=逮住那只猫!><i class='fas fa-fw fa-cat'></i> 抓住猫咪</a></div></div><div class=dropdown><a href=/ class="menu-item menu-more dropbtn" title=回到首页><i class='fas fa-fw fa-atom'></i> 站点</a><div class="menu-more-content dropdown-content"><a href=/bbs/ title=来留言吧~><i class='fas fa-fw fa-comment'></i> 公告留言 </a><a href=https://seo.chinaz.com title target=_blank rel=noopener><i class='fas fa-fw fa-chart-line'></i> SEO查询 </a><a href=https://www.ping.cn/http/lewky.cn title target=_blank rel=noopener><i class='fas fa-fw fa-bezier-curve'></i> 网站测速 </a><a href=/posts/e62c38c4.html/ title><i class='fas fa-fw fa-cog fa-spin'></i> 建站日志</a></div></div><div class=dropdown><a href=javascript:void(0); class="menu-item menu-more dropbtn" title><i class='fas fa-fw fa-book'></i> 文档</a><div class="menu-more-content dropdown-content"><a href=https://gohugo.io/documentation/ title target=_blank rel=noopener><i class='fas fa-fw fa-star'></i> Hugo文档 </a><a href=https://javanote.doc.lewky.cn/ title=尚在完善中~ target=_blank rel=noopener><i class='fab fa-fw fa-java'></i> Java 笔记</a></div></div><a class=menu-item href=/search/ title=渲染搜索结果需要等待几秒钟~><i class='fas fa-fw fa-search'></i> 搜索</a>
<a href=https://www.travellings.cn/go.html target=_blank class=menu-item rel=noopener title=开往-友链接力><i class='fas fa-fw fa-subway'></i></a>
<a href=https://rssblog.vercel.app/ class=menu-item target=_blank rel=noopener title=RSSBlog><i class='fas fa-fw fa-inbox'></i></a>
<a href=https://github.com/lewky class=menu-item target=_blank rel=noopener title=GitHub><i class='fab fa-fw fa-github'></i></a></div></div></header><div class="search-dropdown desktop"><div id=search-dropdown-desktop></div></div><div class="search-dropdown mobile"><div id=search-dropdown-mobile></div></div><main class=main><div class=container><div class=toc id=toc-auto><h2 class=toc-title>目录</h2><div class=toc-content id=toc-content-auto></div></div><article class="page single"><h1 class="single-title animated flipInX">Spring问题汇总</h1><div class=post-meta><div class=post-meta-line><span class=post-author><a href=/ title=Author rel=author class=author><i class="fas fa-user-circle fa-fw"></i>雨临Lewis</a></span>&nbsp;<span class=post-category>收录于 <a href=/categories/spring/><i class="far fa-folder fa-fw"></i>Spring</a></span></div><div class=post-meta-line><i class="far fa-calendar fa-fw"></i>&nbsp;<time datetime=2021-08-09>2021-08-09</time>&nbsp;<i class="far fa-calendar-plus fa-fw"></i>&nbsp;<time datetime=2024-02-23>2024-02-23</time>&nbsp;<i class="fas fa-pencil-alt fa-fw"></i>&nbsp;约 1866 字
<i class="far fa-clock fa-fw"></i>&nbsp;预计阅读 4 分钟&nbsp;<span id=/posts/spring-issues/ class=leancloud_visitors data-flag-title=Spring问题汇总>
<i class="far fa-eye fa-fw"></i>&nbsp;<span class=leancloud-visitors-count></span>&nbsp;次阅读
</span>&nbsp;
<a href=#comments id=post-meta-vcount title=查看评论><i class="fas fa-comment fa-fw"></i>&nbsp;<span id=/posts/spring-issues/ class=waline-comment-count></span>&nbsp;条评论</a></div></div><div class="details toc" id=toc-static kept><div class="details-summary toc-title"><span>目录</span>
<span><i class="details-icon fas fa-angle-right"></i></span></div><div class="details-content toc-content" id=toc-content-static><nav id=TableOfContents><ol><li><a href=#spelevaluationexception-el1030e>SpelEvaluationException: EL1030E</a></li><li><a href=#pathvariable会截断字符串中最后一个><code>@PathVariable</code>会截断字符串中最后一个<code>.</code></a></li><li><a href=#获取当前项目部署在tomcat中的路径>获取当前项目部署在Tomcat中的路径</a></li><li><a href=#用jasypt加密配置文件中的敏感数据>用jasypt加密配置文件中的敏感数据</a><ol><li><a href=#引入pom依赖>引入pom依赖：</a></li><li><a href=#applicationxml配置jasypt的bean>application.xml配置jasypt的bean</a></li><li><a href=#获取密文串并配置到配置文件中>获取密文串并配置到配置文件中</a></li><li><a href=#解密密文得到明文>解密密文得到明文</a></li></ol></li><li><a href=#查看类文件是加载的哪个jar包>查看类文件是加载的哪个jar包</a></li><li><a href=#参考链接>参考链接</a></li></ol></nav></div></div><div class=content id=content><h2 id=spelevaluationexception-el1030e>SpelEvaluationException: EL1030E</h2><p>运行Spring项目时报错如下：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>org</span><span class=o>.</span><span class=na>springframework</span><span class=o>.</span><span class=na>expression</span><span class=o>.</span><span class=na>spel</span><span class=o>.</span><span class=na>SpelEvaluationException</span><span class=o>:</span> <span class=n>EL1030E</span><span class=o>:</span> <span class=n>The</span> <span class=n>operator</span> <span class=err>&#39;</span><span class=n>ADD</span><span class=err>&#39;</span> <span class=n>is</span> <span class=n>not</span> <span class=n>supported</span> <span class=n>between</span> <span class=n>objects</span> <span class=n>of</span> <span class=n>type</span> <span class=err>&#39;</span><span class=n>java</span><span class=o>.</span><span class=na>lang</span><span class=o>.</span><span class=na>String</span><span class=err>&#39;</span> <span class=n>and</span> <span class=err>&#39;</span><span class=kc>null</span><span class=err>&#39;</span>
</span></span><span class=line><span class=cl>	<span class=n>at</span> <span class=n>org</span><span class=o>.</span><span class=na>springframework</span><span class=o>.</span><span class=na>expression</span><span class=o>.</span><span class=na>spel</span><span class=o>.</span><span class=na>ExpressionState</span><span class=o>.</span><span class=na>operate</span><span class=o>(</span><span class=n>ExpressionState</span><span class=o>.</span><span class=na>java</span><span class=o>:</span><span class=mi>240</span><span class=o>)</span>
</span></span><span class=line><span class=cl>	<span class=n>at</span> <span class=n>org</span><span class=o>.</span><span class=na>springframework</span><span class=o>.</span><span class=na>expression</span><span class=o>.</span><span class=na>spel</span><span class=o>.</span><span class=na>ast</span><span class=o>.</span><span class=na>OpPlus</span><span class=o>.</span><span class=na>getValueInternal</span><span class=o>(</span><span class=n>OpPlus</span><span class=o>.</span><span class=na>java</span><span class=o>:</span><span class=mi>80</span><span class=o>)</span>
</span></span><span class=line><span class=cl>	<span class=n>at</span> <span class=n>org</span><span class=o>.</span><span class=na>springframework</span><span class=o>.</span><span class=na>expression</span><span class=o>.</span><span class=na>spel</span><span class=o>.</span><span class=na>ast</span><span class=o>.</span><span class=na>OpPlus</span><span class=o>.</span><span class=na>getValueInternal</span><span class=o>(</span><span class=n>OpPlus</span><span class=o>.</span><span class=na>java</span><span class=o>:</span><span class=mi>85</span><span class=o>)</span>
</span></span><span class=line><span class=cl>	<span class=n>at</span> <span class=n>org</span><span class=o>.</span><span class=na>springframework</span><span class=o>.</span><span class=na>expression</span><span class=o>.</span><span class=na>spel</span><span class=o>.</span><span class=na>ast</span><span class=o>.</span><span class=na>OpPlus</span><span class=o>.</span><span class=na>getValueInternal</span><span class=o>(</span><span class=n>OpPlus</span><span class=o>.</span><span class=na>java</span><span class=o>:</span><span class=mi>83</span><span class=o>)</span>
</span></span><span class=line><span class=cl>	<span class=n>at</span> <span class=n>org</span><span class=o>.</span><span class=na>springframework</span><span class=o>.</span><span class=na>expression</span><span class=o>.</span><span class=na>spel</span><span class=o>.</span><span class=na>ast</span><span class=o>.</span><span class=na>OpPlus</span><span class=o>.</span><span class=na>getValueInternal</span><span class=o>(</span><span class=n>OpPlus</span><span class=o>.</span><span class=na>java</span><span class=o>:</span><span class=mi>83</span><span class=o>)</span>
</span></span><span class=line><span class=cl>	<span class=n>at</span> <span class=n>org</span><span class=o>.</span><span class=na>springframework</span><span class=o>.</span><span class=na>expression</span><span class=o>.</span><span class=na>spel</span><span class=o>.</span><span class=na>ast</span><span class=o>.</span><span class=na>OpPlus</span><span class=o>.</span><span class=na>getValueInternal</span><span class=o>(</span><span class=n>OpPlus</span><span class=o>.</span><span class=na>java</span><span class=o>:</span><span class=mi>83</span><span class=o>)</span>
</span></span><span class=line><span class=cl>	<span class=n>at</span> <span class=n>org</span><span class=o>.</span><span class=na>springframework</span><span class=o>.</span><span class=na>expression</span><span class=o>.</span><span class=na>spel</span><span class=o>.</span><span class=na>ast</span><span class=o>.</span><span class=na>OpPlus</span><span class=o>.</span><span class=na>getValueInternal</span><span class=o>(</span><span class=n>OpPlus</span><span class=o>.</span><span class=na>java</span><span class=o>:</span><span class=mi>83</span><span class=o>)</span>
</span></span><span class=line><span class=cl>	<span class=n>at</span> <span class=n>org</span><span class=o>.</span><span class=na>springframework</span><span class=o>.</span><span class=na>expression</span><span class=o>.</span><span class=na>spel</span><span class=o>.</span><span class=na>ast</span><span class=o>.</span><span class=na>SpelNodeImpl</span><span class=o>.</span><span class=na>getValue</span><span class=o>(</span><span class=n>SpelNodeImpl</span><span class=o>.</span><span class=na>java</span><span class=o>:</span><span class=mi>109</span><span class=o>)</span>
</span></span><span class=line><span class=cl>	<span class=n>at</span> <span class=n>org</span><span class=o>.</span><span class=na>springframework</span><span class=o>.</span><span class=na>expression</span><span class=o>.</span><span class=na>spel</span><span class=o>.</span><span class=na>standard</span><span class=o>.</span><span class=na>SpelExpression</span><span class=o>.</span><span class=na>getValue</span>
</span></span><span class=line><span class=cl><span class=o>....</span>
</span></span><span class=line><span class=cl>	<span class=n>at</span> <span class=n>org</span><span class=o>.</span><span class=na>apache</span><span class=o>.</span><span class=na>tomcat</span><span class=o>.</span><span class=na>util</span><span class=o>.</span><span class=na>net</span><span class=o>.</span><span class=na>NioEndpoint$SocketProcessor</span><span class=o>.</span><span class=na>doRun</span><span class=o>(</span><span class=n>NioEndpoint</span><span class=o>.</span><span class=na>java</span><span class=o>:</span><span class=mi>1415</span><span class=o>)</span>
</span></span><span class=line><span class=cl>	<span class=n>at</span> <span class=n>org</span><span class=o>.</span><span class=na>apache</span><span class=o>.</span><span class=na>tomcat</span><span class=o>.</span><span class=na>util</span><span class=o>.</span><span class=na>net</span><span class=o>.</span><span class=na>SocketProcessorBase</span><span class=o>.</span><span class=na>run</span><span class=o>(</span><span class=n>SocketProcessorBase</span><span class=o>.</span><span class=na>java</span><span class=o>:</span><span class=mi>49</span><span class=o>)</span>
</span></span><span class=line><span class=cl>	<span class=n>at</span> <span class=n>java</span><span class=o>.</span><span class=na>util</span><span class=o>.</span><span class=na>concurrent</span><span class=o>.</span><span class=na>ThreadPoolExecutor</span><span class=o>.</span><span class=na>runWorker</span><span class=o>(</span><span class=n>ThreadPoolExecutor</span><span class=o>.</span><span class=na>java</span><span class=o>:</span><span class=mi>1142</span><span class=o>)</span>
</span></span><span class=line><span class=cl>	<span class=n>at</span> <span class=n>java</span><span class=o>.</span><span class=na>util</span><span class=o>.</span><span class=na>concurrent</span><span class=o>.</span><span class=na>ThreadPoolExecutor$Worker</span><span class=o>.</span><span class=na>run</span><span class=o>(</span><span class=n>ThreadPoolExecutor</span><span class=o>.</span><span class=na>java</span><span class=o>:</span><span class=mi>617</span><span class=o>)</span>
</span></span><span class=line><span class=cl>	<span class=n>at</span> <span class=n>org</span><span class=o>.</span><span class=na>apache</span><span class=o>.</span><span class=na>tomcat</span><span class=o>.</span><span class=na>util</span><span class=o>.</span><span class=na>threads</span><span class=o>.</span><span class=na>TaskThread$WrappingRunnable</span><span class=o>.</span><span class=na>run</span><span class=o>(</span><span class=n>TaskThread</span><span class=o>.</span><span class=na>java</span><span class=o>:</span><span class=mi>61</span><span class=o>)</span>
</span></span><span class=line><span class=cl>	<span class=n>at</span> <span class=n>java</span><span class=o>.</span><span class=na>lang</span><span class=o>.</span><span class=na>Thread</span><span class=o>.</span><span class=na>run</span><span class=o>(</span><span class=n>Thread</span><span class=o>.</span><span class=na>java</span><span class=o>:</span><span class=mi>745</span><span class=o>)</span>
</span></span></code></pre></td></tr></table></div></div><p>从堆栈信息可以看出，该异常与<code>spel</code>有关。<code>spel</code>指的是<code>Spring Expression Language</code>，结合问题代码进行分析，可以认为该异常与spring表达式有关。而在我的代码里，只有<code>@Cacheable</code>注解里使用到了<code>spel</code>，如下：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl>    <span class=nd>@Cacheable</span><span class=o>(</span><span class=n>key</span> <span class=o>=</span> <span class=s>&#34;#root.target.getCacheKeyPrefix() + &#39;::&#39; + + #root.target.getRootDomain() + &#39;-&#39; + #root.target.getLocale() + &#39;-&#39; + #searchLabelKey&#34;</span><span class=o>)</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=n>String</span> <span class=nf>getFromRootDomain</span><span class=o>(</span><span class=kd>final</span> <span class=n>String</span> <span class=n>labelId</span><span class=o>,</span> <span class=kd>final</span> <span class=n>String</span> <span class=n>locale</span><span class=o>,</span> <span class=kd>final</span> <span class=n>String</span> <span class=n>searchLabelKey</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>		<span class=c1>// TODO
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=k>return</span> <span class=kc>null</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span></code></pre></td></tr></table></div></div><p>很显然，在使用到该注解时，由于这里的spring表达式有问题，最终在解析时抛出了异常。经过检查发现，这里犯了个很逗的错误，就是连续使用了两个<code>+</code>，导致解析无法通过，改正后如下：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=nd>@Cacheable</span><span class=o>(</span><span class=n>key</span> <span class=o>=</span> <span class=s>&#34;#root.target.getCacheKeyPrefix() + &#39;::&#39; + #root.target.getRootDomain() + &#39;-&#39; + #root.target.getLocale() + &#39;-&#39; + #searchLabelKey&#34;</span><span class=o>)</span>
</span></span></code></pre></td></tr></table></div></div><p>而之所以之前没能发现这个问题，是因为没有启用redis cache，导致避开了这个问题。目前刚开始了解<code>spel</code>这门表达式语言，在此记录下这个问题，方便日后回顾分析，参考链接里顺便贴上官方的一篇中译文档。</p><h2 id=pathvariable会截断字符串中最后一个><code>@PathVariable</code>会截断字符串中最后一个<code>.</code></h2><p>当使用了<code>@PathVariable</code>接收参数时，如果该参数的值包含有<code>.</code>这个符号，则最后的<code>.</code>以及之后的字符串会被截断。举个简单的例子，代码如下：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=nd>@GetMapping</span><span class=o>(</span><span class=n>value</span> <span class=o>=</span> <span class=s>&#34;/users/{loginId}&#34;</span><span class=o>,</span> <span class=n>produces</span> <span class=o>=</span> <span class=n>Constants</span><span class=o>.</span><span class=na>REQUEST_BODY_TYPE_APP_JSON</span><span class=o>)</span>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=n>UserDto</span> <span class=nf>getLatestUserByLoginId</span><span class=o>(</span><span class=nd>@PathVariable</span> <span class=kd>final</span> <span class=n>String</span> <span class=n>loginId</span><span class=o>)</span> <span class=kd>throws</span> <span class=n>DocumentNotFoundException</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=kd>final</span> <span class=n>UserDto</span> <span class=n>result</span> <span class=o>=</span> <span class=n>userDocumentService</span><span class=o>.</span><span class=na>findDtoByLoginIdAndIsLatest</span><span class=o>(</span><span class=n>loginId</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>result</span><span class=o>;</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></td></tr></table></div></div><ul><li>当请求是<code>/users/lewis.liu</code>时，<code>loginId</code>参数接收到的值是<code>lewis</code>；</li><li>当请求是<code>/users/lewis.liu.p</code>时，<code>loginId</code>参数接收到的值是<code>lewis.liu</code>；</li><li>当请求是<code>/users/lewis.liu.p.w</code>时，<code>loginId</code>参数接收到的值是<code>lewis.liu.p</code>。</li></ul><p>可以发现，<code>@PathVariable</code>注解会自动截断最后一个<code>.</code>以及之后的字符串。这是因为Spring认为最后一个<code>.</code>以及之后的字符串属于文件扩展类型，比如<code>.java</code>之类的，所以就自动将其截断了。</p><p>解决这个问题可以在请求的变量占位符里加上正则表达式，如下：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=c1>// 原来的写法
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nd>@GetMapping</span><span class=o>(</span><span class=n>value</span> <span class=o>=</span> <span class=s>&#34;/users/{loginId}&#34;</span><span class=o>,</span> <span class=n>produces</span> <span class=o>=</span> <span class=n>Constants</span><span class=o>.</span><span class=na>REQUEST_BODY_TYPE_APP_JSON</span><span class=o>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 改后的写法
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nd>@GetMapping</span><span class=o>(</span><span class=n>value</span> <span class=o>=</span> <span class=s>&#34;/users/{loginId:.+}&#34;</span><span class=o>,</span> <span class=n>produces</span> <span class=o>=</span> <span class=n>Constants</span><span class=o>.</span><span class=na>REQUEST_BODY_TYPE_APP_JSON</span><span class=o>)</span>
</span></span></code></pre></td></tr></table></div></div><h2 id=获取当前项目部署在tomcat中的路径>获取当前项目部署在Tomcat中的路径</h2><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kn>import</span> <span class=nn>javax.servlet.ServletContext</span><span class=o>;</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>org.springframework.web.context.ContextLoader</span><span class=o>;</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>org.springframework.web.context.WebApplicationContext</span><span class=o>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>WebApplicationContext</span> <span class=n>webApplicationContext</span> <span class=o>=</span> <span class=n>ContextLoader</span><span class=o>.</span><span class=na>getCurrentWebApplicationContext</span><span class=o>();</span>
</span></span><span class=line><span class=cl><span class=n>ServletContext</span> <span class=n>servletContext</span> <span class=o>=</span> <span class=n>webApplicationContext</span><span class=o>.</span><span class=na>getServletContext</span><span class=o>();</span>
</span></span><span class=line><span class=cl><span class=n>String</span> <span class=n>contextPath</span> <span class=o>=</span> <span class=n>servletContext</span><span class=o>.</span><span class=na>getContextPath</span><span class=o>();</span>
</span></span></code></pre></td></tr></table></div></div><h2 id=用jasypt加密配置文件中的敏感数据>用jasypt加密配置文件中的敏感数据</h2><p>生成环境的数据库密码等敏感信息是不能直接明文配置的，可以通过集成jasypt这个第三方库来实现配置中敏感数据的加解密。</p><p>假如现在有一个数据库的配置文件<code>jdbc.properties</code>，其中的密码字段原本配置如下：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>jdbc.password=test123
</span></span></code></pre></td></tr></table></div></div><p>由于密码是敏感数据，不能配置为明文，现在用jasypt来实现加密该字段。</p><h3 id=引入pom依赖>引入pom依赖：</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-xml data-lang=xml><span class=line><span class=cl><span class=nt>&lt;dependency&gt;</span>
</span></span><span class=line><span class=cl>   <span class=nt>&lt;groupId&gt;</span>org.jasypt<span class=nt>&lt;/groupId&gt;</span>
</span></span><span class=line><span class=cl>   <span class=nt>&lt;artifactId&gt;</span>jasypt-spring31<span class=nt>&lt;/artifactId&gt;</span>
</span></span><span class=line><span class=cl>   <span class=nt>&lt;version&gt;</span>1.9.2<span class=nt>&lt;/version&gt;</span>
</span></span><span class=line><span class=cl><span class=nt>&lt;/dependency&gt;</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=applicationxml配置jasypt的bean>application.xml配置jasypt的bean</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-xml data-lang=xml><span class=line><span class=cl><span class=nt>&lt;bean</span> <span class=na>id=</span><span class=s>&#34;environmentVariablesConfiguration&#34;</span>  <span class=na>class=</span><span class=s>&#34;org.jasypt.encryption.pbe.config.EnvironmentStringPBEConfig&#34;</span><span class=nt>&gt;</span>
</span></span><span class=line><span class=cl>	<span class=c>&lt;!-- 盐值，用于加密 --&gt;</span>
</span></span><span class=line><span class=cl>	<span class=nt>&lt;property</span> <span class=na>name=</span><span class=s>&#34;password&#34;</span> <span class=na>value=</span><span class=s>&#34;A1A26A54353E4BC5BDFCB355EF68FD99&#34;</span><span class=nt>/&gt;</span>
</span></span><span class=line><span class=cl><span class=nt>&lt;/bean&gt;</span>
</span></span><span class=line><span class=cl><span class=nt>&lt;bean</span> <span class=na>id=</span><span class=s>&#34;configurationEncryptor&#34;</span> <span class=na>class=</span><span class=s>&#34;org.jasypt.encryption.pbe.StandardPBEStringEncryptor&#34;</span><span class=nt>&gt;</span>
</span></span><span class=line><span class=cl>	<span class=nt>&lt;property</span> <span class=na>name=</span><span class=s>&#34;config&#34;</span> <span class=na>ref=</span><span class=s>&#34;environmentVariablesConfiguration&#34;</span><span class=nt>/&gt;</span>
</span></span><span class=line><span class=cl><span class=nt>&lt;/bean&gt;</span>
</span></span><span class=line><span class=cl><span class=nt>&lt;bean</span> <span class=na>id=</span><span class=s>&#34;propertyConfigurer&#34;</span>
</span></span><span class=line><span class=cl>	  <span class=na>class=</span><span class=s>&#34;org.jasypt.spring31.properties.EncryptablePropertyPlaceholderConfigurer&#34;</span><span class=nt>&gt;</span>
</span></span><span class=line><span class=cl>	<span class=nt>&lt;constructor-arg</span> <span class=na>ref=</span><span class=s>&#34;configurationEncryptor&#34;</span> <span class=nt>/&gt;</span>
</span></span><span class=line><span class=cl>	<span class=nt>&lt;property</span> <span class=na>name=</span><span class=s>&#34;locations&#34;</span><span class=nt>&gt;</span>
</span></span><span class=line><span class=cl>		<span class=nt>&lt;list&gt;</span>
</span></span><span class=line><span class=cl>			<span class=nt>&lt;value&gt;</span>classpath:jdbc.properties<span class=nt>&lt;/value&gt;</span>
</span></span><span class=line><span class=cl>		<span class=nt>&lt;/list&gt;</span>
</span></span><span class=line><span class=cl>	<span class=nt>&lt;/property&gt;</span>
</span></span><span class=line><span class=cl><span class=nt>&lt;/bean&gt;</span>
</span></span></code></pre></td></tr></table></div></div><p>在上述配置中，jasypt的bean指定了盐值和需要扫描的配置文件<code>jdbc.properties</code>。</p><h3 id=获取密文串并配置到配置文件中>获取密文串并配置到配置文件中</h3><p>在jasypt-1.9.2.jar目录下执行下面命令来获取加密后的密文串：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-cmd data-lang=cmd><span class=line><span class=cl>java -cp jasypt-1.9.2.jar org.jasypt.intf.cli.JasyptPBEStringEncryptionCLI algorithm=PBEWithMD5AndDES password=A1A26A54353E4BC5BDFCB355EF68FD99 input=密码明文
</span></span></code></pre></td></tr></table></div></div><p>上诉命令中algorithm是加密算法，password是盐值，input是明文，执行后结果如下：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-cmd data-lang=cmd><span class=line><span class=cl>D<span class=p>:</span><span class=nl>\maven\repository\org\jasypt\jasypt\1.9.2</span><span class=c1>&gt;java -cp jasypt-1.9.2.jar org.jasypt.intf.cli.JasyptPBEStringEncryptionCLI algorithm=PBEWithMD5AndDES password=A1A26A54353E4BC5BDFCB355EF68FD99 input=test123</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>----ENVIRONMENT-----------------
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Runtime: Oracle Corporation Java HotSpot(TM) 64-Bit Server VM 25.202-b08
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>----ARGUMENTS-------------------
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>input: test123
</span></span><span class=line><span class=cl>algorithm: PBEWithMD5AndDES
</span></span><span class=line><span class=cl>password: A1A26A54353E4BC5BDFCB355EF68FD99
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>----OUTPUT----------------------
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>fMrbHTmCSpwVP206IfjYkw==
</span></span></code></pre></td></tr></table></div></div><p><code>OUTPUT</code>即是输入的明文被加密后的密文，将密文配置到配置文件<code>jdbc.properties</code>中，用<code>ENC()</code>包括起来，取代原本的明文值：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-xml data-lang=xml><span class=line><span class=cl>jdbc.password=ENC(fMrbHTmCSpwVP206IfjYkw==)
</span></span></code></pre></td></tr></table></div></div><p>这样jasypt的bean在扫描到指定的配置文件时，遇到被<code>ENC()</code>包括起来的密文值，会自动解密成明文；也就实现了敏感数据的脱敏。</p><h3 id=解密密文得到明文>解密密文得到明文</h3><p>如果需要获取明文，可以用下面代码解密：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=c1>// 加密时的盐值
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>String</span> <span class=n>password</span> <span class=o>=</span> <span class=s>&#34;A1A26A54353E4BC5BDFCB355EF68FD99&#34;</span><span class=o>;</span>
</span></span><span class=line><span class=cl><span class=c1>// 密文
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>String</span> <span class=n>encrypt</span> <span class=o>=</span> <span class=s>&#34;fMrbHTmCSpwVP206IfjYkw==&#34;</span><span class=o>;</span>
</span></span><span class=line><span class=cl><span class=n>EnvironmentStringPBEConfig</span> <span class=n>config</span> <span class=o>=</span> <span class=k>new</span> <span class=n>EnvironmentStringPBEConfig</span><span class=o>();</span>
</span></span><span class=line><span class=cl><span class=n>config</span><span class=o>.</span><span class=na>setPassword</span><span class=o>(</span><span class=n>password</span><span class=o>);</span>
</span></span><span class=line><span class=cl><span class=n>StandardPBEStringEncryptor</span> <span class=n>encryptor</span> <span class=o>=</span> <span class=k>new</span> <span class=n>StandardPBEStringEncryptor</span><span class=o>();</span>
</span></span><span class=line><span class=cl><span class=n>encryptor</span><span class=o>.</span><span class=na>setConfig</span><span class=o>(</span><span class=n>config</span><span class=o>);</span>
</span></span><span class=line><span class=cl><span class=n>String</span> <span class=n>decrypt</span> <span class=o>=</span> <span class=n>encryptor</span><span class=o>.</span><span class=na>decrypt</span><span class=o>(</span><span class=n>encrypt</span><span class=o>);</span>
</span></span><span class=line><span class=cl><span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;解密后明文：&#34;</span> <span class=o>+</span> <span class=n>decrypt</span><span class=o>);</span>
</span></span></code></pre></td></tr></table></div></div><p>结果为：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>解密后明文：test123
</span></span></code></pre></td></tr></table></div></div><h2 id=查看类文件是加载的哪个jar包>查看类文件是加载的哪个jar包</h2><p>通过jdk提供的接口可以打印出来类文件的加载路径：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>ProtectionDomain</span> <span class=n>pd</span> <span class=o>=</span> <span class=n>Test</span><span class=o>.</span><span class=na>class</span><span class=o>.</span><span class=na>getProtectionDomain</span><span class=o>();</span>
</span></span><span class=line><span class=cl><span class=n>CodeSource</span> <span class=n>codeSource</span> <span class=o>=</span> <span class=n>pd</span><span class=o>.</span><span class=na>getCodesource</span><span class=o>();</span>
</span></span><span class=line><span class=cl><span class=n>URL</span> <span class=n>location</span> <span class=o>=</span> <span class=n>codeSource</span><span class=o>.</span><span class=na>getLocation</span><span class=o>();</span>
</span></span><span class=line><span class=cl><span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>location</span><span class=o>);</span>
</span></span></code></pre></td></tr></table></div></div><p>但是这个api对于系统类加载器加载的类会获取不到，报错NPE，比如String.class，对于这些类可以通过添加启动参数<code>-verbose</code>，在启动项目时打印出来所有被系统类加载器加载的类文件路径。</p><h2 id=参考链接>参考链接</h2><ul><li><a href=http://itmyhome.com/spring/expressions.html#expressions-operator-safe-navigation target=_blank rel="noopener noreffer">8. Spring 表达式语言 (SpEL)</a></li><li><a href=https://stackoverflow.com/questions/16332092/spring-mvc-pathvariable-with-dot-is-getting-truncated target=_blank rel="noopener noreffer">Spring MVC @PathVariable with dot (.) is getting truncated</a></li><li><a href=https://blog.csdn.net/weixin_42364640/article/details/114707534 target=_blank rel="noopener noreffer">java -cp jasypt_SpringBoot使用jasypt加解密密码的实现方法</a></li><li><a href=https://blog.csdn.net/u013818525/article/details/78890258 target=_blank rel="noopener noreffer">查看java类是从哪个包加载，并找出包所在路径</a></li></ul><div class="details admonition warning open"><div class="details-summary admonition-title"><i class="icon fas fa-exclamation-triangle fa-fwwarning"></i>警告<i class="details-icon fas fa-angle-right fa-fw"></i></div><div class=details-content><div class=admonition-content>本文最后更新于 <span class=timeago datetime=2024-02-23T12:57:01 title="February 23, 2024">February 23, 2024</span>，文中内容可能已过时，请谨慎使用。</div></div></div><div class=post-reward><input type=checkbox name=reward id=reward hidden>
<label class=reward-button for=reward>赞赏支持</label><div class=qr-code><label class=qr-code-image for=reward><img class=image src=https://lewky.cn/images/reward/wechat.png>
<span>微信打赏</span></label>
<label class=qr-code-image for=reward><img class=image src=https://lewky.cn/images/reward/alipay.png>
<span>支付宝打赏</span></label></div></div></div><div class=post-footer id=post-footer><div class=post-info><div class=post-info-line><div class=post-info-mod><span>更新于 2024-02-23</span></div><div class=post-info-license><span><a rel="license external nofollow noopener noreffer" href=https://creativecommons.org/licenses/by-nc/4.0/ target=_blank>CC BY-NC 4.0</a></span></div></div><div class=post-info-line><div class=post-info-md><span><a class=link-to-markdown href=/posts/spring-issues/index.md target=_blank>阅读原始文档</a></span></div><div class=post-info-share><span><a href=javascript:void(0); title="分享到 Twitter" data-sharer=twitter data-url=https://lewky.cn/posts/spring-issues/ data-title=Spring问题汇总 data-hashtags=工作记录><i class="fab fa-twitter fa-fw"></i></a><a href=javascript:void(0); title="分享到 Facebook" data-sharer=facebook data-url=https://lewky.cn/posts/spring-issues/ data-hashtag=工作记录><i class="fab fa-facebook-square fa-fw"></i></a><a href=javascript:void(0); title="分享到 Hacker News" data-sharer=hackernews data-url=https://lewky.cn/posts/spring-issues/ data-title=Spring问题汇总><i class="fab fa-hacker-news fa-fw"></i></a><a href=javascript:void(0); title="分享到 Line" data-sharer=line data-url=https://lewky.cn/posts/spring-issues/ data-title=Spring问题汇总><i data-svg-src=https://unpkg.com/simple-icons@2.14.0/icons/line.svg></i></a><a href=javascript:void(0); title="分享到 微博" data-sharer=weibo data-url=https://lewky.cn/posts/spring-issues/ data-title=Spring问题汇总><i class="fab fa-weibo fa-fw"></i></a></span></div></div></div><div class=post-info-more><section class=post-tags><i class="fas fa-tags fa-fw"></i>&nbsp;<a href=/tags/%E5%B7%A5%E4%BD%9C%E8%AE%B0%E5%BD%95/>工作记录</a></section><section><span><a href=javascript:void(0); onclick=window.history.back()>返回</a></span>&nbsp;|&nbsp;<span><a href=/>主页</a></span></section></div><div class=post-nav><a href=/posts/ireport-issues/ class=prev rel=prev title=iReport问题汇总><i class="fas fa-angle-left fa-fw"></i>iReport问题汇总</a>
<a href=/posts/powermock-issues/ class=next rel=next title=PowerMock问题汇总>PowerMock问题汇总<i class="fas fa-angle-right fa-fw"></i></a></div></div><div id=comments><div id=waline></div><script src=/js/Waline.min.js></script>
<script>new Waline({el:"#waline",meta:["nick","mail","link"],requiredMeta:["nick","mail"],login:"force",placeholder:"为防恶意灌水攻击，评论前需注册并登录，望见谅~",serverURL:"https://comment.lewky.cn/",avatarCDN:"https://cravatar.cn/avatar/",pageSize:20,avatar:"retro",lang:"zh-CN",visitor:!0,highlight:!0,uploadImage:!1,emoji:["https://lewky.cn/images/emoji/嘉然今天吃什么","https://lewky.cn/images/emoji/大航海嘉然","https://lewky.cn/images/emoji/向晚大魔王","https://lewky.cn/images/emoji/贝拉kira","https://lewky.cn/images/emoji/珈乐Carol","https://lewky.cn/images/emoji/乃琳Queen","https://lewky.cn/images/emoji/EveOneCat","https://lewky.cn/images/emoji/weibo","https://lewky.cn/images/emoji/滑稽","https://lewky.cn/images/emoji/default"]})</script></div></article></div></main><footer class=footer><div class=footer-container><div class=footer-line><span id=run-time></span>|
<a href=http://rssblog.vercel.app/ target=_blank rel=noopener title=RSSBlog><i class='fas fa-fw fa-inbox'></i>&nbsp;RSSBlog</a></div><div class=footer-line><i class="far fa-copyright fa-fw"></i><span itemprop=copyrightYear>2018 - 2025</span><span class=author itemprop=copyrightHolder>&nbsp;<a href=/ target=_blank>雨临Lewis</a></span>&nbsp;|&nbsp;<span class=license><a rel="license external nofollow noopener noreffer" href=https://creativecommons.org/licenses/by-nc/4.0/ target=_blank>CC BY-NC 4.0</a></span><span class=icp-splitter>&nbsp;|&nbsp;</span><br class=icp-br><span class=icp><a target=_blank href=http://www.beian.miit.gov.cn/ style=font-weight:700>粤ICP备19103822</a></span></div></div></footer></div><div id=fixed-buttons><a href=# id=back-to-top class=fixed-button title=回到顶部><i class="fas fa-arrow-up fa-fw"></i>
</a><a href=# id=view-comments class=fixed-button title=查看评论><i class="fas fa-comment fa-fw"></i></a></div><div class=sidebar_wo><div id=leimu><img src=https://lewky.cn/images/b2t/leimuA.png alt=雷姆 onmouseover='this.src="https://lewky.cn/images/b2t/leimuB.png"' onmouseout='this.src="https://lewky.cn/images/b2t/leimuA.png"' title=回到顶部></div><div class=sidebar_wo id=lamu><img src=https://lewky.cn/images/b2t/lamuA.png alt=雷姆 onmouseover='this.src="https://lewky.cn/images/b2t/lamuB.png"' onmouseout='this.src="https://lewky.cn/images/b2t/lamuA.png"' title=回到底部></div></div><link rel=stylesheet href=https://unpkg.com/lightgallery.js@1.2.0/dist/css/lightgallery.min.css><script type=text/javascript src=https://unpkg.com/smooth-scroll@16.1.3/dist/smooth-scroll.min.js></script><script type=text/javascript src=https://unpkg.com/lazysizes@5.2.2/lazysizes.min.js></script><script type=text/javascript src=https://unpkg.com/lightgallery.js@1.2.0/dist/js/lightgallery.min.js></script><script type=text/javascript src=https://unpkg.com/lg-thumbnail.js@1.2.0/dist/lg-thumbnail.min.js></script><script type=text/javascript src=https://unpkg.com/lg-zoom.js@1.2.0/dist/lg-zoom.min.js></script><script type=text/javascript src=https://unpkg.com/clipboard@2.0.6/dist/clipboard.min.js></script><script type=text/javascript src=https://unpkg.com/sharer.js@0.4.0/sharer.min.js></script><script type=text/javascript>window.config={code:{copyTitle:"复制到剪贴板",maxShownLines:30},comment:{},lightGallery:{actualSize:!1,exThumbImage:"data-thumbnail",hideBarsDelay:2e3,selector:".lightgallery",speed:400,thumbContHeight:80,thumbWidth:80,thumbnail:!0}}</script><script type=text/javascript src=/js/theme.min.js></script><script type=text/javascript src=https://unpkg.com/jquery@2.1.3/dist/jquery.min.js></script><script type=text/javascript src=https://unpkg.com/jquery-backstretch@2.1.18/jquery.backstretch.min.js></script><script>var $cdnPrefix="https://lewky.cn"</script>
<script type=text/javascript src=/js/custom.js></script><script>var _hmt=_hmt||[];(function(){var e,t=document.createElement("script");t.src="https://hm.baidu.com/hm.js?6f278ed0fdb01edb3b1e7398379e5432",e=document.getElementsByTagName("script")[0],e.parentNode.insertBefore(t,e)})()</script></body></html>