<!doctype html><html><head><meta name=generator content="Hugo 0.74.2"><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="noodp"><meta http-equiv=x-ua-compatible content="IE=edge, chrome=1"><title>Yulin Lewis' Blog</title><meta name=keywords content="雨临Lewis,Java,hugo,hexo,博客"><meta name=Description content="不想当写手的码农不是好咸鱼_(xз」∠)_"><meta property="og:title" content="Yulin Lewis' Blog"><meta property="og:description" content="不想当写手的码农不是好咸鱼_(xз」∠)_"><meta property="og:type" content="website"><meta property="og:url" content="https://lewky.cn/"><meta property="og:image" content="https://lewky.cn/logo.png"><meta property="og:updated_time" content="2021-04-23T00:07:30+08:00"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://lewky.cn/logo.png"><meta name=twitter:title content="Yulin Lewis' Blog"><meta name=twitter:description content="不想当写手的码农不是好咸鱼_(xз」∠)_"><meta name=application-name content="雨临Lewis的博客"><meta name=apple-mobile-web-app-title content="雨临Lewis的博客"><meta name=theme-color content="#ffffff"><meta name=msapplication-TileColor content="#da532c"><link rel="shortcut icon" type=image/x-icon href=/favicon.ico><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><link rel=manifest href=/site.webmanifest><link rel=canonical href=https://lewky.cn/><link rel=alternate href=/index.xml type=application/rss+xml title="Yulin Lewis' Blog"><link rel=feed href=/index.xml type=application/rss+xml title="Yulin Lewis' Blog"><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/normalize.css@8.0.1/normalize.min.css><link rel=stylesheet href=/css/style.min.css><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.13.0/css/all.min.css><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/animate.css@3.7.2/animate.min.css><script type=application/ld+json>{"@context":"http://schema.org","@type":"WebSite","url":"https:\/\/lewky.cn\/","author":{"@type":"Person","name":"雨临Lewis"},"description":"不想当写手的码农不是好咸鱼_(xз」∠)_","license":"This work is licensed under a Creative Commons Attribution-NonCommercial 4.0 International License.","name":"Yulin Lewis' Blog"}</script></head><body header-desktop=fixed header-mobile=auto><script type=text/javascript>(window.localStorage&&localStorage.getItem('theme')?localStorage.getItem('theme')==='dark':('auto'==='auto'?window.matchMedia('(prefers-color-scheme: dark)').matches:'auto'==='dark'))&&document.body.setAttribute('theme','dark');</script><div id=mask></div><div class=wrapper><header class=desktop id=header-desktop><div class=header-wrapper><a href=https://github.com/lewky class=github-corner target=_blank title="Follow me on GitHub" aria-label="Follow me on GitHub"><svg width="3.5rem" height="3.5rem" viewBox="0 0 250 250" style="fill:#70b7fd;color:#fff;position:absolute;top:0;border:0;left:0;transform:scale(-1,1)" aria-hidden="true"><path d="M0 0 115 115h15l12 27L250 250V0z"/><path d="M128.3 109C113.8 99.7 119 89.6 119 89.6 122 82.7 120.5 78.6 120.5 78.6 119.2 72 123.4 76.3 123.4 76.3 127.3 80.9 125.5 87.3 125.5 87.3 122.9 97.6 130.6 101.9 134.4 103.2" fill="currentcolor" style="transform-origin:130px 106px" class="octo-arm"/><path d="M115 115C114.9 115.1 118.7 116.5 119.8 115.4L133.7 101.6C136.9 99.2 139.9 98.4 142.2 98.6 133.8 88 127.5 74.4 143.8 58 148.5 53.4 154 51.2 159.7 51 160.3 49.4 163.2 43.6 171.4 40.1 171.4 40.1 176.1 42.5 178.8 56.2 183.1 58.6 187.2 61.8 190.9 65.4 194.5 69 197.7 73.2 200.1 77.6 213.8 80.2 216.3 84.9 216.3 84.9 212.7 93.1 206.9 96 205.4 96.6 205.1 102.4 203 107.8 198.3 112.5 181.9 128.9 168.3 122.5 157.7 114.1 157.9 116.9 156.7 120.9 152.7 124.9L141 136.5C139.8 137.7 141.6 141.9 141.8 141.8z" fill="currentcolor" class="octo-body"/></svg></a><div class=header-title><a href=/ title="Yulin Lewis' Blog"><span class=header-title-pre><i class="fas fa-fw fa-atom"></i></span>雨临Lewis</a></div><div class=menu><div class=menu-inner><a class=menu-item href=/posts/><i class="fas fa-fw fa-archive"></i>归档 </a><a class=menu-item href=/tags/><i class="fas fa-fw fa-tag"></i>标签 </a><a class=menu-item href=/categories/><i class="fas fa-fw fa-th"></i>分类 </a><a class=menu-item href=/hot/><i class="fas fa-fw fa-fire"></i>热度 </a><a class=menu-item href=/friends/><i class="fas fa-fw fa-fan fa-spin"></i>友链 </a><a class=menu-item href=/search/><i class="fas fa-fw fa-search"></i>搜索 </a><a href=javascript:void(0); class="menu-item language" title=更多><i class="fa fa-fw fa-angle-double-down"></i>更多
<select class=menu-more id=language-select-desktop onchange="location=this.value;">
<option class=placeholder>------</option><option value=/bbs/><i class="fas fa-fw fa-fan fa-spin"></i> BBS </option><option value=https://javanote.doc.lewky.cn/><i class="fas fa-fw fa-fan fa-spin"></i>JavaNote </option><option value=/about/><i class="fas fa-fw fa-at"></i>关于 </option><option value=/posts/e62c38c4.html/><i class="fas fa-fw fa-cog"></i>建站日志</option></select>
</a><span class="menu-item delimiter"></span><a href=javascript:void(0); class="menu-item theme-switch" title=切换主题><i class="fas fa-adjust fa-fw"></i></a></div></div></div></header><header class=mobile id=header-mobile><div class=header-container><div class=header-wrapper><div class=header-title><a href=/ title="Yulin Lewis' Blog"><span class=header-title-pre><i class="fas fa-fw fa-atom"></i></span>雨临Lewis</a></div><div class=menu-toggle id=menu-toggle-mobile><span></span><span></span><span></span></div></div><div class=menu id=menu-mobile><a class=menu-item href=/posts/><i class="fas fa-fw fa-archive"></i>归档</a><a class=menu-item href=/tags/><i class="fas fa-fw fa-tag"></i>标签</a><a class=menu-item href=/categories/><i class="fas fa-fw fa-th"></i>分类</a><a class=menu-item href=/hot/><i class="fas fa-fw fa-fire"></i>热度</a><a class=menu-item href=/friends/><i class="fas fa-fw fa-fan fa-spin"></i>友链</a><a class=menu-item href=/search/><i class="fas fa-fw fa-search"></i>搜索</a><a href=javascript:void(0); class="menu-item theme-switch" title=切换主题>
<i class="fas fa-adjust fa-fw"></i></a><a href=javascript:void(0); class="menu-item language" title=更多><i class="fa fa-angle-double-down"></i>更多
<select class=menu-more id=language-select-desktop onchange="location=this.value;">
<option class=placeholder>------</option><option value=/bbs/><i class="fas fa-fw fa-fan fa-spin"></i> BBS </option><option value=https://javanote.doc.lewky.cn/><i class="fas fa-fw fa-fan fa-spin"></i>JavaNote </option><option value=/about/><i class="fas fa-fw fa-at"></i>关于 </option><option value=/posts/e62c38c4.html/><i class="fas fa-fw fa-cog"></i>建站日志</option></select></a></div></div></header><div class="search-dropdown desktop"><div id=search-dropdown-desktop></div></div><div class="search-dropdown mobile"><div id=search-dropdown-mobile></div></div><main class=main><div class=container><div class="page home" posts><div class=home-profile><div class=home-avatar><img class=site-avatar-plug-bilibili>
<a href=javascript:void(0); title="Please click me~~"><img class=lazyload src=/svg/loading.min.svg data-src=https://cdn.jsdelivr.net/gh/lewky/lewky.github.io@master/images/avatar.jpg data-srcset="https://cdn.jsdelivr.net/gh/lewky/lewky.github.io@master/images/avatar.jpg, https://cdn.jsdelivr.net/gh/lewky/lewky.github.io@master/images/avatar.jpg 1.5x, https://cdn.jsdelivr.net/gh/lewky/lewky.github.io@master/images/avatar.jpg 2x" data-sizes=auto alt=https://cdn.jsdelivr.net/gh/lewky/lewky.github.io@master/images/avatar.jpg title="Please click me~~"></a></div><h1 class=home-title>雨临Lewis的博客</h1><h2 class=home-subtitle><div id=id-1 class=typeit></div></h2><div class=links><a href=https://github.com/lewky title=GitHub target=_blank rel="noopener noreffer me"><i class="fab fa-github-alt fa-fw"></i></a><a href=https://steamcommunity.com/id/lewky233 title=Steam target=_blank rel="noopener noreffer me"><i class="fab fa-steam fa-fw"></i></a><a href=https://www.zhihu.com/people/lbf233 title=知乎 target=_blank rel="noopener noreffer me"><i data-svg-src=https://cdn.jsdelivr.net/npm/simple-icons@2.14.0/icons/zhihu.svg></i></a><a href=https://space.bilibili.com/12348930 title=bilibili target=_blank rel="noopener noreffer me"><i data-svg-src=/svg/icons/bilibili.min.svg></i></a><a href=mailto:1019175915@qq.com title=Email rel=me><i class="far fa-envelope fa-fw"></i></a><a href=/index.xml title=RSS target=_blank rel="noopener noreffer me"><i class="fas fa-rss fa-fw"></i></a></div></div><article class="single summary" itemscope itemtype=http://schema.org/Article><h1 class=single-title itemprop="name headline"><a href=/posts/d8914798.html/>SQL - ROW_NUMBER() OVER()函数</a></h1><div class=post-meta><span class=post-author><a href=/ title=Author rel=author class=author><i class="fas fa-user-circle fa-fw"></i>雨临Lewis</a></span>&nbsp;<span class=post-publish>发布于 <time datetime=2018-01-22>2018-01-22</time>,
</span>&nbsp;<span class=post-publish>更新于 <time datetime=2018-01-22>2018-01-22</time>,
</span>&nbsp;<span class=post-category>收录于 <a href=/categories/sql/><i class="far fa-folder fa-fw"></i>SQL</a></span></div><div class=content><p>ROW_NUMBER() OVER()函数用来为每条记录返回一个行号，可以用来对记录进行排序并返回该序号，序号从1开始排序。</p><p>这里的over()是聚集函数，可以给记录进行分组、排序；row_number()不能单独使用，必须搭配over()才能使用，否则会报错。</p></div><div class=post-footer><a href=/posts/d8914798.html/>阅读全文 »</a><div class=post-tags><i class="fas fa-tags fa-fw"></i>&nbsp;<a href=/tags/sql/>SQL</a></div></div></article><article class="single summary" itemscope itemtype=http://schema.org/Article><h1 class=single-title itemprop="name headline"><a href=/posts/90196397.html/>PostgreSQL笔记-查看表的主外键等约束关系</a></h1><div class=post-meta><span class=post-author><a href=/ title=Author rel=author class=author><i class="fas fa-user-circle fa-fw"></i>雨临Lewis</a></span>&nbsp;<span class=post-publish>发布于 <time datetime=2017-12-28>2017-12-28</time>,
</span>&nbsp;<span class=post-publish>更新于 <time datetime=2017-12-28>2017-12-28</time>,
</span>&nbsp;<span class=post-category>收录于 <a href=/categories/postgresql/><i class="far fa-folder fa-fw"></i>PostgreSQL</a></span></div><div class=content><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-fallback data-lang=fallback>SELECT
     tc.constraint_name, tc.table_name, kcu.column_name, 
     ccu.table_name AS foreign_table_name,
     ccu.column_name AS foreign_column_name,
     tc.is_deferrable,tc.initially_deferred
 FROM 
     information_schema.table_constraints AS tc 
     JOIN information_schema.key_column_usage AS kcu ON tc.constraint_name = kcu.constraint_name
     JOIN information_schema.constraint_column_usage AS ccu ON ccu.constraint_name = tc.constraint_name
 WHERE constraint_type = &#39;FOREIGN KEY&#39; AND tc.table_name = &#39;your table name&#39;;
</code></pre></td></tr></table></div></div></div><div class=post-footer><a href=/posts/90196397.html/>阅读全文 »</a><div class=post-tags><i class="fas fa-tags fa-fw"></i>&nbsp;<a href=/tags/postgresql/>PostgreSQL</a></div></div></article><article class="single summary" itemscope itemtype=http://schema.org/Article><h1 class=single-title itemprop="name headline"><a href=/posts/javamail.html/>JavaMail-发送一封简单邮件（附带附件）</a></h1><div class=post-meta><span class=post-author><a href=/ title=Author rel=author class=author><i class="fas fa-user-circle fa-fw"></i>雨临Lewis</a></span>&nbsp;<span class=post-publish>发布于 <time datetime=2017-11-22>2017-11-22</time>,
</span>&nbsp;<span class=post-publish>更新于 <time datetime=2021-03-17>2021-03-17</time>,
</span>&nbsp;<span class=post-category>收录于 <a href=/categories/%E5%B7%A5%E4%BD%9C%E8%AE%B0%E5%BD%95/><i class="far fa-folder fa-fw"></i>工作记录</a></span></div><div class=content><h2 id=代码实现>代码实现</h2><p>最近使用到JavaMail，写了个简单的工具类，记录一下。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>  1
</span><span class=lnt>  2
</span><span class=lnt>  3
</span><span class=lnt>  4
</span><span class=lnt>  5
</span><span class=lnt>  6
</span><span class=lnt>  7
</span><span class=lnt>  8
</span><span class=lnt>  9
</span><span class=lnt> 10
</span><span class=lnt> 11
</span><span class=lnt> 12
</span><span class=lnt> 13
</span><span class=lnt> 14
</span><span class=lnt> 15
</span><span class=lnt> 16
</span><span class=lnt> 17
</span><span class=lnt> 18
</span><span class=lnt> 19
</span><span class=lnt> 20
</span><span class=lnt> 21
</span><span class=lnt> 22
</span><span class=lnt> 23
</span><span class=lnt> 24
</span><span class=lnt> 25
</span><span class=lnt> 26
</span><span class=lnt> 27
</span><span class=lnt> 28
</span><span class=lnt> 29
</span><span class=lnt> 30
</span><span class=lnt> 31
</span><span class=lnt> 32
</span><span class=lnt> 33
</span><span class=lnt> 34
</span><span class=lnt> 35
</span><span class=lnt> 36
</span><span class=lnt> 37
</span><span class=lnt> 38
</span><span class=lnt> 39
</span><span class=lnt> 40
</span><span class=lnt> 41
</span><span class=lnt> 42
</span><span class=lnt> 43
</span><span class=lnt> 44
</span><span class=lnt> 45
</span><span class=lnt> 46
</span><span class=lnt> 47
</span><span class=lnt> 48
</span><span class=lnt> 49
</span><span class=lnt> 50
</span><span class=lnt> 51
</span><span class=lnt> 52
</span><span class=lnt> 53
</span><span class=lnt> 54
</span><span class=lnt> 55
</span><span class=lnt> 56
</span><span class=lnt> 57
</span><span class=lnt> 58
</span><span class=lnt> 59
</span><span class=lnt> 60
</span><span class=lnt> 61
</span><span class=lnt> 62
</span><span class=lnt> 63
</span><span class=lnt> 64
</span><span class=lnt> 65
</span><span class=lnt> 66
</span><span class=lnt> 67
</span><span class=lnt> 68
</span><span class=lnt> 69
</span><span class=lnt> 70
</span><span class=lnt> 71
</span><span class=lnt> 72
</span><span class=lnt> 73
</span><span class=lnt> 74
</span><span class=lnt> 75
</span><span class=lnt> 76
</span><span class=lnt> 77
</span><span class=lnt> 78
</span><span class=lnt> 79
</span><span class=lnt> 80
</span><span class=lnt> 81
</span><span class=lnt> 82
</span><span class=lnt> 83
</span><span class=lnt> 84
</span><span class=lnt> 85
</span><span class=lnt> 86
</span><span class=lnt> 87
</span><span class=lnt> 88
</span><span class=lnt> 89
</span><span class=lnt> 90
</span><span class=lnt> 91
</span><span class=lnt> 92
</span><span class=lnt> 93
</span><span class=lnt> 94
</span><span class=lnt> 95
</span><span class=lnt> 96
</span><span class=lnt> 97
</span><span class=lnt> 98
</span><span class=lnt> 99
</span><span class=lnt>100
</span><span class=lnt>101
</span><span class=lnt>102
</span><span class=lnt>103
</span><span class=lnt>104
</span><span class=lnt>105
</span><span class=lnt>106
</span><span class=lnt>107
</span><span class=lnt>108
</span><span class=lnt>109
</span><span class=lnt>110
</span><span class=lnt>111
</span><span class=lnt>112
</span><span class=lnt>113
</span><span class=lnt>114
</span><span class=lnt>115
</span><span class=lnt>116
</span><span class=lnt>117
</span><span class=lnt>118
</span><span class=lnt>119
</span><span class=lnt>120
</span><span class=lnt>121
</span><span class=lnt>122
</span><span class=lnt>123
</span><span class=lnt>124
</span><span class=lnt>125
</span><span class=lnt>126
</span><span class=lnt>127
</span><span class=lnt>128
</span><span class=lnt>129
</span><span class=lnt>130
</span><span class=lnt>131
</span><span class=lnt>132
</span><span class=lnt>133
</span><span class=lnt>134
</span><span class=lnt>135
</span><span class=lnt>136
</span><span class=lnt>137
</span><span class=lnt>138
</span><span class=lnt>139
</span><span class=lnt>140
</span><span class=lnt>141
</span><span class=lnt>142
</span><span class=lnt>143
</span><span class=lnt>144
</span><span class=lnt>145
</span><span class=lnt>146
</span><span class=lnt>147
</span><span class=lnt>148
</span><span class=lnt>149
</span><span class=lnt>150
</span><span class=lnt>151
</span><span class=lnt>152
</span><span class=lnt>153
</span><span class=lnt>154
</span><span class=lnt>155
</span><span class=lnt>156
</span><span class=lnt>157
</span><span class=lnt>158
</span><span class=lnt>159
</span><span class=lnt>160
</span><span class=lnt>161
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-java data-lang=java><span class=kn>import</span> <span class=nn>java.util.Date</span><span class=o>;</span>
<span class=kn>import</span> <span class=nn>java.util.Properties</span><span class=o>;</span>

<span class=kn>import</span> <span class=nn>javax.mail.MessagingException</span><span class=o>;</span>
<span class=kn>import</span> <span class=nn>javax.mail.Session</span><span class=o>;</span>
<span class=kn>import</span> <span class=nn>javax.mail.Transport</span><span class=o>;</span>
<span class=kn>import</span> <span class=nn>javax.mail.internet.AddressException</span><span class=o>;</span>
<span class=kn>import</span> <span class=nn>javax.mail.internet.InternetAddress</span><span class=o>;</span>
<span class=kn>import</span> <span class=nn>javax.mail.internet.MimeBodyPart</span><span class=o>;</span>
<span class=kn>import</span> <span class=nn>javax.mail.internet.MimeMessage</span><span class=o>;</span>
<span class=kn>import</span> <span class=nn>javax.mail.internet.MimeMessage.RecipientType</span><span class=o>;</span>
<span class=kn>import</span> <span class=nn>javax.mail.internet.MimeMultipart</span><span class=o>;</span>

<span class=kd>public</span> <span class=kd>class</span> <span class=nc>JavaMailUtils</span> <span class=o>{</span>
	<span class=c1>//连接SMTP服务器的主机名，这里以qq邮箱为例
</span><span class=c1></span>    <span class=kd>private</span> <span class=kd>static</span> <span class=kd>final</span> <span class=n>String</span> <span class=n>SMTP_HOST</span> <span class=o>=</span> <span class=s>&#34;smtp.qq.com&#34;</span><span class=o>;</span>
    <span class=c1>//连接的端口号，587为ssl端口，默认为25端口
</span><span class=c1></span>    <span class=kd>private</span> <span class=kd>static</span> <span class=kd>final</span> <span class=n>String</span> <span class=n>SMTP_PORT</span> <span class=o>=</span> <span class=s>&#34;587&#34;</span><span class=o>;</span>
    <span class=c1>//发件人
</span><span class=c1></span>    <span class=kd>private</span> <span class=kd>static</span> <span class=kd>final</span> <span class=n>String</span> <span class=n>MAIL_FROM</span> <span class=o>=</span> <span class=s>&#34;XXX@qq.com&#34;</span><span class=o>;</span>
    <span class=c1>//连接邮件服务器的用户名（邮箱地址去除了@qq.com的部分）
</span><span class=c1></span>    <span class=kd>private</span> <span class=kd>static</span> <span class=kd>final</span> <span class=n>String</span> <span class=n>USER</span> <span class=o>=</span> <span class=s>&#34;XXX&#34;</span><span class=o>;</span>
    <span class=cm>/**
</span><span class=cm>     * 授权码，就是你在邮件服务器上注册的密码，不是你的qq密码
</span><span class=cm>     * 在邮箱里开启smtp/imap服务时需要发送短信，成功后会得到一个授权码
</span><span class=cm>     */</span>
    <span class=kd>private</span> <span class=kd>static</span> <span class=kd>final</span> <span class=n>String</span> <span class=n>PASSWORD</span> <span class=o>=</span> <span class=s>&#34;授权码&#34;</span><span class=o>;</span>

    <span class=kd>private</span> <span class=nf>JavaMailUtils</span><span class=o>()</span> <span class=o>{</span>
    <span class=o>}</span>

    <span class=cm>/**
</span><span class=cm>     * send mail without attachments
</span><span class=cm>     *
</span><span class=cm>     * @param mailTo
</span><span class=cm>     * @param mailCc
</span><span class=cm>     * @param subject
</span><span class=cm>     * @param content
</span><span class=cm>     * @throws AddressException
</span><span class=cm>     * @throws MessagingException
</span><span class=cm>     */</span>
    <span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>sendMail</span><span class=o>(</span><span class=kd>final</span> <span class=n>String</span> <span class=n>mailTo</span><span class=o>,</span> <span class=kd>final</span> <span class=n>String</span> <span class=n>mailCc</span><span class=o>,</span> <span class=kd>final</span> <span class=n>String</span> <span class=n>subject</span><span class=o>,</span> <span class=kd>final</span> <span class=n>String</span> <span class=n>content</span><span class=o>)</span>
            <span class=kd>throws</span> <span class=n>Exception</span> <span class=o>{</span>
        <span class=c1>// get the session
</span><span class=c1></span>        <span class=kd>final</span> <span class=n>Session</span> <span class=n>session</span> <span class=o>=</span> <span class=n>getSession</span><span class=o>();</span>
        <span class=c1>// create a mail
</span><span class=c1></span>        <span class=kd>final</span> <span class=n>MimeMessage</span> <span class=n>message</span> <span class=o>=</span> <span class=n>createMail</span><span class=o>(</span><span class=n>session</span><span class=o>,</span> <span class=n>mailTo</span><span class=o>,</span> <span class=n>mailCc</span><span class=o>,</span> <span class=n>subject</span><span class=o>,</span> <span class=n>content</span><span class=o>);</span>
        <span class=c1>// get the transport
</span><span class=c1></span>        <span class=kd>final</span> <span class=n>Transport</span> <span class=n>transport</span> <span class=o>=</span> <span class=n>session</span><span class=o>.</span><span class=na>getTransport</span><span class=o>();</span>
        <span class=n>transport</span><span class=o>.</span><span class=na>connect</span><span class=o>(</span><span class=n>USER</span><span class=o>,</span> <span class=n>PASSWORD</span><span class=o>);</span>
        <span class=n>transport</span><span class=o>.</span><span class=na>sendMessage</span><span class=o>(</span><span class=n>message</span><span class=o>,</span> <span class=n>message</span><span class=o>.</span><span class=na>getAllRecipients</span><span class=o>());</span>
        <span class=n>transport</span><span class=o>.</span><span class=na>close</span><span class=o>();</span>
    <span class=o>}</span>

    <span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>sendMail</span><span class=o>(</span><span class=kd>final</span> <span class=n>String</span> <span class=n>mailTo</span><span class=o>,</span> <span class=kd>final</span> <span class=n>String</span> <span class=n>mailCc</span><span class=o>,</span> <span class=kd>final</span> <span class=n>String</span> <span class=n>subject</span><span class=o>,</span> <span class=kd>final</span> <span class=n>String</span> <span class=n>content</span><span class=o>,</span>
            <span class=kd>final</span> <span class=n>String</span><span class=o>[]</span> <span class=n>attachments</span><span class=o>)</span> <span class=kd>throws</span> <span class=n>Exception</span> <span class=o>{</span>
        <span class=c1>// get the session
</span><span class=c1></span>        <span class=kd>final</span> <span class=n>Session</span> <span class=n>session</span> <span class=o>=</span> <span class=n>getSession</span><span class=o>();</span>
        <span class=c1>// create a mail
</span><span class=c1></span>        <span class=kd>final</span> <span class=n>MimeMessage</span> <span class=n>message</span> <span class=o>=</span> <span class=n>createMail</span><span class=o>(</span><span class=n>session</span><span class=o>,</span> <span class=n>mailTo</span><span class=o>,</span> <span class=n>mailCc</span><span class=o>,</span> <span class=n>subject</span><span class=o>,</span> <span class=n>content</span><span class=o>,</span> <span class=n>attachments</span><span class=o>);</span>
        <span class=c1>// get the transport
</span><span class=c1></span>        <span class=kd>final</span> <span class=n>Transport</span> <span class=n>transport</span> <span class=o>=</span> <span class=n>session</span><span class=o>.</span><span class=na>getTransport</span><span class=o>();</span>
        <span class=n>transport</span><span class=o>.</span><span class=na>connect</span><span class=o>(</span><span class=n>USER</span><span class=o>,</span> <span class=n>PASSWORD</span><span class=o>);</span>
        <span class=n>transport</span><span class=o>.</span><span class=na>sendMessage</span><span class=o>(</span><span class=n>message</span><span class=o>,</span> <span class=n>message</span><span class=o>.</span><span class=na>getAllRecipients</span><span class=o>());</span>
        <span class=n>transport</span><span class=o>.</span><span class=na>close</span><span class=o>();</span>
    <span class=o>}</span>

    <span class=cm>/**
</span><span class=cm>     * create a mail without attachments
</span><span class=cm>     *
</span><span class=cm>     * @param session
</span><span class=cm>     * @param mailTo
</span><span class=cm>     * @param mailCc
</span><span class=cm>     * @param subject
</span><span class=cm>     * @param content
</span><span class=cm>     * @return
</span><span class=cm>     * @throws Exception
</span><span class=cm>     */</span>
    <span class=kd>private</span> <span class=kd>static</span> <span class=n>MimeMessage</span> <span class=nf>createMail</span><span class=o>(</span><span class=kd>final</span> <span class=n>Session</span> <span class=n>session</span><span class=o>,</span> <span class=kd>final</span> <span class=n>String</span> <span class=n>mailTo</span><span class=o>,</span> <span class=kd>final</span> <span class=n>String</span> <span class=n>mailCc</span><span class=o>,</span>
            <span class=kd>final</span> <span class=n>String</span> <span class=n>subject</span><span class=o>,</span> <span class=kd>final</span> <span class=n>String</span> <span class=n>content</span><span class=o>)</span> <span class=kd>throws</span> <span class=n>Exception</span> <span class=o>{</span>
        <span class=kd>final</span> <span class=n>MimeMessage</span> <span class=n>message</span> <span class=o>=</span> <span class=k>new</span> <span class=n>MimeMessage</span><span class=o>(</span><span class=n>session</span><span class=o>);</span>
        <span class=n>message</span><span class=o>.</span><span class=na>setFrom</span><span class=o>(</span><span class=k>new</span> <span class=n>InternetAddress</span><span class=o>(</span><span class=n>MAIL_FROM</span><span class=o>));</span>
        <span class=n>message</span><span class=o>.</span><span class=na>setRecipients</span><span class=o>(</span><span class=n>RecipientType</span><span class=o>.</span><span class=na>TO</span><span class=o>,</span> <span class=n>InternetAddress</span><span class=o>.</span><span class=na>parse</span><span class=o>(</span><span class=n>mailTo</span><span class=o>));</span>
        <span class=n>message</span><span class=o>.</span><span class=na>setRecipients</span><span class=o>(</span><span class=n>RecipientType</span><span class=o>.</span><span class=na>CC</span><span class=o>,</span> <span class=n>InternetAddress</span><span class=o>.</span><span class=na>parse</span><span class=o>(</span><span class=n>mailCc</span><span class=o>));</span>
        <span class=n>message</span><span class=o>.</span><span class=na>setSubject</span><span class=o>(</span><span class=n>subject</span><span class=o>);</span>
        <span class=n>message</span><span class=o>.</span><span class=na>setContent</span><span class=o>(</span><span class=n>content</span><span class=o>,</span> <span class=s>&#34;text/html;charset=UTF-8&#34;</span><span class=o>);</span>
        <span class=n>message</span><span class=o>.</span><span class=na>setSentDate</span><span class=o>(</span><span class=k>new</span> <span class=n>Date</span><span class=o>());</span>
        <span class=n>message</span><span class=o>.</span><span class=na>saveChanges</span><span class=o>();</span>

        <span class=k>return</span> <span class=n>message</span><span class=o>;</span>
    <span class=o>}</span>

    <span class=cm>/**
</span><span class=cm>     * create a mail with attachments
</span><span class=cm>     *
</span><span class=cm>     * @param session
</span><span class=cm>     * @param mailTo
</span><span class=cm>     * @param mailCc
</span><span class=cm>     * @param subject
</span><span class=cm>     * @param content
</span><span class=cm>     * @param attachments
</span><span class=cm>     * @return
</span><span class=cm>     */</span>
    <span class=kd>private</span> <span class=kd>static</span> <span class=n>MimeMessage</span> <span class=nf>createMail</span><span class=o>(</span><span class=kd>final</span> <span class=n>Session</span> <span class=n>session</span><span class=o>,</span> <span class=kd>final</span> <span class=n>String</span> <span class=n>mailTo</span><span class=o>,</span> <span class=kd>final</span> <span class=n>String</span> <span class=n>mailCc</span><span class=o>,</span>
            <span class=kd>final</span> <span class=n>String</span> <span class=n>subject</span><span class=o>,</span> <span class=kd>final</span> <span class=n>String</span> <span class=n>content</span><span class=o>,</span> <span class=kd>final</span> <span class=n>String</span><span class=o>[]</span> <span class=n>attachments</span><span class=o>)</span> <span class=kd>throws</span> <span class=n>Exception</span> <span class=o>{</span>
        <span class=kd>final</span> <span class=n>MimeMessage</span> <span class=n>message</span> <span class=o>=</span> <span class=k>new</span> <span class=n>MimeMessage</span><span class=o>(</span><span class=n>session</span><span class=o>);</span>
        <span class=n>message</span><span class=o>.</span><span class=na>setFrom</span><span class=o>(</span><span class=k>new</span> <span class=n>InternetAddress</span><span class=o>(</span><span class=n>MAIL_FROM</span><span class=o>));</span>
        <span class=n>message</span><span class=o>.</span><span class=na>setRecipients</span><span class=o>(</span><span class=n>RecipientType</span><span class=o>.</span><span class=na>TO</span><span class=o>,</span> <span class=n>InternetAddress</span><span class=o>.</span><span class=na>parse</span><span class=o>(</span><span class=n>mailTo</span><span class=o>));</span>
        <span class=n>message</span><span class=o>.</span><span class=na>setRecipients</span><span class=o>(</span><span class=n>RecipientType</span><span class=o>.</span><span class=na>CC</span><span class=o>,</span> <span class=n>InternetAddress</span><span class=o>.</span><span class=na>parse</span><span class=o>(</span><span class=n>mailCc</span><span class=o>));</span>
        <span class=n>message</span><span class=o>.</span><span class=na>setSubject</span><span class=o>(</span><span class=n>subject</span><span class=o>);</span>
        <span class=c1>// set the multipart of the mail
</span><span class=c1></span>        <span class=kd>final</span> <span class=n>MimeMultipart</span> <span class=n>multipart</span> <span class=o>=</span> <span class=k>new</span> <span class=n>MimeMultipart</span><span class=o>();</span>
        <span class=c1>// set content part of the mail
</span><span class=c1></span>        <span class=kd>final</span> <span class=n>MimeBodyPart</span> <span class=n>contentPart</span> <span class=o>=</span> <span class=k>new</span> <span class=n>MimeBodyPart</span><span class=o>();</span>
        <span class=n>contentPart</span><span class=o>.</span><span class=na>setContent</span><span class=o>(</span><span class=n>content</span><span class=o>,</span> <span class=s>&#34;text/html;charset=UTF-8&#34;</span><span class=o>);</span>
        <span class=n>multipart</span><span class=o>.</span><span class=na>addBodyPart</span><span class=o>(</span><span class=n>contentPart</span><span class=o>);</span>
        <span class=c1>// set attachment part of the mail
</span><span class=c1></span>        <span class=kd>final</span> <span class=n>MimeBodyPart</span> <span class=n>attach1</span> <span class=o>=</span> <span class=k>new</span> <span class=n>MimeBodyPart</span><span class=o>();</span>
        <span class=kd>final</span> <span class=n>MimeBodyPart</span> <span class=n>attach2</span> <span class=o>=</span> <span class=k>new</span> <span class=n>MimeBodyPart</span><span class=o>();</span>
        <span class=k>if</span> <span class=o>(</span><span class=n>attachments</span> <span class=o>!=</span> <span class=kc>null</span> <span class=o>&amp;&amp;</span> <span class=n>attachments</span><span class=o>.</span><span class=na>length</span> <span class=o>!=</span> <span class=n>0</span><span class=o>)</span> <span class=o>{</span>
            <span class=kd>final</span> <span class=kt>int</span> <span class=n>length</span> <span class=o>=</span> <span class=n>attachments</span><span class=o>.</span><span class=na>length</span><span class=o>;</span>
            <span class=k>if</span> <span class=o>(</span><span class=n>length</span> <span class=o>==</span> <span class=n>1</span><span class=o>)</span> <span class=o>{</span>
                <span class=n>attach1</span><span class=o>.</span><span class=na>attachFile</span><span class=o>(</span><span class=n>attachments</span><span class=o>[</span><span class=n>0</span><span class=o>]);</span>
                <span class=n>multipart</span><span class=o>.</span><span class=na>addBodyPart</span><span class=o>(</span><span class=n>attach1</span><span class=o>);</span>
            <span class=o>}</span>
            <span class=k>if</span> <span class=o>(</span><span class=n>length</span> <span class=o>==</span> <span class=n>2</span><span class=o>)</span> <span class=o>{</span>
                <span class=n>attach1</span><span class=o>.</span><span class=na>attachFile</span><span class=o>(</span><span class=n>attachments</span><span class=o>[</span><span class=n>0</span><span class=o>]);</span>
                <span class=n>attach2</span><span class=o>.</span><span class=na>attachFile</span><span class=o>(</span><span class=n>attachments</span><span class=o>[</span><span class=n>1</span><span class=o>]);</span>
                <span class=n>multipart</span><span class=o>.</span><span class=na>addBodyPart</span><span class=o>(</span><span class=n>attach1</span><span class=o>);</span>
                <span class=n>multipart</span><span class=o>.</span><span class=na>addBodyPart</span><span class=o>(</span><span class=n>attach2</span><span class=o>);</span>
            <span class=o>}</span>
        <span class=o>}</span>
        <span class=n>message</span><span class=o>.</span><span class=na>setContent</span><span class=o>(</span><span class=n>multipart</span><span class=o>);</span>
        <span class=n>message</span><span class=o>.</span><span class=na>setSentDate</span><span class=o>(</span><span class=k>new</span> <span class=n>Date</span><span class=o>());</span>
        <span class=n>message</span><span class=o>.</span><span class=na>saveChanges</span><span class=o>();</span>

        <span class=k>return</span> <span class=n>message</span><span class=o>;</span>
    <span class=o>}</span>

    <span class=cm>/**
</span><span class=cm>     * get the session to transport mails
</span><span class=cm>     */</span>
    <span class=kd>private</span> <span class=kd>static</span> <span class=n>Session</span> <span class=nf>getSession</span><span class=o>()</span> <span class=o>{</span>
        <span class=c1>// set the properties for connecting the mail server
</span><span class=c1></span>        <span class=kd>final</span> <span class=n>Properties</span> <span class=n>props</span> <span class=o>=</span> <span class=k>new</span> <span class=n>Properties</span><span class=o>();</span>
        <span class=n>props</span><span class=o>.</span><span class=na>setProperty</span><span class=o>(</span><span class=s>&#34;mail.debug&#34;</span><span class=o>,</span> <span class=s>&#34;true&#34;</span><span class=o>);</span>
        <span class=n>props</span><span class=o>.</span><span class=na>setProperty</span><span class=o>(</span><span class=s>&#34;mail.transport.protocol&#34;</span><span class=o>,</span> <span class=s>&#34;smtp&#34;</span><span class=o>);</span>
        <span class=n>props</span><span class=o>.</span><span class=na>setProperty</span><span class=o>(</span><span class=s>&#34;mail.host&#34;</span><span class=o>,</span> <span class=n>SMTP_HOST</span><span class=o>);</span>
        <span class=n>props</span><span class=o>.</span><span class=na>setProperty</span><span class=o>(</span><span class=s>&#34;mail.smtp.auth&#34;</span><span class=o>,</span> <span class=s>&#34;true&#34;</span><span class=o>);</span>
        <span class=n>props</span><span class=o>.</span><span class=na>setProperty</span><span class=o>(</span><span class=s>&#34;mail.smtp.port&#34;</span><span class=o>,</span> <span class=n>SMTP_PORT</span><span class=o>);</span>
        <span class=c1>// ssl
</span><span class=c1></span>        <span class=n>props</span><span class=o>.</span><span class=na>setProperty</span><span class=o>(</span><span class=s>&#34;mail.imap.ssl.enable&#34;</span><span class=o>,</span> <span class=s>&#34;true&#34;</span><span class=o>);</span>
        <span class=n>props</span><span class=o>.</span><span class=na>setProperty</span><span class=o>(</span><span class=s>&#34;mail.imap.ssl.socketFactory.class&#34;</span><span class=o>,</span> <span class=s>&#34;DummySSLSocketFactory&#34;</span><span class=o>);</span>
        <span class=n>props</span><span class=o>.</span><span class=na>setProperty</span><span class=o>(</span><span class=s>&#34;mail.imap.ssl.socketFactory.fallback&#34;</span><span class=o>,</span> <span class=s>&#34;false&#34;</span><span class=o>);</span>
        <span class=c1>// create the session
</span><span class=c1></span>        <span class=kd>final</span> <span class=n>Session</span> <span class=n>session</span> <span class=o>=</span> <span class=n>Session</span><span class=o>.</span><span class=na>getDefaultInstance</span><span class=o>(</span><span class=n>props</span><span class=o>);</span>

        <span class=k>return</span> <span class=n>session</span><span class=o>;</span>
    <span class=o>}</span>

<span class=o>}</span>
</code></pre></td></tr></table></div></div></div><div class=post-footer><a href=/posts/javamail.html/>阅读全文 »</a><div class=post-tags><i class="fas fa-tags fa-fw"></i>&nbsp;<a href=/tags/%E5%B7%A5%E4%BD%9C%E8%AE%B0%E5%BD%95/>工作记录</a></div></div></article><article class="single summary" itemscope itemtype=http://schema.org/Article><h1 class=single-title itemprop="name headline"><a href=/posts/39f5b6b2.html/>cmd - 如何在bat文件中调用另一个bat文件</a></h1><div class=post-meta><span class=post-author><a href=/ title=Author rel=author class=author><i class="fas fa-user-circle fa-fw"></i>雨临Lewis</a></span>&nbsp;<span class=post-publish>发布于 <time datetime=2017-11-14>2017-11-14</time>,
</span>&nbsp;<span class=post-publish>更新于 <time datetime=2017-11-14>2017-11-14</time>,
</span>&nbsp;<span class=post-category>收录于 <a href=/categories/cmd/><i class="far fa-folder fa-fw"></i>cmd</a></span></div><div class=content><h2 id=情景一两个bat文件在同一个目录下><strong>情景一：两个bat文件在同一个目录下</strong></h2><p>有时候我们需要在一个bat文件中调用另一个bat文件，比如我们想在a.bat中调用b.bat，如下。</p><p><strong>a.bat</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-fallback data-lang=fallback>@echo off
echo I am a.bat...
echo now run the b.bat
call b.bat
echo over
</code></pre></td></tr></table></div></div></div><div class=post-footer><a href=/posts/39f5b6b2.html/>阅读全文 »</a><div class=post-tags><i class="fas fa-tags fa-fw"></i>&nbsp;<a href=/tags/cmd/>cmd</a></div></div></article><article class="single summary" itemscope itemtype=http://schema.org/Article><h1 class=single-title itemprop="name headline"><a href=/posts/cmd-echo.html/>cmd - bat文件如何关闭回显</a></h1><div class=post-meta><span class=post-author><a href=/ title=Author rel=author class=author><i class="fas fa-user-circle fa-fw"></i>雨临Lewis</a></span>&nbsp;<span class=post-publish>发布于 <time datetime=2017-11-10>2017-11-10</time>,
</span>&nbsp;<span class=post-publish>更新于 <time datetime=2017-11-10>2017-11-10</time>,
</span>&nbsp;<span class=post-category>收录于 <a href=/categories/cmd/><i class="far fa-folder fa-fw"></i>cmd</a></span></div><div class=content><h2 id=echo命令>echo命令</h2><blockquote><p>bat文件是dos下的批处理文件，可以一次性执行多条dos命令，其扩展名为.bat或.cmd，通过双击该文件或者在cmd窗口中输入该文件名可以在cmd窗口中按文件中的顺序执行多条dos命令。</p></blockquote><p><code>echo</code>是回显命令，会将echo后的内容输出到cmd窗口中，比如在一个<code>Test.bat</code>文件中输入如下命令：</p></div><div class=post-footer><a href=/posts/cmd-echo.html/>阅读全文 »</a><div class=post-tags><i class="fas fa-tags fa-fw"></i>&nbsp;<a href=/tags/cmd/>cmd</a></div></div></article><article class="single summary" itemscope itemtype=http://schema.org/Article><h1 class=single-title itemprop="name headline"><a href=/posts/1a76cb2d.html/>MySQL - 8小时连接闲置超时</a></h1><div class=post-meta><span class=post-author><a href=/ title=Author rel=author class=author><i class="fas fa-user-circle fa-fw"></i>雨临Lewis</a></span>&nbsp;<span class=post-publish>发布于 <time datetime=2017-10-22>2017-10-22</time>,
</span>&nbsp;<span class=post-publish>更新于 <time datetime=2017-10-22>2017-10-22</time>,
</span>&nbsp;<span class=post-category>收录于 <a href=/categories/mysql/><i class="far fa-folder fa-fw"></i>MySQL</a></span></div><div class=content><h2 id=问题与分析>问题与分析</h2><p>最近发现之前部署在阿里云的一个web项目，每过一段时间就会报错，但是刷新下页面就会显示正常；在过了比较长的一段时间后，又会报同样的错误，如下：</p></div><div class=post-footer><a href=/posts/1a76cb2d.html/>阅读全文 »</a><div class=post-tags><i class="fas fa-tags fa-fw"></i>&nbsp;<a href=/tags/mysql/>MySQL</a></div></div></article><article class="single summary" itemscope itemtype=http://schema.org/Article><h1 class=single-title itemprop="name headline"><a href=/posts/sql-on-where.html/>SQL - on和where的区别</a></h1><div class=post-meta><span class=post-author><a href=/ title=Author rel=author class=author><i class="fas fa-user-circle fa-fw"></i>雨临Lewis</a></span>&nbsp;<span class=post-publish>发布于 <time datetime=2017-10-14>2017-10-14</time>,
</span>&nbsp;<span class=post-publish>更新于 <time datetime=2017-10-14>2017-10-14</time>,
</span>&nbsp;<span class=post-category>收录于 <a href=/categories/sql/><i class="far fa-folder fa-fw"></i>SQL</a></span></div><div class=content><h2 id=on和where的区别>on和where的区别</h2><p>on和where后都表示查询条件，它们的区别如下：</p><p>1、on只能用于连接查询（内连接、外连接、交叉连接），在其他情况下使用on会报错，比如：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-sql data-lang=sql><span class=k>select</span><span class=o>*</span> <span class=k>from</span> <span class=n>test</span> <span class=k>on</span> <span class=n>id</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span> <span class=c1>-- 报错，不能在普通查询里使用on，需要使用where
</span></code></pre></td></tr></table></div></div><p>2、连接查询会产生一张中间表(临时表)，on是在生成中间表时使用的条件；而where是在中间表生成后对中间表进行过滤使用的条件。比如：</p></div><div class=post-footer><a href=/posts/sql-on-where.html/>阅读全文 »</a><div class=post-tags><i class="fas fa-tags fa-fw"></i>&nbsp;<a href=/tags/sql/>SQL</a></div></div></article><article class="single summary" itemscope itemtype=http://schema.org/Article><h1 class=single-title itemprop="name headline"><a href=/posts/86689e1.html/>Maven - 关于编码GBK的不可映射字符的问题</a></h1><div class=post-meta><span class=post-author><a href=/ title=Author rel=author class=author><i class="fas fa-user-circle fa-fw"></i>雨临Lewis</a></span>&nbsp;<span class=post-publish>发布于 <time datetime=2017-10-13>2017-10-13</time>,
</span>&nbsp;<span class=post-publish>更新于 <time datetime=2017-10-13>2017-10-13</time>,
</span>&nbsp;<span class=post-category>收录于 <a href=/categories/maven/><i class="far fa-folder fa-fw"></i>Maven</a></span></div><div class=content><h2 id=问题与分析>问题与分析</h2><p>之前都是用的Eclipse的Maven插件执行命令，后来偶然在最近完成的一个小项目的根目录里打开cmd，执行<code>mvn clean package</code>报<code>编码GBK的不可映射字符</code>的问题。</p><p>明明之前在Eclipse上打成war包没问题，为什么用cmd执行package命令就会报错？在网上查了下资料，是因为没有在pom.xml文件中添加编译插件的编码字符集，如下：</p></div><div class=post-footer><a href=/posts/86689e1.html/>阅读全文 »</a><div class=post-tags><i class="fas fa-tags fa-fw"></i>&nbsp;<a href=/tags/maven/>Maven</a></div></div></article><article class="single summary" itemscope itemtype=http://schema.org/Article><h1 class=single-title itemprop="name headline"><a href=/posts/ppk-to-ssh-key.html/>Putty的ppk文件转成Xshell使用的key文件</a></h1><div class=post-meta><span class=post-author><a href=/ title=Author rel=author class=author><i class="fas fa-user-circle fa-fw"></i>雨临Lewis</a></span>&nbsp;<span class=post-publish>发布于 <time datetime=2017-10-12>2017-10-12</time>,
</span>&nbsp;<span class=post-publish>更新于 <time datetime=2017-10-12>2017-10-12</time>,
</span>&nbsp;<span class=post-category>收录于 <a href=/categories/%E5%B8%B8%E7%94%A8%E8%BD%AF%E4%BB%B6/><i class="far fa-folder fa-fw"></i>常用软件</a></span></div><div class=content><h2 id=问题与解决方案>问题与解决方案</h2><p>key文件的格式有很多种，而putty的ppk文件是不能直接导入到xshell中来使用的，需要用puttygen将ppk文件转换成xshell支持的OPENSSH格式，操作如下：</p></div><div class=post-footer><a href=/posts/ppk-to-ssh-key.html/>阅读全文 »</a><div class=post-tags><i class="fas fa-tags fa-fw"></i>&nbsp;<a href=/tags/ppk/>ppk</a>,&nbsp;<a href=/tags/xshell/>Xshell</a>,&nbsp;<a href=/tags/putty/>Putty</a></div></div></article><article class="single summary" itemscope itemtype=http://schema.org/Article><h1 class=single-title itemprop="name headline"><a href=/posts/43941.html/>Java高并发秒杀API(四)之高并发优化</a></h1><div class=post-meta><span class=post-author><a href=/ title=Author rel=author class=author><i class="fas fa-user-circle fa-fw"></i>雨临Lewis</a></span>&nbsp;<span class=post-publish>发布于 <time datetime=2017-10-06>2017-10-06</time>,
</span>&nbsp;<span class=post-publish>更新于 <time datetime=2017-10-06>2017-10-06</time>,
</span>&nbsp;<span class=post-category>收录于 <a href=/categories/seckill/><i class="far fa-folder fa-fw"></i>seckill</a></span></div><div class=content><h2 id=1-高并发优化分析><strong>1. 高并发优化分析</strong></h2><blockquote><p><strong>关于并发</strong></p></blockquote><p>并发性上不去是因为当多个线程同时访问一行数据时，产生了事务，因此产生写锁，每当一个获取了事务的线程把锁释放，另一个排队线程才能拿到写锁，QPS(Query Per Second每秒查询率)和事务执行的时间有密切关系，事务执行时间越短，并发性越高，这也是要将费时的I/O操作移出事务的原因。</p></div><div class=post-footer><a href=/posts/43941.html/>阅读全文 »</a><div class=post-tags><i class="fas fa-tags fa-fw"></i>&nbsp;<a href=/tags/%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0/>项目笔记</a>,&nbsp;<a href=/tags/ssm%E5%AE%9E%E6%88%98%E9%A1%B9%E7%9B%AE/>SSM实战项目</a>,&nbsp;<a href=/tags/%E7%A7%92%E6%9D%80/>秒杀</a></div></div></article><ul class=pagination><li class=page-item><span class=page-link><a href=/>1</a></span></li><li class=page-item><span class=page-link aria-hidden=true>&mldr;</span></li><li class=page-item><span class=page-link><a href=/page/12/>12</a></span></li><li class=page-item><span class=page-link><a href=/page/13/>13</a></span></li><li class="page-item active"><span class=page-link><a href=/page/14/>14</a></span></li><li class=page-item><span class=page-link><a href=/page/15/>15</a></span></li></ul></div></div></main><footer class=footer><div class=footer-container><div class=footer-line><span id=run-time></span>|
<a href=http://rssblog.vercel.app/ target=_blank rel=noopener title=RSSBlog><i class="fas fa-fw fa-inbox"></i>&nbsp;RSSBlog</a></div><div class=footer-line><i class="far fa-copyright fa-fw"></i><span itemprop=copyrightYear>2018 - 2021</span><span class=author itemprop=copyrightHolder>&nbsp;<a href=/ target=_blank>雨临Lewis</a></span>&nbsp;|&nbsp;<span class=license><a rel="license external nofollow noopener noreffer" href=https://creativecommons.org/licenses/by-nc/4.0/ target=_blank>CC BY-NC 4.0</a></span><span class=icp-splitter>&nbsp;|&nbsp;</span><br class=icp-br><span class=icp><a target=_blank href=http://www.beian.miit.gov.cn/ style=font-weight:700>粤ICP备19103822</a></span></div></div></footer></div><div id=fixed-buttons><a href=# id=back-to-top class=fixed-button title=回到顶部><i class="fas fa-arrow-up fa-fw"></i></a><a href=# id=view-comments class=fixed-button title=查看评论><i class="fas fa-comment fa-fw"></i></a></div><div class=sidebar_wo><div id=leimu><img src=https://cdn.jsdelivr.net/gh/lewky/lewky.github.io@master/images/b2t/leimuA.png alt=雷姆 onmouseover="this.src='https:\/\/cdn.jsdelivr.net\/gh\/lewky\/lewky.github.io@master/images/b2t/leimuB.png'" onmouseout="this.src='https:\/\/cdn.jsdelivr.net\/gh\/lewky\/lewky.github.io@master/images/b2t/leimuA.png'" title=回到顶部></div><div class=sidebar_wo id=lamu><img src=https://cdn.jsdelivr.net/gh/lewky/lewky.github.io@master/images/b2t/lamuA.png alt=雷姆 onmouseover="this.src='https:\/\/cdn.jsdelivr.net\/gh\/lewky\/lewky.github.io@master/images/b2t/lamuB.png'" onmouseout="this.src='https:\/\/cdn.jsdelivr.net\/gh\/lewky\/lewky.github.io@master/images/b2t/lamuA.png'" title=回到底部></div></div><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/lightgallery.js@1.2.0/dist/css/lightgallery.min.css><script type=text/javascript src=https://cdn.jsdelivr.net/npm/smooth-scroll@16.1.3/dist/smooth-scroll.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/lazysizes@5.2.2/lazysizes.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/lightgallery.js@1.2.0/dist/js/lightgallery.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/lg-thumbnail.js@1.2.0/dist/lg-thumbnail.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/lg-zoom.js@1.2.0/dist/lg-zoom.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/clipboard@2.0.6/dist/clipboard.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/sharer.js@0.4.0/sharer.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/typeit@7.0.4/dist/typeit.min.js></script><script type=text/javascript>window.config={"code":{"copyTitle":"复制到剪贴板","maxShownLines":15},"data":{"id-1":"赵子龙一身是\u003cfont color=\"orange\"\u003e胆\u003c/font\u003e，程序猿遍体皆\u003cfont color=\"red\"\u003e肝\u003c/font\u003e"},"lightGallery":{"actualSize":false,"exThumbImage":"data-thumbnail","hideBarsDelay":2000,"selector":".lightgallery","speed":400,"thumbContHeight":80,"thumbWidth":80,"thumbnail":true},"typeit":{"cursorChar":"|","cursorSpeed":1000,"data":{"id-1":["id-1"]},"duration":-1,"speed":100}};</script><script type=text/javascript src=/js/theme.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/jquery@2.1.3/dist/jquery.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/jquery-backstretch@2.1.18/jquery.backstretch.min.js></script><script>$(function(){$(".site-avatar-plug-bilibili").attr("src","https:\/\/cdn.jsdelivr.net\/gh\/lewky\/lewky.github.io@master/images/avatar-plug/bilibili_"+(~~(128*Math.random())+1)+".png");});var avatar_plug=0;var avatar_click=1;jQuery(document).ready(function($){var frequency=1;var plug_count=128;$("div.home-avatar a").click(function(e){if(avatar_click%frequency===0){avatar_plug++;$(".site-avatar-plug-bilibili").attr("src","https:\/\/cdn.jsdelivr.net\/gh\/lewky\/lewky.github.io@master/images/avatar-plug/bilibili_"+avatar_plug+".png");}
if(avatar_plug===plug_count){avatar_plug=0;}
$("div.home-avatar a").attr("alt","再点击"+(frequency-avatar_click%frequency)+"次头像试试看~~");avatar_click++;});});</script><script>var $cdnPrefix="https://cdn.jsdelivr.net/gh/lewky/lewky.github.io@master";</script><script type=text/javascript src=/js/custom.js></script><script>var _hmt=_hmt||[];(function(){var hm=document.createElement("script");hm.src="https://hm.baidu.com/hm.js?6f278ed0fdb01edb3b1e7398379e5432";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(hm,s);})();</script><div class="GalMenu GalDropDown"><div class=circle id=gal><div class=ring><a href=/ target=_blank style=background-image:url(https://cdn.jsdelivr.net/gh/lewky/lewky.github.io@master/images/rightmenu/rightmenu1.jpg) class=menuItem>首页</a><a href=/funny/mikutap/ target=_blank style=background-image:url(https://cdn.jsdelivr.net/gh/lewky/lewky.github.io@master/images/rightmenu/rightmenu2.jpg) class=menuItem>音乐游戏</a><a href=/funny/high/ target=_blank style=background-image:url(https://cdn.jsdelivr.net/gh/lewky/lewky.github.io@master/images/rightmenu/rightmenu3.jpg) class=menuItem>前方高能</a><a href=/posts/e62c38c4.html target=_blank style=background-image:url(https://cdn.jsdelivr.net/gh/lewky/lewky.github.io@master/images/rightmenu/rightmenu4.jpg) class=menuItem>建站日志</a><a href=/posts/d65a1577.html target=_blank style=background-image:url(https://cdn.jsdelivr.net/gh/lewky/lewky.github.io@master/images/rightmenu/rightmenu5.jpg) class=menuItem>随笔</a><a href=/friends/ target=_blank style=background-image:url(https://cdn.jsdelivr.net/gh/lewky/lewky.github.io@master/images/rightmenu/rightmenu6.jpg) class=menuItem>友链</a></div></div></div><script type=text/javascript>var items=document.querySelectorAll('.menuItem');for(var i=0,l=items.length;i<l;i++){items[i].style.left=(50-35*Math.cos(-0.5*Math.PI-2*(1/l)*i*Math.PI)).toFixed(4)+"%";items[i].style.top=(50+35*Math.sin(-0.5*Math.PI-2*(1/l)*i*Math.PI)).toFixed(4)+"%"}</script><link rel=stylesheet href=https://cdn.jsdelivr.net/gh/lewky/lewky.github.io@master/css/GalMenu.css><script type=text/javascript src=https://cdn.jsdelivr.net/gh/lewky/lewky.github.io@master/js/GalMenu.js></script><script type=text/javascript>$(document).ready(function(){$('body').GalMenu({'menu':'GalDropDown'})});</script></body></html>